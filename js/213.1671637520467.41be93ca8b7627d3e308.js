/*! For license information please see 213.1671637520467.41be93ca8b7627d3e308.js.LICENSE.txt */
(self.webpackChunkimage_builder=self.webpackChunkimage_builder||[]).push([[213],{88689:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ht});var r=n(71002),o=n(4942),a=n(29439),i=n(15861),l=n(75418),s=n.n(l),c=n(96354),u=n(83215),m=n(86706),d=n(61390),p=n(87462),f=n(45987),v=n(80124),g=n(67850),h=n(54915),y=n(79442),b=n(75857),E=n(45697),w=n.n(E),x=n(41693),T=n(48880),L=n(52500),S=["label","isRequired"],k=function(e){var t,n,r=e.label,o=e.isRequired,i=(0,f.Z)(e,S),c=(0,T.default)(),u=c.change,m=c.getState,d=(0,x.Z)(i).input,p=(0,l.useState)([]),v=(0,a.Z)(p,2),g=v[0],h=v[1],y=(0,l.useState)(!1),E=(0,a.Z)(y,2),w=E[0],k=E[1],I=(0,l.useState)(!1),O=(0,a.Z)(I,2),_=O[0],Z=O[1],P=(0,l.useState)(null===(t=m())||void 0===t||null===(n=t.values)||void 0===n?void 0:n["subscription-activation-key"]),A=(0,a.Z)(P,2),C=A[0],z=A[1];return(0,l.useEffect)((function(){Z(!0),L.Z.getActivationKeys().then((function(e){h(e),Z(!1)})),insights.chrome.isProd()?(u("subscription-server-url","subscription.rhsm.redhat.com"),u("subscription-base-url","https://cdn.redhat.com/")):(u("subscription-server-url","subscription.rhsm.stage.redhat.com"),u("subscription-base-url","https://cdn.stage.redhat.com/"))}),[]),s().createElement(b.FormGroup,{isRequired:o,label:r,"data-testid":"subscription-activation-key"},s().createElement(b.Select,{variant:b.SelectVariant.typeahead,onToggle:function(){return k(!w)},onSelect:function(e,t){z(t),k(!1),u(d.name,t)},onClear:function(){z(),u(d.name,void 0)},selections:C,isOpen:w,placeholderText:"Select activation key",typeAheadAriaLabel:"Select activation key"},_&&s().createElement(b.SelectOption,{isNoResultsOption:!0,"data-testid":"activation-keys-loading"},s().createElement(b.Spinner,{isSVG:!0,size:"lg"})),g.map((function(e,t){return s().createElement(b.SelectOption,{key:t,value:e.name})}))))};k.propTypes={label:w().node,isRequired:w().bool},k.defaultProps={label:"",isRequired:!1};const I=k,O=function(){var e,t,n=null===(e=(0,(0,T.default)().getState)())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["azure-tenant-id"],r=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","i");return s().createElement(b.FormGroup,null,s().createElement(b.Button,{component:"a",target:"_blank",variant:"secondary",isDisabled:!r.test(n),href:"https://login.microsoftonline.com/"+n+"/oauth2/v2.0/authorize?client_id=b94bb246-b02c-4985-9c22-d44e66f657f4&scope=openid&response_type=code&response_mode=query&redirect_uri=https://portal.azure.com"},"Authorize Image Builder"))};var _=n(50470),Z=function(){return s().createElement(b.Button,{component:"a",target:"_blank",variant:"link",icon:s().createElement(_.ZP,null),iconPosition:"right",isInline:!0,href:"https://developers.redhat.com/about"},"Red Hat Developer Program")};const P=function(){return s().createElement(b.Alert,{variant:"info",isPlain:!0,isInline:!0,title:s().createElement(s().Fragment,null,"CentOS Stream builds are intended for the development of future versions of RHEL and are not supported for production workloads or other use cases.")},s().createElement("p",null,"Join the ",s().createElement(Z,null)," to learn about paid and no-cost RHEL subscription options."))};var A=n(36459);const C=function(e){var t,n,r=(0,p.Z)({},((0,A.Z)(e),e)),o=(0,T.default)(),i=o.change,c=o.getState,u=(0,x.Z)(r).input,m=(0,l.useState)((null===(t=c())||void 0===t||null===(n=t.values)||void 0===n?void 0:n["file-system-config-toggle"])||"auto"),d=(0,a.Z)(m,2),f=d[0],v=d[1];(0,l.useEffect)((function(){i(u.name,f)}),[f]);var g=function(e,t){v(t.currentTarget.id)};return s().createElement(s().Fragment,null,s().createElement(b.ToggleGroup,{"data-testid":"fsc-paritioning-toggle","aria-label":"Automatic partitioning toggle"},s().createElement(b.ToggleGroupItem,{onChange:g,text:"Use automatic partitioning",buttonId:"auto",isSelected:"auto"===f}),s().createElement(b.ToggleGroupItem,{onChange:g,text:"Manually configure partitions",buttonId:"manual",isSelected:"manual"===f,"data-testid":"file-system-config-toggle-manual"})))};var z=n(93433),N=n(6468),R=n(34046),j=n(70710),D=n(20777),F=n(26246),V=n(31006),G=n(44586),q=n(26470),B=n.n(q);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=(0,p.Z)({},((0,A.Z)(e),e)),n=["/app","/boot","/data","/home","/opt","/srv","/tmp","/usr","/usr/local","/var","/"],r=(0,l.useState)(!1),o=(0,a.Z)(r,2),i=o[0],c=o[1],u=(0,l.useState)("/"),m=(0,a.Z)(u,2),d=m[0],f=m[1],v=(0,l.useState)(""),g=(0,a.Z)(v,2),h=g[0],y=g[1];return(0,l.useEffect)((function(){var e,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(n);try{for(r.s();!(e=r.n()).done;){var o=e.value;if(t.mountpoint.startsWith(o))return f(o),void y(t.mountpoint.substring(o.length))}}catch(e){r.e(e)}finally{r.f()}}),[]),(0,l.useEffect)((function(){var e=h,n=d;e&&("/"!==n&&"/"!==e[0]&&(e="/"+e),n+=e),t.onChange(B().normalize(n))}),[d,h]),s().createElement(s().Fragment,null,s().createElement(b.Select,{className:"pf-u-w-50",isOpen:i,onToggle:function(e){c(e)},onSelect:function(e,t){f(t),c(!1)},selections:d,variant:b.SelectVariant.single},n.map((function(e,t){return s().createElement(b.SelectOption,{key:t,value:e})}))),"/"!==d&&s().createElement(b.TextInput,{className:"pf-u-w-50",type:"text",value:h,"aria-label":"Mount point suffix text input",onChange:function(e){return y(e)}}))};W.propTypes={mountpoint:w().string.isRequired,onChange:w().func.isRequired};const H=W;var U=n(58061),X=function(e){var t=(0,p.Z)({},((0,A.Z)(e),e)),n=(0,l.useState)(!1),r=(0,a.Z)(n,2),o=r[0],i=r[1],c=(0,l.useState)(t.unit||U.at),u=(0,a.Z)(c,2),m=u[0],d=u[1],f=(0,l.useState)(t.size||1),v=(0,a.Z)(f,2),g=v[0],h=v[1];return(0,l.useEffect)((function(){t.onChange(g,m)}),[m,g]),s().createElement(s().Fragment,null,s().createElement(b.TextInput,{className:"pf-u-w-50",type:"text",value:g,"aria-label":"Size text input",onChange:function(e){return h(isNaN(parseInt(e))?0:parseInt(e))}}),s().createElement(b.Select,{className:"pf-u-w-50",isOpen:o,onToggle:function(e){i(e)},onSelect:function(e,t){switch(t){case"KiB":d(U.fI);break;case"MiB":d(U.g7);break;case"GiB":d(U.at)}i(!1)},selections:m===U.fI?"KiB":m===U.g7?"MiB":"GiB",variant:b.SelectVariant.single,"aria-label":"Unit select"},["KiB","MiB","GiB"].map((function(e,t){return s().createElement(b.SelectOption,{key:t,value:e})}))))};X.propTypes={size:w().number.isRequired,unit:w().number.isRequired,onChange:w().func.isRequired};const Y=X;function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J={id:(0,G.Z)(),mountpoint:"/",fstype:"xfs",size:10,unit:U.at};const ee=function(e){var t=(0,p.Z)({},((0,A.Z)(e),e)),n=(0,T.default)(),r=n.change,o=n.getState,i=(0,x.Z)(t).input,c=(0,l.useState)(null),u=(0,a.Z)(c,2),m=u[0],d=u[1],f=(0,l.useState)(null),v=(0,a.Z)(f,2),g=v[0],h=v[1],y=(0,l.useState)(!1),E=(0,a.Z)(y,2),w=E[0],L=E[1],S=(0,l.useState)([J.id]),k=(0,a.Z)(S,2),I=k[0],O=k[1],_=(0,l.useState)([]),Z=(0,a.Z)(_,2),P=Z[0],C=Z[1],q=(0,l.useRef)(),B=(0,l.useState)([J]),M=(0,a.Z)(B,2),W=M[0],X=M[1];(0,l.useEffect)((function(){var e,t,n=null===(e=o())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["file-system-configuration"];if(n){var r=[],a=[];n.map((function(e){var t=(0,G.Z)();r.push({id:t,mountpoint:e.mountpoint,fstype:"xfs",size:e.size,unit:e.unit}),a.push(t)})),X(r),O(a)}}),[]);var K=function(){var e,t;return null===(e=o())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["file-system-config-show-errors"]};(0,l.useEffect)((function(){r(i.name,I.map((function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(W);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id===e)return{mountpoint:r.mountpoint,size:r.size,unit:r.unit}}}catch(e){n.e(e)}finally{n.f()}})))}),[W,I]);var ee=function(){var e=(0,G.Z)();X(W.concat([{id:e,mountpoint:"/home",fstype:"xfs",size:1,unit:U.at}])),O(I.concat([e]))},te=function(e){var t=q.current,n=Array.from(t.children);if(!n.map((function(e){return e.id})).every((function(t,n){return t===e[n]}))){for(;t.firstChild;)t.removeChild(t.lastChild);e.forEach((function(e){t.appendChild(n.find((function(t){return t.id===e})))}))}},ne=function(e){e.preventDefault();var t=e.target.closest("tr");if(!t||!q.current.contains(t))return null;var n=t.id,r=Array.from(q.current.children).findIndex((function(e){return e.id===n}));if(r!==g){var o=function(e,t,n){var r=e.indexOf(t);if(r===n)return e;var o=e.splice(r,1);return e.splice(n,0,o[0]),e}((0,z.Z)(I),m,r);te(o),h(r),C(o)}},re=function(e){var t=q.current.getBoundingClientRect();return e.clientX>t.x&&e.clientX<t.x+t.width&&e.clientY>t.y&&e.clientY<t.y+t.height},oe=function(e){re(e)||(te(I),h(null))},ae=function(e){re(e)&&O(P)},ie=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",e.currentTarget.id),e.currentTarget.classList.add(F.Z.modifiers.ghostRow),e.currentTarget.setAttribute("aria-pressed","true"),d(e.currentTarget.id),L(!0)},le=function(e){e.target.classList.remove(F.Z.modifiers.ghostRow),e.target.setAttribute("aria-pressed","false"),d(null),h(null),L(!1)};return s().createElement(N.lP,null,(function(){var e,t,n,r,a,i,l;return s().createElement(s().Fragment,null,s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Configure partitions")),W.length>1&&0!==(null===(e=o())||void 0===e||null===(t=e.errors)||void 0===t||null===(n=t["file-system-configuration"])||void 0===n||null===(r=n.duplicates)||void 0===r?void 0:r.length)&&K()&&s().createElement(b.Alert,{variant:"danger",isInline:!0,title:"Duplicate mount points: All mount points must be unique. Remove the duplicate or choose a new mount point.","data-testid":"fsc-warning"}),W.length>=1&&!1===(null===(a=o())||void 0===a||null===(i=a.errors)||void 0===i||null===(l=i["file-system-configuration"])||void 0===l?void 0:l.root)&&K()&&s().createElement(b.Alert,{variant:"danger",isInline:!0,title:"No root partition configured."}),s().createElement(b.TextContent,null,s().createElement(b.Text,null,"Partitions have been generated and given default values based on best practices from Red Hat, and your selections in previous steps of the wizard.")),s().createElement(V.TableComposable,{"aria-label":"File system table",className:w&&F.Z.modifiers.dragOver,variant:"compact"},s().createElement(V.Thead,null,s().createElement(V.Tr,null,s().createElement(V.Th,null),s().createElement(V.Th,null,"Mount point"),s().createElement(V.Th,null,"Type"),s().createElement(V.Th,null,"Minimum size",s().createElement(b.Popover,{hasAutoWidth:!0,bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"Image Builder may extend this size based on requirements, selected packages, and configurations."))},s().createElement(b.Button,{variant:"plain","aria-label":"File system configuration info","aria-describedby":"file-system-configuration-info",className:"pf-c-form__group-label-help"},s().createElement(R.ZP,null)))),s().createElement(V.Th,null))),s().createElement(V.Tbody,{ref:q,onDragOver:ne,onDrop:ne,onDragLeave:oe,"data-testid":"file-system-configuration-tbody"},W.map((function(e,t){var n,r;return s().createElement(V.Tr,{key:t,id:e.id,draggable:!0,onDrop:ae,onDragEnd:le,onDragStart:ie},s().createElement(V.Td,{draggableRow:{id:"draggable-row-".concat(e.id)}}),s().createElement(V.Td,{className:"pf-m-width-30"},s().createElement(H,{key:e.id+"-mountpoint",mountpoint:e.mountpoint,onChange:function(t){return function(e,t){for(var n=(0,z.Z)(W),r=0;r<n.length;r++)if(n[r].id===e){var o=Q({},n[r]);o.mountpoint=t,n.splice(r,1,o);break}X(n)}(e.id,t)}}),0!==(null===(n=o().errors["file-system-configuration"])||void 0===n?void 0:n.duplicates.length)&&-1!==(null===(r=o().errors["file-system-configuration"])||void 0===r?void 0:r.duplicates.indexOf(e.mountpoint))&&K()&&s().createElement(b.Alert,{variant:"danger",isInline:!0,isPlain:!0,title:"Duplicate mount point."})),s().createElement(V.Td,{className:"pf-m-width-20"},e.fstype),s().createElement(V.Td,{className:"pf-m-width-30"},s().createElement(Y,{key:e.id+"-sizeunit",size:e.size,unit:e.unit,onChange:function(t,n){return function(e,t,n){for(var r=(0,z.Z)(W),o=0;o<r.length;o++)if(r[o].id===e){var a=Q({},r[o]);a.size=t,a.unit=n,r.splice(o,1,a);break}X(r)}(e.id,t,n)}})),s().createElement(V.Td,{className:"pf-m-width-10"},s().createElement(b.Button,{variant:"link",icon:s().createElement(j.ZP,null),onClick:function(){return function(e){var t=W.map((function(e){return e.id})).indexOf(e),n=(0,z.Z)(W);n.splice(t,1);var r=I.indexOf(e),o=(0,z.Z)(I);o.splice(r,1),X(n),O(o)}(e.id)},"data-testid":"remove-mount-point"})))})))),s().createElement(b.TextContent,null,s().createElement(b.Button,{"data-testid":"file-system-add-partition",className:"pf-u-text-align-left",variant:"link",icon:s().createElement(D.ZP,null),onClick:ee},"Add partition")))}))},te=function(e){switch(e){case U.F2:case U.PV:return!0;default:return!1}};var ne=["label","isRequired"],re=function(e){var t,n,r=e.label,o=e.isRequired,i=(0,f.Z)(e,ne),c=(0,T.default)(),u=c.change,m=c.getState,d=(0,x.Z)(i).input,v=(0,l.useState)(!1),g=(0,a.Z)(v,2),h=g[0],y=g[1],E=(0,l.useState)(!1),w=(0,a.Z)(E,2),L=w[0],S=w[1];return s().createElement(b.FormGroup,{isRequired:o,label:r},s().createElement(b.Select,(0,p.Z)({variant:b.SelectVariant.single,onToggle:function(){return y(!h)},onSelect:function(e,t){u(d.name,t),y(!1)},onClear:function(){u(d.name,null),S(!1)},selections:U.rh[null===(t=m())||void 0===t||null===(n=t.values)||void 0===n?void 0:n[d.name]],isOpen:h},!L&&{loadingVariant:{text:"Show options for further development of RHEL",onClick:function(){S(!0)}}}),Object.entries(U.rh).filter((function(e){var t=(0,a.Z)(e,1)[0];return!!L||te(t)})).map((function(e,t){var n=(0,a.Z)(e,2),r=n[0],o=n[1];return s().createElement(b.SelectOption,{key:t,value:r},o)}))))};re.propTypes={label:w().node,isRequired:w().bool};const oe=re;var ae=n(70196),ie=n(6569),le=n(5866),se=n(95511),ce=["defaultArch"];function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(){de=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new L(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=w(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var m={};function d(){}function p(){}function f(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(S([])));h&&h!==t&&n.call(h,a)&&(v=h);var y=f.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(a,i,l,s){var c=u(e[a],e,i);if("throw"!==c.type){var m=c.arg,d=m.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,s)}),(function(e){o("throw",e,l,s)})):t.resolve(d).then((function(e){m.value=e,l(m)}),(function(e){return o("throw",e,l,s)}))}s(c.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,l,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}var pe=function(e){var t=e.defaultArch,n=(0,f.Z)(e,ce),r=(0,T.default)(),o=r.change,c=r.getState,u=(0,x.Z)(n).input,m=(0,l.useState)(void 0),d=(0,a.Z)(m,2),p=d[0],v=d[1],g=(0,l.useState)(void 0),h=(0,a.Z)(g,2),y=h[0],E=h[1],w=(0,l.useState)(void 0),S=(0,a.Z)(w,2),k=S[0],I=S[1],O=(0,l.useState)([]),_=(0,a.Z)(O,2),Z=_[0],P=_[1],A=(0,l.useState)(!0),C=(0,a.Z)(A,2),N=C[0],R=C[1],j=(0,l.useState)([]),D=(0,a.Z)(j,2),F=D[0],V=D[1],G=(0,l.useState)(!0),q=(0,a.Z)(G,2),B=q[0],M=q[1],W=(0,l.useState)(""),H=(0,a.Z)(W,2),U=H[0],X=H[1];(0,l.useEffect)((function(){var e,t,n=null===(e=c())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["selected-packages"];n&&V(n)}),[]);var Y=(0,l.useCallback)((function(e){return function(t,n){return t=t.name.toLowerCase(),n=n.name.toLowerCase(),t===e?-1:n===e?1:t.startsWith(e)&&!n.startsWith(e)?-1:n.startsWith(e)&&!t.startsWith(e)?1:t<n?-1:n<t?1:0}})),K=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,n=e.sort(Y(t));P(n)},Q=function(e){var t=e.sort(Y(k));V(t)},$=function(e){return e.filter((function(e){return!F.some((function(t){return e.name===t.name}))}))},J=function(){var e=(0,i.Z)(de().mark((function e(){var n,r,o,a,i,l,s,u,m,d,f,v,g;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(insights.chrome.isProd()||!insights.chrome.isBeta()){e.next=7;break}return o=[null===(n=c())||void 0===n||null===(r=n.values)||void 0===r?void 0:r.release,p],e.next=4,L.Z.getPackagesContentSources.apply(L.Z,o);case 4:return e.abrupt("return",e.sent);case 7:return m=[null===(a=c())||void 0===a||null===(i=a.values)||void 0===i?void 0:i.release,(null===(l=c())||void 0===l||null===(s=l.values)||void 0===s?void 0:s.architecture)||t,p],e.next=10,L.Z.getPackages.apply(L.Z,m);case 10:if(d=e.sent,f=d.data,v=d.meta,(null===(u=f)||void 0===u?void 0:u.length)!==v.count){e.next=17;break}return e.abrupt("return",f);case 17:if(!f){e.next=23;break}return e.next=20,L.Z.getPackages.apply(L.Z,m.concat([v.count]));case 20:return g=e.sent,f=g.data,e.abrupt("return",f);case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,i.Z)(de().mark((function e(){var t,n;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(p),e.next=3,J();case 3:(t=e.sent)?(n=$(t),K(n,p),R(!!n.length)):(P([]),R(!1));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(e){"Enter"===e.key&&"available"===U&&(e.stopPropagation(),ee())};(0,l.useEffect)((function(){return document.addEventListener("keydown",te,!0),function(){document.removeEventListener("keydown",te,!0)}}));var ne=function(e,t){return void 0===e||!!t.some((function(t){return t.name.includes(e)}))},re=function(e,t){return!(!e||t.name.includes(e))},oe=function(e,t){Q(t),K(e),R(ne(y,e)),M(ne(k,t)),o(u.name,t.map((function(e){return{name:e.name,summary:e.summary}})))},ue=function(e,t,n){if(n){var r=(0,z.Z)(F);r[t].selected=!F[t].selected,Q(r)}else{var o=(0,z.Z)(Z);o[t].selected=!Z[t].selected,K(o)}},pe=(0,l.useRef)(null);return(0,l.useEffect)((function(){var e;null===(e=pe.current)||void 0===e||e.focus()}),[]),s().createElement(b.DualListSelector,null,s().createElement(b.DualListSelectorPane,{title:"Available packages",searchInput:s().createElement(b.SearchInput,{placeholder:"Search for a package","data-testid":"search-available-pkgs-input",value:p,ref:pe,onFocus:function(){return X("available")},onBlur:function(){return X("")},onChange:function(e){return v(e)},submitSearchButtonLabel:"Search button for available packages",onSearch:ee,resetButtonLabel:"Clear available packages search",onClear:function(){v(void 0),E(void 0),P([]),R(!0)}})},s().createElement(b.DualListSelectorList,{"data-testid":"available-pkgs-list"},Z.length?Z.map((function(e,t){return e.isHidden?null:s().createElement(b.DualListSelectorListItem,{key:t,isSelected:e.selected,onOptionSelect:function(e){return ue(0,t,!1)}},s().createElement(b.TextContent,{key:"".concat(e.name,"-").concat(t)},s().createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),s().createElement("small",null,e.summary)))})):s().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},N?s().createElement(s().Fragment,null,"Search above to add additional",s().createElement("br",null),"packages to your image"):"No packages found"))),s().createElement(b.DualListSelectorControlsWrapper,{"aria-label":"Selector controls"},s().createElement(b.DualListSelectorControl,{isDisabled:!Z.some((function(e){return e.selected})),onClick:function(){return e=[],t=Z.filter((function(t){return!t.selected||(t.selected=!1,t.isHidden=re(k,t),e.push(t),!1)})),n=[].concat(e,(0,z.Z)(F)),void oe(t,n);var e,t,n},"aria-label":"Add selected",tooltipContent:"Add selected"},s().createElement(se.ZP,null)),s().createElement(b.DualListSelectorControl,{isDisabled:!Z.length,onClick:function(){return e=Z.map((function(e){return me(me({},e),{},{selected:!1,isHidden:re(k,e)})})),t=[].concat((0,z.Z)(e),(0,z.Z)(F)),void oe([],t);var e,t},"aria-label":"Add all",tooltipContent:"Add all"},s().createElement(ie.ZP,null)),s().createElement(b.DualListSelectorControl,{isDisabled:!F.length||!B,onClick:function(){return e=F.filter((function(e){return e.isHidden})),t=void 0===y?[]:F.filter((function(e){return!e.isHidden&&e.name.includes(y)})).map((function(e){return me(me({},e),{},{selected:!1})})),n=[].concat((0,z.Z)(t),(0,z.Z)(Z)),void oe(n,e);var e,t,n},"aria-label":"Remove all",tooltipContent:"Remove all"},s().createElement(ae.ZP,null)),s().createElement(b.DualListSelectorControl,{onClick:function(){return e=[],t=F.filter((function(t){return!t.selected||(t.selected=!1,t.isHidden=!1,t.name.includes(y)&&e.push(t),!1)})),n=[].concat(e,(0,z.Z)(Z)),void oe(n,t);var e,t,n},isDisabled:!F.some((function(e){return e.selected}))||!B,"aria-label":"Remove selected",tooltipContent:"Remove selected"},s().createElement(le.ZP,null))),s().createElement(b.DualListSelectorPane,{title:"Chosen packages",searchInput:s().createElement(b.SearchInput,{placeholder:"Search for a package","data-testid":"search-chosen-pkgs-input",value:k,onFocus:function(){return X("chosen")},onBlur:function(){return X("")},onChange:function(e){return function(e){var t=!1,n=F.map((function(n){return n.name.includes(e)?(n.isHidden=!1,t=!0):n.isHidden=!0,n}));I(e),M(t),Q(n)}(e)},resetButtonLabel:"Clear chosen packages search",onClear:function(){I(void 0),Q(F.map((function(e){return me(me({},e),{},{isHidden:!1})}))),M(!0)}}),isChosen:!0},s().createElement(b.DualListSelectorList,{"data-testid":"chosen-pkgs-list"},F.length?B?F.map((function(e,t){return e.isHidden?null:s().createElement(b.DualListSelectorListItem,{key:t,isSelected:e.selected,onOptionSelect:function(e){return ue(0,t,!0)}},s().createElement(b.TextContent,{key:"".concat(e.name,"-").concat(t)},s().createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),s().createElement("small",null,e.summary)))})):s().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"No packages found"):s().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"No packages added"))))};pe.propTypes={defaultArch:w().string};const fe=pe;var ve=n(41626),ge=["Popover"],he=function(e){var t=e.Popover,n=(0,f.Z)(e,ge),r=(0,l.useRef)();return s().createElement(ve.Z,(0,p.Z)({},n,{label:s().createElement("span",{ref:r,className:"ins-c-image--builder__popover"},n.label,s().createElement(t,null))}))};he.propTypes={Popover:w().elementType.isRequired,label:w().node};const ye=he;var be=n(21551);function Ee(){Ee=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new L(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=w(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var m={};function d(){}function p(){}function f(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(S([])));h&&h!==t&&n.call(h,a)&&(v=h);var y=f.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(a,i,l,s){var c=u(e[a],e,i);if("throw"!==c.type){var m=c.arg,d=m.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,s)}),(function(e){o("throw",e,l,s)})):t.resolve(d).then((function(e){m.value=e,l(m)}),(function(e){return o("throw",e,l,s)}))}s(c.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,l,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}const we=function(){var e,t,n=null===(e=(0,(0,N.XQ)().getState)())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["subscription-activation-key"],r=(0,l.useState)(void 0),o=(0,a.Z)(r,2),c=o[0],u=o[1],m=(0,l.useState)(void 0),d=(0,a.Z)(m,2),p=d[0],f=d[1],v=(0,l.useState)(void 0),g=(0,a.Z)(v,2),h=g[0],y=g[1],E=(0,l.useState)(void 0),w=(0,a.Z)(E,2),x=w[0],T=w[1];return(0,l.useEffect)((function(){var e=function(){var e=(0,i.Z)(Ee().mark((function e(){var t;return Ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.Z.getActivationKey(n);case 2:t=e.sent,u(null==t?void 0:t.role),f(null==t?void 0:t.serviceLevel),y(null==t?void 0:t.usage),T(null==t?void 0:t.additionalRepositories);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),s().createElement(s().Fragment,null,s().createElement(b.TextContent,null,s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Name:"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},n),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Role:"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},c||"Not defined"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"SLA:"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},p||"Not defined"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Usage:"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},h||"Not defined"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Additional repositories:",s().createElement(b.Popover,{bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"The core repositories for your operating system version are always enabled and do not need to be explicitly added to the activation key."))},s().createElement(b.Button,{variant:"plain","aria-label":"About additional repositories",className:"pf-u-pl-sm pf-u-pt-0 pf-u-pb-0",isSmall:!0},s().createElement(R.ZP,null)))),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd,className:"pf-u-display-flex pf-u-align-items-flex-end"},(null==x?void 0:x.length)>0?s().createElement(b.Popover,{bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Additional repositories"),s().createElement(V.TableComposable,{"aria-label":"Additional repositories table",variant:"compact"},s().createElement(V.Thead,null,s().createElement(V.Tr,null,s().createElement(V.Th,null,"Name"))),s().createElement(V.Tbody,{"data-testid":"additional-repositories-table"},null==x?void 0:x.map((function(e,t){return s().createElement(V.Tr,{key:t},s().createElement(V.Td,null,e.repositoryLabel))})))))},s().createElement(b.Button,{"data-testid":"repositories-popover-button",variant:"link","aria-label":"Show additional repositories",className:"pf-u-pl-0 pf-u-pt-0 pf-u-pb-0"},null==x?void 0:x.length," repositories")):"None"))))};var xe=function(e){var t=e.label,n=e.valueReference;return s().createElement(N.lP,null,(function(e){var r=e.values;return(0,be.isEmpty)(r[n])?null:s().createElement(b.FormGroup,{label:t},s().createElement(we,null))}))};xe.propTypes={label:w().node,valueReference:w().node};const Te=xe;var Le=n(64124);const Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e["target-environment"],n=e.release,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.skipAws,a=r.skipGoogle,i=r.skipAzure;return!o&&null!=t&&t.aws?"aws-target-env":!a&&null!=t&&t.gcp?"google-cloud-target-env":!i&&null!=t&&t.azure?"ms-azure-target-env":te(n)?"registration":"File system configuration"};var ke=function(e){var t=e.id,n=e.formFields,r=e.formRef,o=e.title,a=e.customTitle,i=e.showTitle,l=e.showTitles;return s().createElement("div",{id:t,ref:r,className:"pf-c-form"},(l&&!1!==i||i)&&(a||s().createElement(b.Title,{headingLevel:"h1",size:"xl"},o)),n)};ke.propTypes={id:w().string,title:w().node,customTitle:w().node,formFields:w().array.isRequired,formOptions:w().shape({renderForm:w().func.isRequired}).isRequired,showTitles:w().bool,showTitle:w().bool,formRef:w().oneOfType([w().func,w().shape({current:w().instanceOf(Element)})])};const Ie=ke;var Oe=n(70363),_e=function(e){var t=e.buttonLabels,n=t.cancel,r=t.next,o=t.submit,i=t.back,c=e.handleNext,u=e.handlePrev,m=e.nextStep,d=(0,l.useState)(!1),p=(0,a.Z)(d,2),f=p[0],v=p[1],g=(0,l.useContext)(Oe.default),h=g.currentStep,y=g.formOptions,E=function(){"wizard-review"===h.id?y.onSubmit({values:y.getState().values,setIsSaving:v}):c("function"==typeof m?m({values:y.getState().values}):m)};return s().createElement(N.lP,null,(function(){return s().createElement(s().Fragment,null,s().createElement(b.Button,{id:"".concat(h.id,"-next-button"),variant:"primary",type:"button",isDisabled:!y.valid||y.getState().validating||f,isLoading:"wizard-review"===h.id?f:null,onClick:E},"wizard-review"===h.id?f?"Creating image":o:r),s().createElement(b.Button,{id:"".concat(h.id,"-previous-button"),type:"button",variant:"secondary",onClick:u,isDisabled:f},i),s().createElement("div",{className:"pf-c-wizard__footer-cancel"},s().createElement(b.Button,{id:"".concat(h.id,"-cancel-button"),type:"button",variant:"link",onClick:y.onCancel,isDisabled:f},n)))}))};_e.propTypes={buttonLabels:w().shape({cancel:w().node,submit:w().node,back:w().node,next:w().node}),handleNext:w().func,handlePrev:w().func,nextStep:w().oneOfType([w().string,w().func]),isSaving:w().bool};const Ze=_e;var Pe={googleAccount:"Google account",serviceAccount:"Service account",googleGroup:"Google group",domain:"Domain"},Ae=function(e){var t=e.appendTo;return s().createElement(b.Popover,{appendTo:t,hasAutoWidth:!0,maxWidth:"35rem",headerContent:"Valid account types",flipBehavior:["right","bottom","top","left"],bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"The following account types can have an image shared with them:"),s().createElement(b.TextList,{className:"pf-u-ml-0"},s().createElement(b.TextListItem,null,s().createElement("strong",null,"Google account:")," A Google account represents a developer, an administrator, or any other person who interacts with Google Cloud. For example: ",s().createElement("em",null,"`alice@gmail.com`"),"."),s().createElement(b.TextListItem,null,s().createElement("strong",null,"Service account:")," A service account is an account for an application instead of an individual end user. For example:"," ",s().createElement("em",null,"`myapp@appspot.gserviceaccount.com`"),"."),s().createElement(b.TextListItem,null,s().createElement("strong",null,"Google group:")," A Google group is a named collection of Google accounts and service accounts. For example:"," ",s().createElement("em",null,"`admins@example.com`"),"."),s().createElement(b.TextListItem,null,s().createElement("strong",null,"Google Workspace domain or Cloud Identity domain:")," ","A Google workspace or cloud identity domain represents a virtual group of all the Google accounts in an organization. These domains represent your organization's internet domain name. For example: ",s().createElement("em",null,"`mycompany.com`"),".")))},s().createElement(b.Button,{variant:"plain","aria-label":"Account info","aria-describedby":"google-account-type",className:"pf-c-form__group-label-help"},s().createElement(R.ZP,null)))};Ae.propTypes={appendTo:w().any};const Ce={StepTemplate:Ie,id:"wizard-target-gcp",title:"Google Cloud Platform",customTitle:s().createElement(b.Title,{headingLevel:"h1",size:"xl"},"Target environment - Google Cloud Platform"),name:"google-cloud-target-env",substepOf:"Target environment",nextStep:function(e){var t=e.values;return Se(t,{skipGoogle:!0,skipAws:!0})},buttons:Ze,fields:[{component:c.Z.PLAIN_TEXT,name:"google-cloud-text-component",label:s().createElement(b.Text,null,"Your image will be uploaded to Google Cloud Platform and shared with the account you provide below. ",s().createElement("br",null),"The shared image will expire within 14 days. To keep the image longer, copy it to your Google Cloud Platform account.")},{component:"radio-popover",label:"Type",isRequired:!0,Popover:Ae,name:"google-account-type",initialValue:"googleAccount",options:Object.entries(Pe).map((function(e){var t=(0,a.Z)(e,2),n=t[0],r=t[1];return{label:"domain"===n?"Google Workspace domain or Cloud Identity domain":r,value:n,autoFocus:"googleAccount"===n}})),validate:[{type:Le.Z.REQUIRED}]},{component:c.Z.TEXT_FIELD,name:"google-email","data-testid":"input-google-email",type:"text",label:"Email address",condition:{or:[{when:"google-account-type",is:"googleAccount"},{when:"google-account-type",is:"serviceAccount"},{when:"google-account-type",is:"googleGroup"},{when:"google-account-type",is:null}]},isRequired:!0,validate:[{type:Le.Z.REQUIRED},{type:Le.Z.PATTERN,pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,}$",message:"Please enter a valid email address"}]},{component:c.Z.TEXT_FIELD,name:"google-domain",type:"text",label:"Domain",condition:{when:"google-account-type",is:"domain"},isRequired:!0,validate:[{type:Le.Z.REQUIRED}]}]};function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(){Ne=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new L(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=w(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var m={};function d(){}function p(){}function f(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(S([])));h&&h!==t&&n.call(h,a)&&(v=h);var y=f.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(a,i,l,s){var c=u(e[a],e,i);if("throw"!==c.type){var m=c.arg,d=m.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,s)}),(function(e){o("throw",e,l,s)})):t.resolve(d).then((function(e){m.value=e,l(m)}),(function(e){return o("throw",e,l,s)}))}s(c.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,l,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}var Re=function(e){var t=(0,p.Z)({},((0,A.Z)(e),e));return s().createElement(V.TableComposable,{"aria-label":"File system configuration table",variant:"compact"},s().createElement(V.Thead,null,s().createElement(V.Tr,null,s().createElement(V.Th,null,"Mount point"),s().createElement(V.Th,null,"File system type"),s().createElement(V.Th,null,"Minimum size"))),s().createElement(V.Tbody,{"data-testid":"file-system-configuration-tbody-review"},t.fsc.map((function(e,t){return s().createElement(V.Tr,{key:t},s().createElement(V.Td,{className:"pf-m-width-30"},e.mountpoint),s().createElement(V.Td,{className:"pf-m-width-30"},"xfs"),s().createElement(V.Td,{className:"pf-m-width-30"},e.size," ",e.unit===U.at?"GiB":e.unit===U.g7?"MiB":"KiB"))}))))};Re.propTypes={fsc:w().arrayOf(w().object).isRequired};const je=function(){var e,t,n,r,o,c,u,m,d,p,f,v,g,h,y,E,w,x,L,S,k,I,O,_,Z,P,A,C,z,N,j,D,F,V,G,q,B,M,W,H,X,Y,K,Q,$,J,ee,ne,re,oe,ae,ie,le,se,ce,ue,me,de,pe,fe,ve,ge,he,ye=(0,l.useState)(0),be=(0,a.Z)(ye,2),Ee=be[0],xe=be[1],Te=(0,l.useState)(),Le=(0,a.Z)(Te,2),Se=Le[0],ke=Le[1],Ie=(0,T.default)(),Oe=Ie.change,_e=Ie.getState;return(0,l.useEffect)((function(){var e,t,n,r,o,a,l=null===(e=_e())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["register-system"];if("register-now"!==l&&"register-now-insights"!==l||(0,i.Z)(Ne().mark((function e(){var t,n,r,o,a,i,l;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=insights)||void 0===t||null===(n=t.chrome)||void 0===n||null===(r=n.auth)||void 0===r?void 0:r.getUser();case 2:i=e.sent,l=null==i||null===(o=i.identity)||void 0===o||null===(a=o.internal)||void 0===a?void 0:a.org_id,Oe("subscription-organization-id",l);case 5:case"end":return e.stop()}}),e)})))(),"manual"===(null===(n=_e())||void 0===n||null===(r=n.values)||void 0===r?void 0:r["file-system-config-toggle"])&&null!==(o=_e())&&void 0!==o&&null!==(a=o.values)&&void 0!==a&&a["file-system-configuration"]){var s,c=0,u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(_e().values["file-system-configuration"]);try{for(u.s();!(s=u.n()).done;){var m=s.value;c+=m.size*m.unit}}catch(e){u.e(e)}finally{u.f()}c=(c/U.at).toFixed(1),ke(c<1?"Less than 1 GiB":"".concat(c," GiB"))}})),s().createElement(s().Fragment,null,s().createElement(b.Text,null,'Review the information and click "Create image" to create the image using the following criteria.'),s().createElement(b.DescriptionList,{isCompact:!0},s().createElement(b.DescriptionListGroup,null,(null===(e=_e())||void 0===e||null===(t=e.values)||void 0===t?void 0:t["image-name"])&&s().createElement(s().Fragment,null,s().createElement(b.DescriptionListTerm,null,"Image name"),s().createElement(b.DescriptionListDescription,null,null===(n=_e())||void 0===n||null===(r=n.values)||void 0===r?void 0:r["image-name"])),s().createElement(b.DescriptionListTerm,null,"Release"),s().createElement(b.DescriptionListDescription,null,U.rh[null===(o=_e())||void 0===o||null===(c=o.values)||void 0===c?void 0:c.release]))),s().createElement(b.Tabs,{isFilled:!0,activeKey:Ee,onSelect:function(e,t){xe(t)},className:"pf-u-w-75"},s().createElement(b.Tab,{eventKey:0,title:s().createElement(b.TabTitleText,null,"Target environment"),"data-testid":"tab-target",autoFocus:!0},s().createElement(b.List,{isPlain:!0,iconSize:"large"},(null===(u=_e())||void 0===u||null===(m=u.values)||void 0===m||null===(d=m["target-environment"])||void 0===d?void 0:d.aws)&&s().createElement(b.ListItem,{icon:s().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/aws.svg"})},s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Amazon Web Services"),s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt,className:"pf-u-min-width"},"Account ID"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},null===(p=_e())||void 0===p||null===(f=p.values)||void 0===f?void 0:f["aws-account-id"]),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Default Region"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},"us-east-1")))),(null===(v=_e())||void 0===v||null===(g=v.values)||void 0===g||null===(h=g["target-environment"])||void 0===h?void 0:h.gcp)&&s().createElement(b.ListItem,{className:"pf-c-list__item pf-u-mt-md",icon:s().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"})},s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Google Cloud Platform"),s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},null==Pe?void 0:Pe[null===(y=_e())||void 0===y||null===(E=y.values)||void 0===E?void 0:E["google-account-type"]]),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},(null===(w=_e())||void 0===w||null===(x=w.values)||void 0===x?void 0:x["google-email"])||(null===(L=_e())||void 0===L||null===(S=L.values)||void 0===S?void 0:S["google-domain"]))))),(null===(k=_e())||void 0===k||null===(I=k.values)||void 0===I||null===(O=I["target-environment"])||void 0===O?void 0:O.azure)&&s().createElement(b.ListItem,{className:"pf-c-list__item pf-u-mt-md",icon:s().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg"})},s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Microsoft Azure"),s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Subscription ID"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},null===(_=_e())||void 0===_||null===(Z=_.values)||void 0===Z?void 0:Z["azure-subscription-id"]),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Tenant ID"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},null===(P=_e())||void 0===P||null===(A=P.values)||void 0===A?void 0:A["azure-tenant-id"]),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Resource group"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},null===(C=_e())||void 0===C||null===(z=C.values)||void 0===z?void 0:z["azure-resource-group"])))),(null===(N=_e())||void 0===N||null===(j=N.values)||void 0===j||null===(D=j["target-environment"])||void 0===D?void 0:D.vsphere)&&s().createElement(b.ListItem,null,s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"VMWare"))),(null===(F=_e())||void 0===F||null===(V=F.values)||void 0===V||null===(G=V["target-environment"])||void 0===G?void 0:G["guest-image"])&&s().createElement(b.ListItem,null,s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Virtualization - Guest image"))),(null===(q=_e())||void 0===q||null===(B=q.values)||void 0===B||null===(M=B["target-environment"])||void 0===M?void 0:M["image-installer"])&&s().createElement(b.ListItem,null,s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Bare metal - Installer"))))),te(null===(W=_e())||void 0===W||null===(H=W.values)||void 0===H?void 0:H.release)&&s().createElement(b.Tab,{eventKey:1,title:s().createElement(b.TabTitleText,null,"Registration"),"data-testid":"tab-registration"},"register-later"===(null===(X=_e())||void 0===X||null===(Y=X.values)||void 0===Y?void 0:Y["register-system"])&&s().createElement(b.TextContent,null,s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Registration type"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},"Register the system later"))),("register-now"===(null===(K=_e())||void 0===K||null===(Q=K.values)||void 0===Q?void 0:Q["register-system"])||"register-now-insights"===(null===($=_e())||void 0===$||null===(J=$.values)||void 0===J?void 0:J["register-system"]))&&s().createElement(b.TextContent,null,s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Registration type"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},"register-now-insights"===(null===(ee=_e())||void 0===ee||null===(ne=ee.values)||void 0===ne?void 0:ne["register-system"])&&"Register with Subscriptions and Red Hat Insights","register-now"===(null===(re=_e())||void 0===re||null===(oe=re.values)||void 0===oe?void 0:oe["register-system"])&&"Register with Subscriptions"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Activation key",s().createElement(b.Popover,{bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"Activation keys enable you to register a system with appropriate subscriptions, system purpose, and repositories attached.",s().createElement("br",null),s().createElement("br",null),"If using an activation key with command line registration, you must provide your organization's ID. Your organization's ID is"," ",void 0!==(null===(ae=_e())||void 0===ae||null===(ie=ae.values)||void 0===ie?void 0:ie["subscription-organization-id"])?null===(le=_e())||void 0===le||null===(se=le.values)||void 0===se?void 0:se["subscription-organization-id"]:s().createElement(b.Spinner,{size:"md"})))},s().createElement(b.Button,{variant:"plain","aria-label":"About activation key",className:"pf-u-pl-sm pf-u-pt-0 pf-u-pb-0",isSmall:!0},s().createElement(R.ZP,null)))),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},s().createElement(we,null))))),s().createElement(b.Tab,{eventKey:2,title:s().createElement(b.TabTitleText,null,"System configuration"),"data-testid":"tab-system"},s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"File system configuration"),s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Partitioning"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd,"data-testid":"partitioning-auto-manual"},"manual"===(null===(ce=_e())||void 0===ce||null===(ue=ce.values)||void 0===ue?void 0:ue["file-system-config-toggle"])?"Manual":"Automatic","manual"===(null===(me=_e())||void 0===me||null===(de=me.values)||void 0===de?void 0:de["file-system-config-toggle"])&&s().createElement(s().Fragment,null," ",s().createElement(b.Popover,{position:"bottom",headerContent:"Partitions",hasAutoWidth:!0,minWidth:"30rem",bodyContent:s().createElement(Re,{fsc:_e().values["file-system-configuration"]})},s().createElement(b.Button,{"data-testid":"file-system-configuration-popover",variant:"link","aria-label":"File system configuration info","aria-describedby":"file-system-configuration-info",className:"pf-u-pt-0 pf-u-pb-0"},"View partitions")))),"manual"===(null===(pe=_e())||void 0===pe||null===(fe=pe.values)||void 0===fe?void 0:fe["file-system-config-toggle"])&&s().createElement(s().Fragment,null,s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Image size (minimum)",s().createElement(b.Popover,{hasAutoWidth:!0,bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"Image Builder may extend this size based on requirements, selected packages, and configurations."))},s().createElement(b.Button,{variant:"plain","aria-label":"File system configuration info","aria-describedby":"file-system-configuration-info",className:"pf-c-form__group-label-help"},s().createElement(R.ZP,null)))),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd},Se))),s().createElement(b.Text,{component:b.TextVariants.h3},"Additional packages"),s().createElement(b.TextList,{component:b.TextListVariants.dl},s().createElement(b.TextListItem,{component:b.TextListItemVariants.dt},"Chosen"),s().createElement(b.TextListItem,{component:b.TextListItemVariants.dd,"data-testid":"chosen-packages-count"},(null===(ve=_e())||void 0===ve||null===(ge=ve.values)||void 0===ge||null===(he=ge["selected-packages"])||void 0===he?void 0:he.length)||0))))))};var De=["label","isRequired"];function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=function(e){var t=e.label,n=e.isRequired,r=(0,f.Z)(e,De),i=(0,T.default)(),c=i.getState,u=i.change,m=(0,x.Z)(Ve({label:t,isRequired:n},r)).input,d=(0,l.useState)({aws:!1,azure:!1,gcp:!1,vsphere:!1,"guest-image":!1,"image-installer":!1}),p=(0,a.Z)(d,2),v=p[0],g=p[1];(0,l.useEffect)((function(){var e,t;null!==(e=c())&&void 0!==e&&null!==(t=e.values)&&void 0!==t&&t[m.name]&&g(c().values[m.name])}),[]);var h=function(e){return g((function(t){var n=Ve(Ve({},t),{},(0,o.Z)({},e,!t[e]));return u(m.name,n),n}))},y=function(e,t){" "===e.key&&h(t)};return s().createElement(s().Fragment,null,s().createElement(b.FormGroup,{isRequired:n,label:t,"data-testid":"target-select"},s().createElement(b.FormGroup,{label:s().createElement(b.Text,{component:b.TextVariants.small},"Public cloud"),"data-testid":"target-public"},s().createElement("div",{className:"tiles"},s().createElement(b.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-aws",title:"Amazon Web Services",icon:s().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/aws.svg"}),onClick:function(){return h("aws")},onKeyDown:function(e){return y(e,"aws")},isSelected:v.aws,isStacked:!0,isDisplayLarge:!0}),s().createElement(b.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-google",title:"Google Cloud Platform",icon:s().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"}),onClick:function(){return h("gcp")},isSelected:v.gcp,onKeyDown:function(e){return y(e,"gcp")},isStacked:!0,isDisplayLarge:!0}),s().createElement(b.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-azure",title:"Microsoft Azure",icon:s().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg"}),onClick:function(){return h("azure")},onKeyDown:function(e){return y(e,"azure")},isSelected:v.azure,isStacked:!0,isDisplayLarge:!0}))),s().createElement(b.FormGroup,{label:s().createElement(b.Text,{component:b.TextVariants.small},"Private cloud"),"data-testid":"target-private"},s().createElement(b.Checkbox,{label:"VMWare (.vmdk)",isChecked:v.vsphere,onChange:function(){return h("vsphere")},"aria-label":"VMWare checkbox",id:"checkbox-vmware",name:"VMWare","data-testid":"checkbox-vmware"})),s().createElement(b.FormGroup,{label:s().createElement(b.Text,{component:b.TextVariants.small},"Other"),"data-testid":"target-other"},s().createElement(b.Checkbox,{label:"Virtualization - Guest image (.qcow2)",isChecked:v["guest-image"],onChange:function(){return h("guest-image")},"aria-label":"Virtualization guest image checkbox",id:"checkbox-guest-image",name:"Virtualization guest image","data-testid":"checkbox-guest-image"}),s().createElement(b.Checkbox,{label:"Bare metal - Installer (.iso)",isChecked:v["image-installer"],onChange:function(){return h("image-installer")},"aria-label":"Bare metal installer checkbox",id:"checkbox-image-installer",name:"Bare metal installer","data-testid":"checkbox-image-installer"}))))};Ge.propTypes={label:w().node,isRequired:w().bool},Ge.defaultProps={label:"",isRequired:!1};const qe=Ge;var Be=["schema","onSubmit","onClose","customComponentMapper","customValidatorMapper","defaultArch","className"];function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=function(e){var t=e.schema,n=e.onSubmit,r=e.onClose,o=e.customComponentMapper,a=e.customValidatorMapper,i=e.defaultArch,l=e.className,c=(0,f.Z)(e,Be);return t?s().createElement(y.Z,(0,p.Z)({initialValues:c.initialValues,schema:t,className:"image-builder".concat(l?" ".concat(l):""),subscription:{values:!0},FormTemplate:function(e){return s().createElement(g.ZP,(0,p.Z)({},e,{showFormControls:!1}))},onSubmit:function(e){return n(e)},validatorMapper:We({},a),componentMapper:We(We({},v.YS),{},{review:je,output:qe,select:h.Z,"package-selector":{component:fe,defaultArch:i},"radio-popover":ye,"azure-auth-button":O,"activation-keys":I,"activation-key-information":Te,"file-system-config-toggle":C,"file-system-configuration":ee,"image-output-release-select":oe,"centos-acknowledgement":P},o),onCancel:r},c)):s().createElement(b.Spinner,null)};He.propTypes={schema:w().object,onSubmit:w().func.isRequired,onClose:w().func.isRequired,customComponentMapper:w().shape((0,o.Z)({},w().string,w().oneOfType([w().node,w().shape({component:w().node})]))),customValidatorMapper:w().shape((0,o.Z)({},w().string,w().func)),defaultArch:w().string,className:w().string,initialValues:w().object};const Ue=He,Xe={StepTemplate:Ie,id:"wizard-target-aws",title:"Amazon Web Services",customTitle:s().createElement(b.Title,{headingLevel:"h1",size:"xl"},"Target environment - Amazon Web Services"),name:"aws-target-env",substepOf:"Target environment",nextStep:function(e){var t=e.values;return Se(t,{skipAws:!0})},buttons:Ze,fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text-component",label:s().createElement("p",null,"Your image will be uploaded to AWS and shared with the account you provide below.")},{component:c.Z.PLAIN_TEXT,name:"plain-text-component",label:s().createElement("p",null,s().createElement("b",null,"The shared image will expire within 14 days.")," To permanently access the image, copy the image, which will be shared to your account by Red Hat, to your own AWS account.")},{component:c.Z.TEXT_FIELD,name:"aws-account-id",className:"pf-u-w-25","data-testid":"aws-account-id",type:"text",label:"AWS account ID",isRequired:!0,autoFocus:!0,validate:[{type:Le.Z.REQUIRED},{type:Le.Z.EXACT_LENGTH,threshold:12}]},{component:c.Z.TEXT_FIELD,name:"aws-default-region",className:"pf-u-w-25","data-testid":"aws-default-region",type:"text",label:"Default Region",value:U.NF,isReadOnly:!0,isRequired:!0,helperText:s().createElement(b.HelperText,null,s().createElement(b.HelperTextItem,{component:"div",variant:"indeterminate",className:"pf-u-w-25"},"Images are built in the default region but can be copied to other regions later."))}]},Ye={StepTemplate:Ie,id:"wizard-target-msazure",title:"Microsoft Azure",customTitle:s().createElement(b.Title,{headingLevel:"h1",size:"xl"},"Target environment - Microsoft Azure"),name:"ms-azure-target-env",substepOf:"Target environment",nextStep:function(e){var t=e.values;return Se(t,{skipAws:!0,skipGoogle:!0,skipAzure:!0})},buttons:Ze,fields:[{component:c.Z.PLAIN_TEXT,name:"azure-description",label:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"Upon build, Image Builder sends the image to the selected authorized Azure account. The image will be uploaded to the resource group in the subscription you specify."),s().createElement(b.Text,null,'To authorize Image Builder to push images to Microsoft Azure, the account owner must configure Image Builder as an authorized application for a specific tenant ID and give it the role of "Contributor" to at least one resource group.',s().createElement("br",null),s().createElement(b.Button,{component:"a",target:"_blank",variant:"link",icon:s().createElement(_.ZP,null),iconPosition:"right",isInline:!0,href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow"},"Learn more about OAuth 2.0")))},{component:c.Z.TEXT_FIELD,name:"azure-tenant-id",className:"pf-u-w-50","data-testid":"azure-tenant-id",type:"text",label:"Azure Tenant GUID",required:!0,isRequired:!0,autoFocus:!0,validate:[{type:Le.Z.REQUIRED},{type:Le.Z.PATTERN,pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,message:"Please enter a valid tenant ID"}]},{component:"azure-auth-button",name:"azure-auth-button","data-testid":"azure-auth-button",required:!0,isRequired:!0},{component:c.Z.TEXT_FIELD,name:"azure-subscription-id",className:"pf-u-w-50","data-testid":"azure-subscription-id",type:"text",label:"Subscription ID",isRequired:!0,validate:[{type:Le.Z.REQUIRED},{type:Le.Z.PATTERN,pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,message:"Please enter a valid subscription ID"}]},{component:c.Z.TEXT_FIELD,name:"azure-resource-group",className:"pf-u-w-50","data-testid":"azure-resource-group",type:"text",label:"Resource group",isRequired:!0,validate:[{type:Le.Z.REQUIRED},{type:Le.Z.PATTERN,pattern:/^[-\w._()]+[-\w_()]$/,message:"Resource group names only allow alphanumeric characters, periods, underscores, hyphens, and parenthesis and cannot end in a period"}]}]},Ke={StepTemplate:Ie,id:"wizard-systemconfiguration-packages",title:"Additional packages",name:"packages",substepOf:"System configuration",nextStep:"image-name",buttons:Ze,fields:[{component:c.Z.PLAIN_TEXT,name:"packages-text-component",label:s().createElement(b.Text,null,"Images built with Image Builder include all required packages.",s().createElement("br",null),'You can add additional packages to your image by searching "Available packages" and adding them to the "Chosen packages" list.')},{component:"package-selector",name:"selected-packages",label:"Available options"}]};var Qe=function(){return s().createElement(b.Popover,{hasAutoWidth:!0,maxWidth:"35rem",bodyContent:s().createElement(b.TextContent,null,s().createElement(b.Text,null,"Activation keys enable you to register a system with appropriate subscriptions, system purpose, and repositories attached.",s().createElement("br",null),s().createElement("br",null),"If using an activation key with command line registration, you must provide your organization's ID."))},s().createElement(b.Button,{variant:"plain","aria-label":"Activation key popover","aria-describedby":"subscription-activation-key",className:"pf-c-form__group-label-help"},s().createElement(R.ZP,null)))};const $e={StepTemplate:Ie,id:"wizard-registration",title:"Registration",name:"registration",nextStep:"File system configuration",buttons:Ze,fields:[{component:c.Z.RADIO,label:"Register images with Red Hat",name:"register-system",initialValue:"register-now-insights",options:[{label:"Register and connect image instances with Red Hat",description:"Includes Subscriptions and Red Hat Insights",value:"register-now-insights","data-testid":"radio-register-now-insights",autoFocus:!0},{label:"Register image instances only",description:"Includes Subscriptions only",value:"register-now",className:"pf-u-mt-sm","data-testid":"radio-register-now"},{label:"Register later",value:"register-later",className:"pf-u-mt-sm","data-testid":"radio-register-later"}]},{component:"activation-keys",name:"subscription-activation-key",required:!0,label:s().createElement(s().Fragment,null,"Activation key to use for this image",s().createElement(Qe,null)),condition:{or:[{when:"register-system",is:"register-now-insights"},{when:"register-system",is:"register-now"}]},isRequired:!0,validate:[{type:Le.Z.REQUIRED}]},{component:c.Z.PLAIN_TEXT,name:"subscription-activation-description",label:s().createElement(s().Fragment,null,"Create and manage activation keys in the",s().createElement(b.Button,{component:"a",target:"_blank",variant:"link",icon:s().createElement(_.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/"},"Customer Portal")),condition:{or:[{when:"register-system",is:"register-now-insights"},{when:"register-system",is:"register-now"}]}},{component:c.Z.PLAIN_TEXT,name:"subscription-register-later",label:s().createElement(b.TextContent,null,s().createElement(b.Text,{component:b.TextVariants.h3},"Register Later"),s().createElement(b.Text,null,"On initial boot, systems will need to be registered manually before having access to updates or Red Hat services."),s().createElement(b.Text,null,"Registering now is recommended.")),condition:{or:[{when:"register-system",is:"register-later"}]}},{component:"activation-key-information",name:"subscription-activation-key-information",label:"Selected activation key",valueReference:"subscription-activation-key"}]},Je={StepTemplate:Ie,id:"wizard-review",name:"review",title:"Review",buttons:Ze,fields:[{name:"review",component:"review"}]};var et=n(77310);const tt={StepTemplate:Ie,id:"wizard-imageoutput",title:"Image output",name:"image-output",nextStep:function(e){var t=e.values;return Se(t)},buttons:Ze,fields:[{component:c.Z.PLAIN_TEXT,name:"image-output-plain-text",label:s().createElement(b.Text,null,"Image builder allows you to create a custom image and push it to target environments.",s().createElement("br",null),s().createElement(et.Z,null))},{component:"image-output-release-select",label:"Release",name:"release",initialValue:U.PV,isRequired:!0,validate:[{type:Le.Z.REQUIRED}]},{component:"centos-acknowledgement",name:"centos-acknowledgement",condition:{when:"release",pattern:/centos-*/,then:{set:{"register-system":null}},else:{visible:!1}}},{component:"output",name:"target-environment",label:"Select target environments",isRequired:!0,validate:[{type:Le.Z.REQUIRED},{type:"targetEnvironmentValidator"}]}]};var nt=function(e){var t,n,r=e.handleNext,o=e.handlePrev,i=e.nextStep,c=(0,l.useContext)(Oe.default),u=c.currentStep,m=c.formOptions,d=(0,N.XQ)(),p=d.change,f=d.getState,v=(0,l.useState)(!(null===(t=f())||void 0===t||null===(n=t.errors)||void 0===n||!n["file-system-configuration"])),g=(0,a.Z)(v,2),h=g[0],y=g[1],E=(0,l.useState)(!1),w=(0,a.Z)(E,2),x=w[0],T=w[1];return(0,l.useEffect)((function(){var e,t,n=null===(e=f())||void 0===e||null===(t=e.errors)||void 0===t?void 0:t["file-system-configuration"];y(!!n),n||(T(!1),p("file-system-config-show-errors",!1))})),s().createElement(s().Fragment,null,s().createElement(b.Button,{id:"".concat(u.id,"-next-button"),variant:"primary",type:"button",isDisabled:h&&x,onClick:function(){h||r(i),T(!0),p("file-system-config-show-errors",!0)}},"Next"),s().createElement(b.Button,{id:"".concat(u.id,"-previous-button"),variant:"secondary",type:"button",onClick:o},"Back"),s().createElement("div",{className:"pf-c-wizard__footer-cancel"},s().createElement(b.Button,{id:"".concat(u.id,"-cancel-button"),type:"button",variant:"link",onClick:m.onCancel},"Cancel")))};nt.propTypes={handleNext:w().func,handlePrev:w().func,nextStep:w().string};const rt={StepTemplate:Ie,id:"wizard-systemconfiguration-filesystem",title:"File system configuration",name:"File system configuration",buttons:nt,substepOf:"System configuration",nextStep:"packages",fields:[{component:c.Z.PLAIN_TEXT,name:"file-system-configuration-text-component",label:s().createElement(s().Fragment,null,s().createElement(b.Text,null,"Red Hat recommends using automatic partitioning for most installations."),s().createElement(b.Text,null,"Alternatively, you may manually configure the file system of your image by adding, removing, and editing partitions."))},{component:"file-system-config-toggle",name:"file-system-config-toggle",label:"File system configurations toggle"},{component:"file-system-configuration",name:"file-system-configuration",label:"File system configurations",validate:[{type:"fileSystemConfigurationValidator"},{type:Le.Z.REQUIRED}],condition:{when:"file-system-config-toggle",is:"manual"}}]},ot={StepTemplate:Ie,id:"wizard-details",name:"image-name",title:"Name image",nextStep:"review",buttons:Ze,fields:[{component:c.Z.PLAIN_TEXT,name:"plain-text-component",label:s().createElement("p",null,"Optionally enter a name for your image. All images will have a UUID.")},{component:c.Z.TEXT_FIELD,name:"image-name",type:"text",label:"Image name",autoFocus:!0,validate:[{type:Le.Z.MAX_LENGTH,threshold:100}]}]};function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const it=function(){return function(e){if(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value.mountpoint;o in n?n[o]++:n[o]=1}}catch(e){r.e(e)}finally{r.f()}for(var i=[],l=0,s=Object.entries(n);l<s.length;l++){var c=(0,a.Z)(s[l],2),u=c[0];c[1]>1&&i.push(u)}var m=n["/"]>=1;return 0===i.length&&m?void 0:{duplicates:i===[]?void 0:i,root:m}}}},lt=function(){return function(e){if(e)return Object.values(e).reduce((function(e,t){return t||e}),!1)?void 0:"Please select an image"}};var st=n(89136),ct=n(55808);function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(){dt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o=t&&t.prototype instanceof d?t:d,a=Object.create(o.prototype),i=new L(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var l=w(i,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var m={};function d(){}function p(){}function f(){}var v={};s(v,a,(function(){return this}));var g=Object.getPrototypeOf,h=g&&g(g(S([])));h&&h!==t&&n.call(h,a)&&(v=h);var y=f.prototype=d.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(a,i,l,s){var c=u(e[a],e,i);if("throw"!==c.type){var m=c.arg,d=m.value;return d&&"object"==(0,r.Z)(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,l,s)}),(function(e){o("throw",e,l,s)})):t.resolve(d).then((function(e){m.value=e,l(m)}),(function(e){return o("throw",e,l,s)}))}s(c.arg)}var a;this._invoke=function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return a=a?a.then(r,r):r()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return m;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=f,s(y,"constructor",f),s(f,"constructor",p),p.displayName=s(f,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new E(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(y),s(y,l,"Generator"),s(y,a,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},e}function pt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vt=function(e){var t,n;return e%U.at==0?(t=e/U.at,n=U.at):e%U.g7==0?(t=e/U.g7,n=U.g7):e%U.fI==0&&(t=e/U.fI,n=U.fI),[t,n]},gt=function(){var e=(0,i.Z)(dt().mark((function e(t,n,r){var o,a,i,l,s,c,u,m,d,p,f,v;return dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(insights.chrome.isProd()||!insights.chrome.isBeta()){e.next=8;break}return i=[t,r],e.next=4,L.Z.getPackagesContentSources.apply(L.Z,i);case 4:l=e.sent,a=l.find((function(e){return r===e.name})),e.next=24;break;case 8:return c=[t,n,r],e.next=11,L.Z.getPackages.apply(L.Z,c);case 11:if(u=e.sent,m=u.data,d=u.meta,(null===(s=m[0])||void 0===s?void 0:s.name)!==r){e.next=18;break}a=m[0],e.next=24;break;case 18:if((null===(p=m)||void 0===p?void 0:p.length)===d.count){e.next=23;break}return e.next=21,L.Z.getPackages.apply(L.Z,c.concat([d.count]));case 21:f=e.sent,m=f.data;case 23:a=m.find((function(e){return r===e.name}));case 24:return v=null===(o=a)||void 0===o?void 0:o.summary,e.abrupt("return",v||"");case 26:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();const ht=function(){var e,t,n=(0,m.I0)(),r=(0,d.useNavigate)(),o=(0,d.useLocation)(),l=null==o||null===(e=o.state)||void 0===e?void 0:e.composeRequest,p=function(e){if(e){var t,n,r,o,l,s,c=e.image_requests[0],u=c.upload_request,m={};if(m["image-name"]=e.image_name,m.release=null==e?void 0:e.distribution,m["target-environment"]={aws:!1,azure:!1,gcp:!1,"guest-image":!1},l="aws.s3"===u.type?c.image_type:u.type,m["target-environment"][l]=!0,"aws"===l)m["aws-account-id"]=null==u||null===(s=u.options)||void 0===s?void 0:s.share_with_accounts[0];else if("azure"===l){var d,p,f;m["azure-tenant-id"]=null==u||null===(d=u.options)||void 0===d?void 0:d.tenant_id,m["azure-subscription-id"]=null==u||null===(p=u.options)||void 0===p?void 0:p.subscription_id,m["azure-resource-group"]=null==u||null===(f=u.options)||void 0===f?void 0:f.resource_group}else if("gcp"===l){var v,g=(null==u||null===(v=u.options)||void 0===v?void 0:v.share_with_accounts[0]).split(":"),h=(0,a.Z)(g,2),y=h[0],b=h[1];switch(y){case"user":m["google-account-type"]="googleAccount",m["google-email"]=b;break;case"serviceAccount":m["google-account-type"]="serviceAccount",m["google-email"]=b;break;case"group":m["google-account-type"]="googleGroup",m["google-email"]=b;break;case"domain":m["google-account-type"]="domain",m["google-domain"]=b}}var E=[];null==e||null===(t=e.customizations)||void 0===t||null===(n=t.packages)||void 0===n||n.forEach(function(){var t=(0,i.Z)(dt().mark((function t(n){var r,o;return dt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gt(null==e?void 0:e.distribution,null==c?void 0:c.architecture,n);case 2:r=t.sent,o={name:n,summary:r},E.push(o);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m["selected-packages"]=E;var w=null==e||null===(r=e.customizations)||void 0===r?void 0:r.filesystem;if(w){m["file-system-config-toggle"]="manual";var x,T=[],L=pt(w);try{for(L.s();!(x=L.n()).done;){var S=x.value,k=vt(S.min_size),I=(0,a.Z)(k,2),O=I[0],_=I[1];T.push({mountpoint:S.mountpoint,size:O,unit:_})}}catch(e){L.e(e)}finally{L.f()}m["file-system-configuration"]=T}var Z=null==e||null===(o=e.customizations)||void 0===o?void 0:o.subscription;return Z?(Z.insights?m["register-system"]="register-now-insights":m["register-system"]="register-now",m["subscription-activation-key"]=Z["activation-key"],m["subscription-organization-id"]=Z.organization,insights.chrome.isProd()?(m["subscription-server-url"]="subscription.rhsm.redhat.com",m["subscription-base-url"]="https://cdn.redhat.com/"):(m["subscription-server-url"]="subscription.rhsm.stage.redhat.com",m["subscription-base-url"]="https://cdn.stage.redhat.com/")):m["register-system"]="register-later",m}}(l),f=function(e){if(e){var t=e.image_requests[0].upload_request,n=["image-output"];return"aws"===t.type?n.push("aws-target-env"):"azure"===t.type?n.push("azure-target-env"):"gcp"===t.type&&n.push("google-cloud-target-env"),te(null==e?void 0:e.distribution)&&n.push("registration"),n.concat(["File system configuration","packages","image-name"])}return[]}(l),v=function(){return r((0,ct.y)(""))};return s().createElement(Ue,{onClose:v,onSubmit:function(e){var t=e.values,o=e.setIsSaving;o((function(){return!0}));var a=function(e){var t,n,r,o,a,i,l,s={packages:null===(t=e["selected-packages"])||void 0===t?void 0:t.map((function(e){return e.name}))};if("register-now-insights"===e["register-system"]?s.subscription={"activation-key":e["subscription-activation-key"],insights:!0,organization:Number(e["subscription-organization-id"]),"server-url":e["subscription-server-url"],"base-url":e["subscription-base-url"]}:"register-now"===e["register-system"]&&(s.subscription={"activation-key":e["subscription-activation-key"],insights:!1,organization:Number(e["subscription-organization-id"]),"server-url":e["subscription-server-url"],"base-url":e["subscription-base-url"]}),"manual"===e["file-system-config-toggle"]){s.filesystem=[];var c,u=pt(e["file-system-configuration"]);try{for(u.s();!(c=u.n()).done;){var m=c.value;s.filesystem.push({mountpoint:m.mountpoint,min_size:m.size*m.unit})}}catch(e){u.e(e)}finally{u.f()}}var d=[];if(null!==(n=e["target-environment"])&&void 0!==n&&n.aws){var p={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_requests:[{architecture:"x86_64",image_type:"aws",upload_request:{type:"aws",options:{share_with_accounts:[e["aws-account-id"]]}}}],customizations:s};d.push(p)}if(null!==(r=e["target-environment"])&&void 0!==r&&r.gcp){var f="";switch(e["google-account-type"]){case"googleAccount":f="user:".concat(e["google-email"]);break;case"serviceAccount":f="serviceAccount:".concat(e["google-email"]);break;case"googleGroup":f="group:".concat(e["google-email"]);break;case"domain":f="domain:".concat(e["google-domain"])}var v={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_requests:[{architecture:"x86_64",image_type:"gcp",upload_request:{type:"gcp",options:{share_with_accounts:[f]}}}],customizations:s};d.push(v)}if(null!==(o=e["target-environment"])&&void 0!==o&&o.azure){var g={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_requests:[{architecture:"x86_64",image_type:"azure",upload_request:{type:"azure",options:{tenant_id:e["azure-tenant-id"],subscription_id:e["azure-subscription-id"],resource_group:e["azure-resource-group"]}}}],customizations:s};d.push(g)}if(null!==(a=e["target-environment"])&&void 0!==a&&a.vsphere){var h={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_requests:[{architecture:"x86_64",image_type:"vsphere",upload_request:{type:"aws.s3",options:{}}}],customizations:s};d.push(h)}if(null!==(i=e["target-environment"])&&void 0!==i&&i["guest-image"]){var y={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_requests:[{architecture:"x86_64",image_type:"guest-image",upload_request:{type:"aws.s3",options:{}}}],customizations:s};d.push(y)}if(null!==(l=e["target-environment"])&&void 0!==l&&l["image-installer"]){var b={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_requests:[{architecture:"x86_64",image_type:"image-installer",upload_request:{type:"aws.s3",options:{}}}],customizations:s};d.push(b)}return d}(t);Promise.all(a.map((function(e){return L.Z.composeImage(e).then((function(t){n((0,st.tE)({compose:mt(mt({},t),{},{request:e,image_status:{status:"pending"}}),insert:!0}))}))}))).then((function(){r((0,ct.y)("")),n((0,u.wN)({variant:"success",title:"Your image is being created"})),o(!1)})).catch((function(e){n((0,u.wN)({variant:"danger",title:"Your image could not be created",description:"Status code "+e.response.status+": "+e.response.statusText})),o(!1)}))},defaultArch:"x86_64",customValidatorMapper:{fileSystemConfigurationValidator:it,targetEnvironmentValidator:lt},schema:{fields:[{component:c.Z.WIZARD,name:"image-builder-wizard",className:"image_builder",isDynamic:!0,inModal:!0,onKeyDown:function(e){!function(e,t){"Escape"===e.key&&t()}(e,v)},buttonLabels:{submit:"Create image"},showTitles:!0,title:"Create image",crossroads:["target-environment","release"],description:s().createElement(s().Fragment,null,"Image builder allows you to create a custom image and push it to target environments. ",s().createElement(et.Z,null)),fields:[tt,Xe,Ce,Ye,$e,Ke,rt,ot,Je],initialState:{activeStep:(null==o||null===(t=o.state)||void 0===t?void 0:t.initialStep)||"image-output",activeStepIndex:f.length,maxStepIndex:f.length,prevSteps:f}}]},initialValues:p})}},77310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(75418),o=n.n(r),a=n(75857),i=n(50470);const l=function(){return o().createElement(a.Button,{component:"a",target:"_blank",variant:"link",icon:o().createElement(i.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/creating_customized_rhel_images_using_the_image_builder_service/index"},"Documentation")}},97890:()=>{},44370:()=>{},17657:()=>{},22972:()=>{}}]);
//# sourceMappingURL=../sourcemaps/213.3d8893800c37ce8997a6a6d5e415c55b.js.map