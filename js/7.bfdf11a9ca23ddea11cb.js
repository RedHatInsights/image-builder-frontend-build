(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{631:function(e,t,a){(t=a(6)(!1)).push([e.i,".tiles{display:flex}.tile{flex:1 0 0px}.pf-c-tile:focus{--pf-c-tile__title--Color: var(--pf-c-tile__title--Color);--pf-c-tile__icon--Color: var(---pf-global--Color--100);--pf-c-tile--before--BorderWidth: var(--pf-global--BorderWidth--sm);--pf-c-tile--before--BorderColor: var(--pf-global--BorderColor--100)}.pf-c-tile.pf-m-selected:focus{--pf-c-tile__title--Color: var(--pf-c-tile--focus__title--Color);--pf-c-tile__icon--Color: var(--pf-c-tile--focus__icon--Color);--pf-c-tile--before--BorderWidth: var(--pf-c-tile--focus--before--BorderWidth);--pf-c-tile--before--BorderColor: var(--pf-c-tile--focus--before--BorderColor)}.provider-icon{width:1em;height:1em}\n",""]),e.exports=t},632:function(e,t,a){(t=a(6)(!1)).push([e.i,".error{color:var(--pf-global--danger-color--100)}.pf-c-content h3{margin-top:var(--pf-global--spacer--xl)}@media screen and (min-width: 576px){.pf-c-content dl{grid-template:1fr / 25% 1fr;grid-gap:var(--pf-global--spacer--sm)}}#destination-header{font-size:18px;margin-bottom:var(--pf-global--spacer--sm)}\n",""]),e.exports=t},633:function(e,t,a){(t=a(6)(!1)).push([e.i,".pf-c-wizard__nav-list{padding-right:0px}\n",""]),e.exports=t},647:function(e,t,a){var o=a(631);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},s=a(7)(o,n);o.locals&&(e.exports=o.locals),e.hot.accept(631,(function(){var t=a(631);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)})),e.hot.dispose((function(){s()}))},648:function(e,t,a){var o=a(632);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},s=a(7)(o,n);o.locals&&(e.exports=o.locals),e.hot.accept(632,(function(){var t=a(632);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)})),e.hot.dispose((function(){s()}))},649:function(e,t,a){var o=a(633);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0},s=a(7)(o,n);o.locals&&(e.exports=o.locals),e.hot.accept(633,(function(){var t=a(633);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");s(t)})),e.hot.dispose((function(){s()}))},650:function(e,t,a){"use strict";a.r(t);var o=a(642),n=a.n(o),s=a(646),i=a.n(s),r=a(81),l=a.n(r),c=a(134),u=a.n(c),p=a(192),d=a.n(p),g=a(193),m=a.n(g),h=a(455),b=a.n(h),v=a(194),f=a.n(v),E=a(143),y=a.n(E),S=a(195),w=a.n(S),k=a(22),C=a.n(k),A=a(1),_=a.n(A),G=a(127),N=a(176),O=a(636),T=a(388),D=a(424),R=a(381),P=a(353),x=a(382),z=a(377),W=a(383),j=a(391),U=(a(647),function(e){return _.a.createElement(_.a.Fragment,null,_.a.createElement(R.a,null,_.a.createElement(P.a,{headingLevel:"h2",size:"xl"},"Image output"),_.a.createElement(x.a,{isRequired:!0,label:"Release",fieldId:"release-select"},_.a.createElement(z.a,{value:e.value,onChange:function(t){return e.setRelease(t)},isRequired:!0,"aria-label":"Select release input",id:"release-select","data-testid":"release-select"},[{value:"rhel-8",label:"Red Hat Enterprise Linux (RHEL) 8.3"},{value:"centos-8",label:"CentOS Stream 8"}].map((function(e){return _.a.createElement(W.a,{key:e.value,value:e.value,label:e.label})})))),_.a.createElement(x.a,{isRequired:!0,label:"Select target environment","data-testid":"target-select"},_.a.createElement("div",{className:"tiles"},_.a.createElement(j.a,{className:"tile pf-u-mr-sm","data-testid":"upload-aws",title:"Amazon Web Services",icon:_.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/aws.svg"}),onClick:function(){return e.toggleUploadDestination("aws")},isSelected:e.uploadDestinations.aws,isStacked:!0,isDisplayLarge:!0}),_.a.createElement(j.a,{className:"tile pf-u-mr-sm","data-testid":"upload-azure",title:"Microsoft Azure",icon:_.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg"}),onClick:function(){return e.toggleUploadDestination("azure")},isSelected:e.uploadDestinations.azure,isStacked:!0,isDisplayLarge:!0,isDisabled:!0}),_.a.createElement(j.a,{className:"tile","data-testid":"upload-google",title:"Google Cloud Platform",icon:_.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"}),onClick:function(){return e.toggleUploadDestination("google")},isSelected:e.uploadDestinations.google,isStacked:!0,isDisplayLarge:!0})))))});U.propTypes={toggleUploadAWS:C.a.func,uploadDestinations:C.a.object,setRelease:C.a.func,value:C.a.string,toggleUploadDestination:C.a.func};var I=U,q=a(149),F=function(e){return _.a.createElement(R.a,null,_.a.createElement(P.a,{headingLevel:"h2",size:"xl"},"Target Environment - Upload to AWS"),_.a.createElement("p",null,"Your image will be uploaded to a temporary account on Amazon Web Services. ",_.a.createElement("br",null),"The image will be shared with the account you provide below. ",_.a.createElement("br",null),"Within the next 14 days you will need to copy the shared image to your own account. After 14 days it will be unavailable and will have to be regenerated."),_.a.createElement(x.a,{isRequired:!0,label:"AWS account ID",fieldId:"aws-account-id",helperTextInvalid:e.errors["aws-account-id"]&&e.errors["aws-account-id"].value||"",validated:e.errors["aws-account-id"]?"error":"default"},_.a.createElement(q.a,{value:e.uploadAWS.options.share_with_accounts||"",type:"text","aria-label":"AWS account ID",id:"aws-account-id","data-testid":"aws-account-id",isRequired:!0,onChange:function(t){return e.setUploadOptions("aws",Object.assign(e.uploadAWS.options,{share_with_accounts:[t]}))}})))};F.propTypes={setUploadOptions:C.a.func,uploadAWS:C.a.object,errors:C.a.object};var L=F,B=a(56),H=a(386),M=a(419),J=function(e){var t=[_.a.createElement(B.a,{"aria-label":"Search button for available packages",key:"availableSearchButton",onClick:e.handlePackagesSearch},"Search")];return _.a.createElement(_.a.Fragment,null,_.a.createElement(T.a,null,_.a.createElement(P.a,{headingLevel:"h2",size:"xl"},"Additional packages"),_.a.createElement(H.a,null,"Optionally add additional packages to your ",_.a.createElement("strong",null,e.release)," image")),_.a.createElement(M.a,{className:"pf-u-mt-sm",isSearchable:!0,availableOptionsActions:t,availableOptions:e.packagesAvailableComponents,chosenOptions:e.packagesFilteredComponents,addSelected:e.packageListChange,removeSelected:e.packageListChange,addAll:e.packageListChange,removeAll:e.packageListChange,onAvailableOptionsSearchInputChanged:e.setPackagesSearchName,onChosenOptionsSearchInputChanged:e.handlePackagesFilter,filterOption:function(){return!0},id:"basicSelectorWithSearch"}))};J.propTypes={packageListChange:C.a.func,release:C.a.string,packagesAvailableComponents:C.a.arrayOf(C.a.object),packagesFilteredComponents:C.a.arrayOf(C.a.object),handlePackagesSearch:C.a.func,handlePackagesFilter:C.a.func,setPackagesSearchName:C.a.func};var Y=J,V=a(184),K=a(389),Q=a(390),X=a(387),Z=a(181),$=function(e){var t=_.a.createElement(V.a,{hasAutoWidth:!0,maxWidth:"35rem",headerContent:"Valid account types",bodyContent:_.a.createElement(T.a,null,_.a.createElement(H.a,null,"The following account types can have an image shared with them:"),_.a.createElement(K.a,null,_.a.createElement(Q.a,null,_.a.createElement("strong",null,"Google account:")," A Google account represents a developer, an administrator, or any other person who interacts with Google Cloud. e.g., ",_.a.createElement("em",null,"`alice@gmail.com`"),"."),_.a.createElement(Q.a,null,_.a.createElement("strong",null,"Service account:")," A service account is an account for an application instead of an individual end user. e.g., ",_.a.createElement("em",null,"`myapp@appspot.gserviceaccount.com`"),"."),_.a.createElement(Q.a,null,_.a.createElement("strong",null,"Google group:")," A Google group is a named collection of Google accounts and and service accounts. e.g., ",_.a.createElement("em",null,"`admins@example.com`"),"."),_.a.createElement(Q.a,null,_.a.createElement("strong",null,"Google workspace domain/Cloud identity domain:")," A Google workspace or cloud identity domain represents a virtual group of all the Google accounts in an organization. These domains represent your organization's internet domain name. e.g., ",_.a.createElement("em",null,"`mycompany.com`"),".")))},_.a.createElement("button",{type:"button","aria-label":"Account info","aria-describedby":"google-account-type",className:"pf-c-form__group-label-help"},_.a.createElement(Z.a,null)));return _.a.createElement(R.a,null,_.a.createElement(P.a,{headingLevel:"h2",size:"xl"},"Target Environment - Google Cloud Platform"),_.a.createElement("p",null,"Your image will be uploaded to an account on Google Cloud Platform. ",_.a.createElement("br",null),"The image will be shared with the email you provide below. ",_.a.createElement("br",null),"Within the next 14 days you will need to copy the shared image to your own account. After 14 days it will be unavailable and will have to be regenerated."),_.a.createElement(x.a,{isRequired:!0,label:"Type",labelIcon:t,fieldId:"google-account-type"},_.a.createElement(X.a,{onChange:e.setGoogleAccountType,isChecked:"googleAccount"===e.uploadGoogle.accountType,label:"Google account",id:"radio-google-account","test-id":!0,value:"googleAccount"}),_.a.createElement(X.a,{onChange:e.setGoogleAccountType,isChecked:"serviceAccount"===e.uploadGoogle.accountType,label:"Service account",id:"radio-service-account",value:"serviceAccount"}),_.a.createElement(X.a,{onChange:e.setGoogleAccountType,isChecked:"googleGroup"===e.uploadGoogle.accountType,label:"Google group",id:"radio-google-group",value:"googleGroup"}),_.a.createElement(X.a,{onChange:e.setGoogleAccountType,isChecked:"domain"===e.uploadGoogle.accountType,label:"Google Workspace Domain or Cloud Identity Domain",id:"radio-domain",value:"domain"})),"googleAccount"===e.uploadGoogle.accountType&&_.a.createElement(x.a,{isRequired:!0,label:"Email address",fieldId:"user"},_.a.createElement(q.a,{value:e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].user||"",type:"text","aria-label":"Google email address",id:"input-google-user","data-testid":"input-google-user",isRequired:!0,onChange:function(t){return e.setUploadOptions("google",Object.assign(e.uploadGoogle.options,{share_with_accounts:[{user:t}]}))}})),"serviceAccount"===e.uploadGoogle.accountType&&_.a.createElement(x.a,{isRequired:!0,label:"Email address",fieldId:"service-account"},_.a.createElement(q.a,{value:e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].serviceAccount||"",type:"text","aria-label":"Google email address",id:"input-google-service-account","data-testid":"input-google-service-account",isRequired:!0,onChange:function(t){return e.setUploadOptions("google",Object.assign(e.uploadGoogle.options,{share_with_accounts:[{serviceAccount:t}]}))}})),"googleGroup"===e.uploadGoogle.accountType&&_.a.createElement(x.a,{isRequired:!0,label:"Email address",fieldId:"group"},_.a.createElement(q.a,{value:e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].group||"",type:"text","aria-label":"Google email address",id:"input-google-group","data-testid":"input-google-group",isRequired:!0,onChange:function(t){return e.setUploadOptions("google",Object.assign(e.uploadGoogle.options,{share_with_accounts:[{group:t}]}))}})),"domain"===e.uploadGoogle.accountType&&_.a.createElement(x.a,{isRequired:!0,label:"Domain",fieldId:"domain"},_.a.createElement(q.a,{value:e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].domain||"",type:"text","aria-label":"Google domain",id:"input-google-domain","data-testid":"input-google-domain",isRequired:!0,onChange:function(t){return e.setUploadOptions("google",Object.assign(e.uploadGoogle.options,{share_with_accounts:[{domain:t}]}))}})))};$.propTypes={setUploadOptions:C.a.func,setGoogleAccountType:C.a.func,uploadGoogle:C.a.object,errors:C.a.object};var ee=$,te=function(e){return _.a.createElement(R.a,null,_.a.createElement(P.a,{headingLevel:"h2",size:"xl"},"Registration"),_.a.createElement(x.a,{isRequired:!0,label:"Register the system"},_.a.createElement(X.a,{name:"subscribe-now-radio",isChecked:e.subscribeNow,id:"subscribe-now-radio",label:"Embed an activation key and register systems on first boot",onChange:function(){return e.setSubscribeNow(!0)},"data-testid":"register-now-radio-button"}),_.a.createElement(X.a,{name:"subscribe-later-radio",isChecked:!e.subscribeNow,label:"Register the system later",id:"subscribe-later-radio",onChange:function(){return e.setSubscribeNow(!1)},"data-testid":"register-later-radio-button"})),e.subscribeNow&&_.a.createElement(_.a.Fragment,null,_.a.createElement(x.a,{label:"Organization ID",fieldId:"subscription-organization"},_.a.createElement(q.a,{isDisabled:!0,value:e.subscription.organization||"",type:"text",id:"subscription-organization","aria-label":"Subscription organization ID","data-testid":"organization-id"})),_.a.createElement(x.a,{isRequired:!0,label:"Activation key",fieldId:"subscription-activation",helperTextInvalid:e.errors["subscription-activation"]&&e.errors["subscription-activation"].value||"",validated:e.errors["subscription-activation"]?"error":"default"},_.a.createElement(q.a,{value:e.subscription["activation-key"]||"",type:"password","data-testid":"subscription-activation",isRequired:!0,id:"subscription-activation","aria-label":"Subscription activation key",onChange:function(t){return e.setSubscription(Object.assign(e.subscription,{"activation-key":t}))}}))))};te.propTypes={setSubscription:C.a.func,setSubscribeNow:C.a.func,subscription:C.a.object,subscribeNow:C.a.bool,errors:C.a.object};var ae=te,oe=a(423),ne=a(116),se=(a(648),function(e){var t=_.a.createElement(_.a.Fragment,null,_.a.createElement(H.a,{id:"destination-header"},"Amazon Web Services"),_.a.createElement(K.a,{component:K.b.dl,"data-testid":"review-image-upload-aws"},_.a.createElement(Q.a,{component:Q.b.dt},"Account ID"),e.uploadAWSErrors["aws-account-id"]?_.a.createElement(Q.a,{component:Q.b.dd},_.a.createElement(ne.a,{className:"error"})," ",e.uploadAWSErrors["aws-account-id"].value):_.a.createElement(Q.a,{component:Q.b.dd},e.uploadAWS.options.share_with_accounts[0]))),a=_.a.createElement(_.a.Fragment,null,_.a.createElement(H.a,{id:"destination-header"},"Google Cloud Platform"),_.a.createElement(K.a,{component:K.b.dl,"data-testid":"review-image-upload-google"},"googleAccount"===e.uploadGoogle.accountType&&_.a.createElement(_.a.Fragment,null,_.a.createElement(Q.a,{component:Q.b.dt},"Google account"),_.a.createElement(Q.a,{component:Q.b.dd},e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].user||"")),"serviceAccount"===e.uploadGoogle.accountType&&_.a.createElement(_.a.Fragment,null,_.a.createElement(Q.a,{component:Q.b.dt},"Service account"),_.a.createElement(Q.a,{component:Q.b.dd},e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].serviceAccount||"")),"googleGroup"===e.uploadGoogle.accountType&&_.a.createElement(_.a.Fragment,null,_.a.createElement(Q.a,{component:Q.b.dt},"Google group"),_.a.createElement(Q.a,{component:Q.b.dd},e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].group||"")),"domain"===e.uploadGoogle.accountType&&_.a.createElement(_.a.Fragment,null,_.a.createElement(Q.a,{component:Q.b.dt},"Domain"),_.a.createElement(Q.a,{component:Q.b.dd},e.uploadGoogle.options.share_with_accounts[0]&&e.uploadGoogle.options.share_with_accounts[0].domain||"")))),o=_.a.createElement(Q.a,{component:Q.b.dd},"Register the system later");return e.subscribeNow&&(o=_.a.createElement(_.a.Fragment,null,_.a.createElement(Q.a,{component:Q.b.dd},"Register the system on first boot"),_.a.createElement(Q.a,{component:Q.b.dt},"Activation key"),e.subscriptionErrors["subscription-activation"]?_.a.createElement(Q.a,{component:Q.b.dd},_.a.createElement(ne.a,{className:"error"})," ",e.subscriptionErrors["subscription-activation"].value):_.a.createElement(Q.a,{component:Q.b.dd,type:"password"},"*".repeat(e.subscription["activation-key"].length)))),_.a.createElement(_.a.Fragment,null,(Object.keys(e.uploadAWSErrors).length>0||Object.keys(e.subscriptionErrors).length>0)&&_.a.createElement(oe.a,{variant:"danger",className:"pf-u-mb-xl",isInline:!0,title:"Required information is missing"}),_.a.createElement(P.a,{headingLevel:"h2",size:"xl"},"Review"),_.a.createElement(T.a,null,_.a.createElement(H.a,{component:H.b.small},"Review the information and click Create image to create the image using the following criteria."),_.a.createElement(H.a,{component:H.b.h3},"Image output"),_.a.createElement(K.a,{component:K.b.dl,"data-testid":"review-image-output"},_.a.createElement(Q.a,{component:Q.b.dt},"Release"),_.a.createElement(Q.a,{component:Q.b.dd},{"rhel-8":"Red Hat Enterprise Linux (RHEL) 8.3","centos-8":"CentOS Stream 8"}[e.release])),_.a.createElement(H.a,{component:H.b.h3},"Target environment"),e.uploadDestinations.aws&&t,e.uploadDestinations.google&&a,_.a.createElement(H.a,{component:H.b.h3},"Registration"),_.a.createElement(K.a,{component:K.b.dl,"data-testid":"review-image-registration"},_.a.createElement(Q.a,{component:Q.b.dt},"Subscription"),o)))});se.propTypes={release:C.a.string,uploadAWS:C.a.object,uploadGoogle:C.a.object,uploadDestinations:C.a.object,subscription:C.a.object,subscribeNow:C.a.bool,uploadAWSErrors:C.a.object,subscriptionErrors:C.a.object};var ie=se,re=a(366);a(649);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){i()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ue(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var pe=function(e){w()(s,e);var t,a,o=(t=s,function(){var e,a=y()(t);if(ue()){var o=y()(this).constructor;e=Reflect.construct(a,arguments,o)}else e=a.apply(this,arguments);return f()(this,e)});function s(e){var t;return d()(this,s),(t=o.call(this,e)).handlePackagesSearch=t.handlePackagesSearch.bind(b()(t)),t.handlePackagesFilter=t.handlePackagesFilter.bind(b()(t)),t.packageListChange=t.packageListChange.bind(b()(t)),t.mapPackagesToComponent=t.mapPackagesToComponent.bind(b()(t)),t.setRelease=t.setRelease.bind(b()(t)),t.setUploadOptions=t.setUploadOptions.bind(b()(t)),t.setSubscription=t.setSubscription.bind(b()(t)),t.setSubscribeNow=t.setSubscribeNow.bind(b()(t)),t.setPackagesSearchName=t.setPackagesSearchName.bind(b()(t)),t.setGoogleAccountType=t.setGoogleAccountType.bind(b()(t)),t.toggleUploadDestination=t.toggleUploadDestination.bind(b()(t)),t.onStep=t.onStep.bind(b()(t)),t.onSave=t.onSave.bind(b()(t)),t.onClose=t.onClose.bind(b()(t)),t.validate=t.validate.bind(b()(t)),t.validateUploadAmazon=t.validateUploadAmazon.bind(b()(t)),t.validateSubscription=t.validateSubscription.bind(b()(t)),t.state={arch:"x86_64",imageType:"qcow2",release:"rhel-8",uploadAWS:{type:"aws",options:{share_with_accounts:[]}},uploadAzure:{type:"azure",options:{temp:""}},uploadGoogle:{type:"gcp",accountType:"googleAccount",options:{share_with_accounts:[]}},uploadDestinations:{aws:!1,azure:!1,google:!1},subscription:{organization:null,"activation-key":null,"server-url":"subscription.rhsm.redhat.com","base-url":"https://cdn.redhat.com/",insights:!0},subscribeNow:!0,uploadAWSErrors:{},uploadAzureErrors:{},uploadGoogleErrors:{},subscriptionErrors:{},packagesAvailableComponents:[],packagesSelectedComponents:[],packagesFilteredComponents:[],packagesSelectedNames:[],packagesSearchName:""},t}return m()(s,[{key:"componentDidMount",value:(a=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:t=e.sent,this.setState({subscription:{organization:Number(t.identity.internal.org_id)}});case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onStep",value:function(e){"Review"===e.name&&this.validate()}},{key:"validate",value:function(){this.state.uploadDestinations.aws?this.validateUploadAmazon():this.setState({uploadAWSErrors:{},uploadAzureErrors:{},uploadGoogleErrors:{}}),this.state.subscribeNow?this.validateSubscription():this.setState({subscriptionErrors:{}})}},{key:"validateUploadAmazon",value:function(){var e={},t=this.state.uploadAWS.options.share_with_accounts;(0===t.length||12!==t[0].length||isNaN(t[0]))&&(e["aws-account-id"]={label:"AWS account ID",value:"A 12-digit number is required"}),this.setState({uploadAWSErrors:e})}},{key:"validateSubscription",value:function(){var e={};this.state.subscription["activation-key"]||(e["subscription-activation"]={label:"Activation key",value:"A value is required"}),this.setState({subscriptionErrors:e})}},{key:"setRelease",value:function(e){this.setState({release:e})}},{key:"toggleUploadDestination",value:function(e){this.setState((function(t){return ce({},t,{uploadDestinations:ce({},t.uploadDestinations,i()({},e,!t.uploadDestinations[e]))})}))}},{key:"setUploadOptions",value:function(e,t){switch(e){case"aws":this.setState({uploadAWS:{type:e,options:t}});break;case"azure":this.setState({uploadAzure:{type:e,options:t}});break;case"google":this.setState({uploadGoogle:ce({},this.state.uploadGoogle,{options:t})})}}},{key:"setGoogleAccountType",value:function(e,t){this.setState({uploadGoogle:ce({},this.state.uploadGoogle,{accountType:t.target.value})})}},{key:"setSubscribeNow",value:function(e){this.setState({subscribeNow:e})}},{key:"setSubscription",value:function(e){this.setState({subscription:e},this.validate)}},{key:"setPackagesSearchName",value:function(e){this.setState({packagesSearchName:e})}},{key:"mapPackagesToComponent",value:function(e){return e.map((function(e){return _.a.createElement(T.a,{key:e},_.a.createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),_.a.createElement("small",null,e.summary))}))}},{key:"mapComponentToPackageName",value:function(e){return e.props.children[0].props.children}},{key:"handlePackagesSearch",value:function(){var e=this;re.a.getPackages(this.state.release,this.state.arch,this.state.packagesSearchName).then((function(t){var a=e.mapPackagesToComponent(t.data);e.setState({packagesAvailableComponents:a})}))}},{key:"handlePackagesFilter",value:function(e){var t=this,a=this.state.packagesSelectedComponents.filter((function(a){return t.mapComponentToPackageName(a).includes(e)}));this.setState({packagesFilteredComponents:a})}},{key:"packageListChange",value:function(e,t){var a=this,o=t.map((function(e){return a.mapComponentToPackageName(e)}));this.setState({packagesAvailableComponents:e,packagesSelectedComponents:t,packagesFilteredComponents:t,packagesSelectedNames:o})}},{key:"onSave",value:function(){var e=this,t=[];if(this.state.uploadDestinations.aws){var a={distribution:this.state.release,image_requests:[{architecture:this.state.arch,image_type:"ami",upload_requests:[this.state.uploadAWS]}],customizations:{subscription:this.state.subscription,packages:this.state.packagesSelectedNames}};t.push(a)}if(this.state.uploadDestinations.google){var o="";switch(this.state.uploadGoogle.accountType){case"googleAccount":o="user:"+this.state.uploadGoogle.options.share_with_accounts[0].user;break;case"serviceAccount":o="serviceAccount:"+this.state.uploadGoogle.options.share_with_accounts[0].serviceAccount;break;case"googleGroup":o="group:"+this.state.uploadGoogle.options.share_with_accounts[0].group;break;case"domain":o="domain:"+this.state.uploadGoogle.options.share_with_accounts[0].domain}var n={distribution:this.state.release,image_requests:[{architecture:this.state.arch,image_type:"gcp",upload_requests:[{type:"gcp",options:{share_with_accounts:[o]}}]}],customizations:{subscription:this.state.subscription}};t.push(n)}var s=[];t.forEach((function(t){var a=re.a.composeImage(t).then((function(a){var o={};o[a.id]={image_status:{status:"pending"},distribution:t.distribution,architecture:t.image_requests[0].architecture,image_type:t.image_requests[0].image_type},e.props.updateCompose(o)}));s.push(a)})),Promise.all(s).then((function(){return e.props.history.push("/landing")}))}},{key:"onClose",value:function(){this.props.history.push("/landing")}},{key:"render",value:function(){var e={name:"Image output",component:_.a.createElement(I,{value:this.state.release,setRelease:this.setRelease,toggleUploadDestination:this.toggleUploadDestination,uploadDestinations:this.state.uploadDestinations})},t={name:"Amazon Web Services",component:_.a.createElement(L,{uploadAWS:this.state.uploadAWS,setUploadOptions:this.setUploadOptions,errors:this.state.uploadAWSErrors})},a={name:"Google Cloud Platform",component:_.a.createElement(ee,{uploadGoogle:this.state.uploadGoogle,setGoogleAccountType:this.setGoogleAccountType,setUploadOptions:this.setUploadOptions,errors:this.state.uploadGoogleErrors})},o=[];this.state.uploadDestinations.aws&&o.push(t),this.state.uploadDestinations.azure&&o.push({name:"Microsoft Azure"}),this.state.uploadDestinations.google&&o.push(a);var s={name:"Target environment",steps:o},i=[e].concat(n()(s.steps.length>0?[s]:[]),[{name:"Registration",component:_.a.createElement(ae,{subscription:this.state.subscription,subscribeNow:this.state.subscribeNow,setSubscription:this.setSubscription,setSubscribeNow:this.setSubscribeNow,errors:this.state.subscriptionErrors})},{name:"Packages",component:_.a.createElement(Y,{packageListChange:this.packageListChange,release:this.state.release,packagesAvailableComponents:this.state.packagesAvailableComponents,packagesFilteredComponents:this.state.packagesFilteredComponents,handlePackagesSearch:this.handlePackagesSearch,handlePackagesFilter:this.handlePackagesFilter,setPackagesSearchName:this.setPackagesSearchName})},{name:"Review",component:_.a.createElement(ie,{release:this.state.release,uploadAWS:this.state.uploadAWS,uploadGoogle:this.state.uploadGoogle,uploadDestinations:this.state.uploadDestinations,subscription:this.state.subscription,subscribeNow:this.state.subscribeNow,uploadAWSErrors:this.state.uploadAWSErrors,subscriptionErrors:this.state.subscriptionErrors}),nextButtonText:"Create"}]);return _.a.createElement(_.a.Fragment,null,_.a.createElement(D.a,{title:"Create image",onNext:this.onStep,onGoToStep:this.onStep,steps:i,onClose:this.onClose,onSave:this.onSave,isOpen:!0}))}}]),s}(A.Component);pe.propTypes={updateCompose:C.a.func,history:C.a.object};t.default=Object(N.connect)(null,(function(e){return{updateCompose:function(t){return e(O.a.updateCompose(t))}}}))(Object(G.o)(pe))}}]);
//# sourceMappingURL=7.bfdf11a9ca23ddea11cb.js.map