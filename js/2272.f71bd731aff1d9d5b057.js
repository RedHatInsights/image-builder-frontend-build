(self.webpackChunkimageBuilder=self.webpackChunkimageBuilder||[]).push([[2272,8464],{63652:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>La});var a=n(15861),i=n(29439),r=n(4942),o=n(93433),l=n(64687),s=n.n(l),c=n(32747),u=n.n(c),d=n(96354),m=n(74432),p=n(93654),g=n(87462),v=n(45987),f=n(80124),h=n(67850),b=n(54915),y=n(79442),E=n(1704),x=n(45697),T=n.n(x),w=n(95762),S=n(48880),k=n(46361),I=n(47189),j=n(27730),L=n(2112),P=n(25811),z=n(83215),_=n(70743),C=n(966),A=n(54725),O=["label","isRequired"],Z=function(e){var t=e.handleActivationKeyFn,n=e.isLoading;return u().createElement(E.EmptyState,{variant:"xs"},u().createElement(E.EmptyStateHeader,{titleText:"No activation keys found",headingLevel:"h4",icon:u().createElement(E.EmptyStateIcon,{icon:L.ZP})}),u().createElement(E.EmptyStateBody,null,"Get started by building a default key, which will be generated and present for you."),u().createElement(E.EmptyStateFooter,null,u().createElement(E.EmptyStateActions,null,u().createElement(E.Button,{onClick:t,icon:u().createElement(P.ZP,null),isLoading:n,iconPosition:"left",variant:"link"},"Create activation key"))))};Z.propTypes={handleActivationKeyFn:T().func.isRequired,isLoading:T().bool};var R=function(e){var t,n=e.label,r=e.isRequired,o=(0,v.Z)(e,O),l=(0,A.M)().isProd,d=(0,S.default)(),m=d.change,p=d.getState,g=(0,w.Z)(o).input,f=(0,c.useState)(!1),h=(0,i.Z)(f,2),b=h[0],y=h[1],x=(0,c.useState)(null===(t=p())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["subscription-activation-key"]),T=(0,i.Z)(x,2),L=T[0],P=T[1],R=(0,_.I0)(),N=(0,C.NK)(),D=N.data,F=N.isFetching,V=N.isSuccess,B=N.isError,q=N.refetch,M=(0,C.jE)(),G=(0,i.Z)(M,2),W=G[0],U=G[1].isLoading;(0,c.useEffect)((function(){l()?(m("subscription-server-url","subscription.rhsm.redhat.com"),m("subscription-base-url","https://cdn.redhat.com/")):(m("subscription-server-url","subscription.rhsm.stage.redhat.com"),m("subscription-base-url","https://cdn.stage.redhat.com/"))}),[l,m]);var X=function(){var e=(0,a.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W({body:{name:"activation-key-default",serviceLevel:"Self-Support"}});case 2:t=e.sent,q(),t.error&&R((0,z.wN)({variant:"danger",title:"Error creating activation key",description:null===(n=t.error)||void 0===n||null===(n=n.data)||void 0===n||null===(n=n.error)||void 0===n?void 0:n.message}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=V&&0===D.body.length;return u().createElement(u().Fragment,null,u().createElement(E.FormGroup,{isRequired:r,label:n,"data-testid":"subscription-activation-key"},u().createElement(k.P,{ouiaId:"activation_key_select",variant:I.TM.typeahead,onToggle:function(){b||q(),y(!b)},onSelect:function(e,t){P(t),y(!1),m(g.name,t)},onClear:function(){P(),m(g.name,void 0)},selections:L,isOpen:b,placeholderText:"Select activation key",typeAheadAriaLabel:"Select activation key",isDisabled:!V},H&&u().createElement(Z,{handleActivationKeyFn:X,isLoading:U}),V&&D.body.map((function(e,t){return u().createElement(j.$,{key:t,value:e.name})})),!V&&F&&u().createElement(j.$,{isNoResultsOption:!0,"data-testid":"activation-keys-loading"},u().createElement(E.Spinner,{size:"md"})))),B&&u().createElement(E.Alert,{title:"Activation keys unavailable",variant:"danger",isPlain:!0,isInline:!0},"Activation keys cannot be reached, try again later."))};R.propTypes={label:T().node,isRequired:T().bool},R.defaultProps={label:"",isRequired:!1};const N=R;var D=n(6468),F=n(58061),V=["label","isRequired"],B=function(e){var t=e.label,n=e.isRequired,a=(0,v.Z)(e,V),r=(0,S.default)(),o=r.change,l=r.getState,s=(0,w.Z)(a).input,d=(0,c.useState)(!1),m=(0,i.Z)(d,2),p=m[0],g=m[1],f=function(e,t){o(s.name,t),g(!1)};return u().createElement(D.lP,null,(function(){var e,a;return u().createElement(E.FormGroup,{isRequired:n,label:t},u().createElement(k.P,{ouiaId:"arch_select",variant:I.TM.single,onToggle:function(){return g(!p)},onSelect:f,selections:null===(e=l())||void 0===e||null===(e=e.values)||void 0===e?void 0:e[s.name],isOpen:p},(a=[],F.gw.forEach((function(e){a.push(u().createElement(j.$,{key:e,value:e},e))})),a)))}))};B.propTypes={label:T().node,isRequired:T().bool};const q=B;var M=n(95090),G=n(54362),W=["label","isRequired","className"],U=function(e){var t,n,a,r=e.label,o=e.isRequired,l=e.className,s=(0,v.Z)(e,W),d=(0,S.default)(),m=d.change,p=d.getState,g=(0,w.Z)(s).input,f=(0,c.useState)(!1),h=(0,i.Z)(f,2),b=h[0],y=h[1],x=(0,c.useState)(null===(t=p())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["aws-sources-select"]),T=(0,i.Z)(x,2),L=T[0],P=T[1],z=(0,G.w6)({provider:"aws"}),_=z.data,C=z.isFetching,A=z.isSuccess,O=z.isError,Z=z.refetch,R=(0,M.j)(_),N=(0,G.ag)({id:L},{skip:!L}),F=N.data,V=N.isFetching,B=N.isSuccess,q=N.isError;return(0,c.useEffect)((function(){var e;!V&&B&&m("aws-associated-account-id",null==F||null===(e=F.aws)||void 0===e?void 0:e.account_id)}),[V,B,m,null==F||null===(n=F.aws)||void 0===n?void 0:n.account_id]),u().createElement(u().Fragment,null,u().createElement(D.lP,{subscription:{values:!0},onChange:function(e){var t=e.values;"aws-target-type-source"===t["aws-target-type"]&&void 0!==t[g.name]||(m(g.name,void 0),m("aws-associated-account-id",void 0))}}),u().createElement(E.FormGroup,{isRequired:o,label:r,"data-testid":"sources",className:l},u().createElement(k.P,{ouiaId:"source_select",variant:I.TM.typeahead,onToggle:function(){b||Z(),y(!b)},onSelect:function(e,t){var n=R.find((function(e){return e.name===t})).id;P(n),y(!1),m(g.name,n)},onClear:function(){P(),m(g.name,void 0)},selections:L?null===(a=R.find((function(e){return e.id===L})))||void 0===a?void 0:a.name:void 0,isOpen:b,placeholderText:"Select source",typeAheadAriaLabel:"Select source",isDisabled:!A},A&&R.map((function(e){return u().createElement(j.$,{key:e.id,value:e.name})})),C&&u().createElement(j.$,{isNoResultsOption:!0},u().createElement(E.Spinner,{size:"lg"})))),u().createElement(u().Fragment,null,O&&u().createElement(E.Alert,{variant:"danger",isPlain:!0,isInline:!0,title:"Sources unavailable"},"Sources cannot be reached, try again later or enter an AWS account ID manually."),!O&&q&&u().createElement(E.Alert,{variant:"danger",isPlain:!0,isInline:!0,title:"AWS details unavailable"},"The AWS account ID for the selected source could not be resolved. There might be a problem with the source. Verify that the source is valid in Sources or select a different source.")))};U.propTypes={className:T().string,label:T().node,isRequired:T().bool};const X=function(){var e,t=null===(e=(0,(0,S.default)().getState)())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["azure-tenant-id"],n=new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","i");return u().createElement(E.FormGroup,null,u().createElement(E.Button,{component:"a",target:"_blank",variant:"secondary",isDisabled:!n.test(t),href:"https://login.microsoftonline.com/"+t+"/oauth2/v2.0/authorize?client_id=b94bb246-b02c-4985-9c22-d44e66f657f4&scope=openid&response_type=code&response_mode=query&redirect_uri=https://portal.azure.com"},"Authorize Image Builder"))};var H=n(76429),Q=["label","isRequired","className"],$=function(e){var t,n,a=e.label,r=e.isRequired,o=e.className,l=(0,v.Z)(e,Q),s=(0,S.default)(),d=s.change,m=s.getState,p=(0,w.Z)(l).input,g=(0,c.useState)(!1),f=(0,i.Z)(g,2),h=f[0],b=f[1],y=(0,c.useState)(null===(t=m())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["azure-sources-select"]),x=(0,i.Z)(y,2),T=x[0],L=x[1],P=(0,G.ag)({id:T},{skip:!T}),z=P.data,_=P.isFetching,C=T&&(null==z||null===(n=z.azure)||void 0===n?void 0:n.resource_groups)||[];return u().createElement(E.FormGroup,{isRequired:r,label:a,"data-testid":"azure-resource-groups"},u().createElement(H.Z,{subscription:{values:!0},onChange:function(e){var t=e.values;L(t["azure-sources-select"])}}),u().createElement(k.P,{ouiaId:"resource_group_select",variant:I.TM.typeahead,className:o,onToggle:function(){return b(!h)},onSelect:function(e,t){b(!1),d(p.name,t)},onClear:function(){d(p.name,void 0)},selections:p.value,isOpen:h,placeholderText:"Select resource group",typeAheadAriaLabel:"Select resource group"},_&&u().createElement(j.$,{isNoResultsOption:!0,"data-testid":"azure-resource-groups-loading"},u().createElement(E.Spinner,{size:"lg"})),C.map((function(e,t){return u().createElement(j.$,{key:t,value:e,"aria-label":"Resource group ".concat(e)})}))))};$.propTypes={label:T().node,isRequired:T().bool,className:T().string},$.defaultProps={label:"",isRequired:!1,className:""};const K=$;var Y=["label","isRequired","className"],J=function(e){var t,n,a,r=e.label,o=e.isRequired,l=e.className,s=(0,v.Z)(e,Y),d=(0,S.default)().change,m=(0,w.Z)(s).input,p=(0,c.useState)(!1),g=(0,i.Z)(p,2),f=g[0],h=g[1],b=m.value,y=(0,G.w6)({provider:"azure"}),x=y.data,T=y.isFetching,L=y.isSuccess,P=y.isError,z=y.refetch,_=(0,M.j)(x),C=(0,G.ag)({id:b},{skip:!b}),A=C.data,O=C.isFetching,Z=C.isSuccess,R=C.isError;return(0,c.useEffect)((function(){var e,t;!O&&Z&&(d("azure-tenant-id",null==A||null===(e=A.azure)||void 0===e?void 0:e.tenant_id),d("azure-subscription-id",null==A||null===(t=A.azure)||void 0===t?void 0:t.subscription_id))}),[O,Z,null==A||null===(t=A.azure)||void 0===t?void 0:t.subscription_id,null==A||null===(n=A.azure)||void 0===n?void 0:n.tenant_id,d]),u().createElement(u().Fragment,null,u().createElement(H.Z,{subscription:{values:!0},onChange:function(e){var t=e.values;"azure-type-source"===t["azure-type"]&&void 0!==t[m.name]||(d(m.name,void 0),d("azure-tenant-id",void 0),d("azure-subscription-id",void 0))}}),u().createElement(E.FormGroup,{isRequired:o,label:r,"data-testid":"azure-sources"},u().createElement(k.P,{ouiaId:"source_select",variant:I.TM.typeahead,className:l,onToggle:function(){f||z(),h(!f)},onSelect:function(e,t){var n=_.find((function(e){return e.name===t})).id;d(m.name,n),h(!1)},onClear:function(){d(m.name,void 0)},selections:b?null===(a=_.find((function(e){return e.id===b})))||void 0===a?void 0:a.name:void 0,isOpen:f,placeholderText:"Select source",typeAheadAriaLabel:"Select source",menuAppendTo:"parent",maxHeight:"25rem",isDisabled:!L},L&&_.map((function(e){return u().createElement(j.$,{key:e.id,value:e.name})})),T&&u().createElement(j.$,{isNoResultsOption:!0},u().createElement(E.Spinner,{size:"lg"})))),u().createElement(u().Fragment,null,P&&u().createElement(E.Alert,{variant:"danger",isPlain:!0,isInline:!0,title:"Sources unavailable"},"Sources cannot be reached, try again later or enter an account info for upload manually."),!P&&R&&u().createElement(E.Alert,{variant:"danger",isPlain:!0,isInline:!0,title:"Azure details unavailable"},"Could not fetch Tenant id and Subscription id from Azure for given Source. Check Sources page for the source availability or select a different Source.")))};J.propTypes={className:T().string,label:T().node,isRequired:T().bool};const ee=J;var te=n(50470),ne=function(){return u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"https://developers.redhat.com/about"},"Red Hat Developer Program")};const ae=function(){return u().createElement(E.Alert,{variant:"info",isPlain:!0,isInline:!0,title:u().createElement(u().Fragment,null,"CentOS Stream builds are intended for the development of future versions of RHEL and are not supported for production workloads or other use cases.")},u().createElement("p",null,"Join the ",u().createElement(ne,null)," to learn about paid and no-cost RHEL subscription options."))};var ie=n(36459),re=n(34046),oe=n(70710),le=n(20777),se=n(78632),ce=n(73980),ue=n(28721),de=n(26470),me=n.n(de),pe=["/app","/boot","/data","/home","/opt","/srv","/tmp","/usr","/var"],ge=function(e){var t=(0,g.Z)({},((0,ie.Z)(e),e)),n=(0,c.useState)(!1),a=(0,i.Z)(n,2),r=a[0],o=a[1],l=(0,c.useState)("/"),s=(0,i.Z)(l,2),d=s[0],m=s[1],p=(0,c.useState)(""),v=(0,i.Z)(p,2),f=v[0],h=v[1];return(0,c.useEffect)((function(){for(var e=0,n=pe;e<n.length;e++){var a=n[e];if(t.mountpoint.startsWith(a))return m(a),void h(t.mountpoint.substring(a.length))}}),[t.mountpoint]),(0,c.useEffect)((function(){var e=f,n=d;e&&("/"!==n&&"/"!==e[0]&&(e="/"+e),n+=e),t.onChange(me().normalize(n))}),[d,f]),u().createElement(E.Grid,null,u().createElement(E.GridItem,{span:6},u().createElement(k.P,{ouiaId:"mount-point",isOpen:r,onToggle:function(e,t){return function(e){o(e)}(t)},onSelect:function(e,t){m(t),o(!1)},selections:d,variant:I.TM.single,isDisabled:"/"===d},pe.map((function(e,t){return u().createElement(j.$,{key:t,value:e})})))),u().createElement(E.GridItem,{span:6},"/"!==d&&!d.startsWith("/boot")&&!d.startsWith("/usr")&&u().createElement(E.TextInput,{ouiaId:"mount-suffix",type:"text",value:f,"aria-label":"Mount point suffix text input",onChange:function(e,t){return h(t)}})))};ge.propTypes={mountpoint:T().string.isRequired,onChange:T().func.isRequired};const ve=ge;var fe=function(e){var t=(0,g.Z)({},((0,ie.Z)(e),e)),n=(0,c.useState)(!1),a=(0,i.Z)(n,2),r=a[0],o=a[1],l=(0,c.useState)(t.unit||F.at),s=(0,i.Z)(l,2),d=s[0],m=s[1],p=(0,c.useState)(t.size||1),v=(0,i.Z)(p,2),f=v[0],h=v[1];return(0,c.useEffect)((function(){t.onChange(f,d)}),[d,f]),u().createElement(E.Grid,null,u().createElement(E.GridItem,{span:6},u().createElement(E.TextInput,{ouiaId:"size",type:"text",value:f,"aria-label":"Size text input",onChange:function(e,t){return h(isNaN(parseInt(t))?0:parseInt(t))}})),u().createElement(E.GridItem,{span:6},u().createElement(k.P,{ouiaId:"unit",isOpen:r,onToggle:function(e,t){return function(e){o(e)}(t)},onSelect:function(e,t){switch(t){case"KiB":m(F.fI);break;case"MiB":m(F.g7);break;case"GiB":m(F.at)}o(!1)},selections:d===F.fI?"KiB":d===F.g7?"MiB":"GiB",variant:I.TM.single,"aria-label":"Unit select"},["KiB","MiB","GiB"].map((function(e,t){return u().createElement(j.$,{key:t,value:e})})))))};fe.propTypes={size:T().number.isRequired,unit:T().number.isRequired,onChange:T().func.isRequired};const he=fe,be=function(){return u().createElement(E.Alert,{variant:"warning",title:"Sub-directories for the /usr mount point are no longer supported",isInline:!0},"Please note that including sub-directories in the /usr path is no longer supported. Previously included mount points with /usr sub-directory are replaced by /usr when recreating an image.")};var ye=n(23753);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Se={id:(0,ue.Z)(),mountpoint:"/",fstype:"xfs",size:10,unit:F.at};const ke=function(e){var t,n,a,r=(0,g.Z)({},((0,ie.Z)(e),e)),l=(0,S.default)(),s=l.change,d=l.getState,m=(0,w.Z)(r).input,p=(0,c.useState)(null),v=(0,i.Z)(p,2),f=v[0],h=v[1],b=(0,c.useState)(null),y=(0,i.Z)(b,2),x=y[0],T=y[1],k=(0,c.useState)(!1),I=(0,i.Z)(k,2),j=I[0],L=I[1],P=(0,c.useState)([Se.id]),z=(0,i.Z)(P,2),_=z[0],C=z[1],A=(0,c.useState)([]),O=(0,i.Z)(A,2),Z=O[0],R=O[1],N=(0,c.useRef)(),V=(0,c.useState)([Se]),B=(0,i.Z)(V,2),q=B[0],M=B[1],G=null===(t=d())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["oscap-profile"],W=!G,U=!(void 0===(null===(n=d())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["file-system-configuration"])||1===d().values["file-system-configuration"].length),X=(0,ye.Wo)({distribution:null===(a=d())||void 0===a||null===(a=a.values)||void 0===a?void 0:a.release,profile:G},{skip:W||U}),H=X.data,Q=X.isFetching,$=X.isSuccess;(0,c.useEffect)((function(){if(!(U||q.length>1)&&H&&H.filesystem&&$){var e,t=q,n=H.filesystem.filter((function(e){return pe.includes("/".concat(e.mountpoint.split("/")[1]))})),a=Te(n);try{for(a.s();!(e=a.n()).done;){var i=e.value;t.push({id:(0,ue.Z)(),mountpoint:i.mountpoint,fstype:"xfs",size:i.min_size/F.g7,unit:F.g7})}}catch(e){a.e(e)}finally{a.f()}M(t),C(t.map((function(e){return e.id}))),s("file-system-config-radio","manual")}}),[H,$,s,U,q]),(0,c.useEffect)((function(){var e,t=null===(e=d())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["file-system-configuration"];if(t){var n=[],a=[];t.forEach((function(e){var t=(0,ue.Z)();n.push({id:t,mountpoint:e.mountpoint,fstype:"xfs",size:e.size,unit:e.unit}),a.push(t)})),M(n),C(a)}}),[d]);var K=function(){var e;return null===(e=d())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["file-system-config-show-errors"]};(0,c.useEffect)((function(){s(m.name,_.map((function(e){var t,n=Te(q);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id===e)return{mountpoint:a.mountpoint,size:a.size,unit:a.unit}}}catch(e){n.e(e)}finally{n.f()}return null})))}),[q,_,s,m.name]);var Y=function(){var e=(0,ue.Z)();M(q.concat([{id:e,mountpoint:"/home",fstype:"xfs",size:1,unit:F.at}])),C(_.concat([e]))},J=function(e){var t=N.current,n=Array.from(t.children);if(!n.map((function(e){return e.id})).every((function(t,n){return t===e[n]}))){for(;t.firstChild;)t.removeChild(t.lastChild);e.forEach((function(e){t.appendChild(n.find((function(t){return t.id===e})))}))}},ee=function(e){e.preventDefault();var t=e.target.closest("tr");if(!t||!N.current.contains(t))return null;var n=t.id,a=Array.from(N.current.children).findIndex((function(e){return e.id===n}));if(a!==x){var i=function(e,t,n){var a=e.indexOf(t);if(a===n)return e;var i=e.splice(a,1);return e.splice(n,0,i[0]),e}((0,o.Z)(_),f,a);J(i),T(a),R(i)}},ne=function(e){var t=N.current.getBoundingClientRect();return e.clientX>t.x&&e.clientX<t.x+t.width&&e.clientY>t.y&&e.clientY<t.y+t.height},ae=function(e){ne(e)||(J(_),T(null))},de=function(e){ne(e)&&C(Z)},me=function(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",e.currentTarget.id),e.currentTarget.classList.add(se.Z.modifiers.ghostRow),e.currentTarget.setAttribute("aria-pressed","true"),h(e.currentTarget.id),L(!0)},ge=function(e){e.target.classList.remove(se.Z.modifiers.ghostRow),e.target.setAttribute("aria-pressed","false"),h(null),T(null),L(!1)};return Q?u().createElement(E.Spinner,{size:"lg"}):u().createElement(D.lP,null,(function(){var e,t,n;return u().createElement(u().Fragment,null,u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Configure partitions")),(null===(e=d())||void 0===e||null===(e=e.values)||void 0===e||null===(e=e["file-system-configuration"])||void 0===e?void 0:e.find((function(e){return e.mountpoint.includes("/usr")})))&&u().createElement(be,null),q.length>1&&0!==(null===(t=d())||void 0===t||null===(t=t.errors)||void 0===t||null===(t=t["file-system-configuration"])||void 0===t||null===(t=t.duplicates)||void 0===t?void 0:t.length)&&K()&&u().createElement(E.Alert,{variant:"danger",isInline:!0,title:"Duplicate mount points: All mount points must be unique. Remove the duplicate or choose a new mount point.","data-testid":"fsc-warning"}),q.length>=1&&!1===(null===(n=d())||void 0===n||null===(n=n.errors)||void 0===n||null===(n=n["file-system-configuration"])||void 0===n?void 0:n.root)&&K()&&u().createElement(E.Alert,{variant:"danger",isInline:!0,title:"No root partition configured."}),u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Create partitions for your image by defining mount points and minimum sizes. Image builder creates partitions with a logical volume (LVM) device type."),u().createElement(E.Text,null,"The order of partitions may change when the image is installed in order to conform to best practices and ensure functionality.",u().createElement("br",null),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/creating_customized_images_by_using_insights_image_builder/customizing-file-systems-during-the-image-creation",className:"pf-u-pl-0"},"Read more about manual configuration here"))),u().createElement(ce.Table,{"aria-label":"File system table",className:j&&se.Z.modifiers.dragOver,variant:"compact"},u().createElement(ce.Thead,null,u().createElement(ce.Tr,null,u().createElement(ce.Th,null),u().createElement(ce.Th,null,"Mount point"),u().createElement(ce.Th,null,"Type"),u().createElement(ce.Th,null,"Minimum size",u().createElement(E.Popover,{hasAutoWidth:!0,bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Image Builder may extend this size based on requirements, selected packages, and configurations."))},u().createElement(E.Button,{variant:"plain","aria-label":"File system configuration info","aria-describedby":"file-system-configuration-info",className:"pf-c-form__group-label-help"},u().createElement(re.ZP,null)))),u().createElement(ce.Th,null))),u().createElement(ce.Tbody,{ref:N,onDragOver:ee,onDrop:ee,onDragLeave:ae,"data-testid":"file-system-configuration-tbody"},q.map((function(e,t){var n,a;return u().createElement(ce.Tr,{key:t,id:e.id,draggable:!0,onDrop:de,onDragEnd:ge,onDragStart:me},u().createElement(ce.Td,{draggableRow:{id:"draggable-row-".concat(e.id)}}),u().createElement(ce.Td,{className:"pf-m-width-30"},u().createElement(ve,{key:e.id+"-mountpoint",mountpoint:e.mountpoint,onChange:function(t){return function(e,t){for(var n=(0,o.Z)(q),a=0;a<n.length;a++)if(n[a].id===e){var i=xe({},n[a]);i.mountpoint=t,n.splice(a,1,i);break}M(n)}(e.id,t)}}),0!==(null===(n=d().errors["file-system-configuration"])||void 0===n?void 0:n.duplicates.length)&&-1!==(null===(a=d().errors["file-system-configuration"])||void 0===a?void 0:a.duplicates.indexOf(e.mountpoint))&&K()&&u().createElement(E.Alert,{variant:"danger",isInline:!0,isPlain:!0,title:"Duplicate mount point."})),u().createElement(ce.Td,{className:"pf-m-width-20"},e.fstype),u().createElement(ce.Td,{className:"pf-m-width-30"},u().createElement(he,{key:e.id+"-sizeunit",size:e.size,unit:e.unit,onChange:function(t,n){return function(e,t,n){for(var a=(0,o.Z)(q),i=0;i<a.length;i++)if(a[i].id===e){var r=xe({},a[i]);r.size=t,r.unit=n,a.splice(i,1,r);break}M(a)}(e.id,t,n)}})),u().createElement(ce.Td,{className:"pf-m-width-10"},u().createElement(E.Button,{variant:"link",icon:u().createElement(oe.ZP,null),onClick:function(){return function(e){var t=q.map((function(e){return e.id})).indexOf(e),n=(0,o.Z)(q);n.splice(t,1);var a=_.indexOf(e),i=(0,o.Z)(_);i.splice(a,1),M(n),C(i)}(e.id)},"data-testid":"remove-mount-point",isDisabled:"/"===e.mountpoint})))})))),u().createElement(E.TextContent,null,u().createElement(E.Button,{ouiaId:"add-partition","data-testid":"file-system-add-partition",className:"pf-u-text-align-left",variant:"link",icon:u().createElement(le.ZP,null),onClick:Y},"Add partition")))}))};var Ie=function(e){var t=e.fields,n=e.minWidths,a=e.maxWidths,i=(0,D.XQ)().renderForm;return u().createElement(E.Gallery,{minWidths:n,maxWidths:a,hasGutter:!0},t.map((function(e){return u().createElement(E.GalleryItem,{key:e.name},i([e]))})))};Ie.propTypes={fields:T().array,maxWidths:T().object,minWidths:T().object};const je=Ie;var Le=n(92460),Pe=n(53922),ze=["label","isRequired"],_e=function(e){var t=e.label,n=e.isRequired,a=(0,v.Z)(e,ze),r=(0,S.default)(),l=r.change,s=r.getState,d=(0,w.Z)(a).input,m=(0,c.useState)(!1),p=(0,i.Z)(m,2),f=p[0],h=p[1],b=(0,c.useState)(!1),y=(0,i.Z)(b,2),x=y[0],T=y[1],L=function(e,t){l(d.name,t),h(!1)},P=function(){T(!0)},z=function(e){var t="",n="";if(e===F.F2&&(t=(0,Pe.BU)(F.ky[1]),n=(0,Pe.BU)(F.VL[1])),e===F.PV&&(t=(0,Pe.BU)(F.IS[1]),n=(0,Pe.BU)(F.Xi[1])),(0,Le.Z)(e))return"Full support ends: ".concat(t," | Maintenance support ends: ").concat(n)};return u().createElement(D.lP,null,(function(){var e,a;return u().createElement(E.FormGroup,{isRequired:n,label:t},u().createElement(k.P,(0,g.Z)({ouiaId:"release_select",variant:I.TM.single,onToggle:function(){return h(!f)},onSelect:L,selections:F.rh.get(null===(e=s())||void 0===e||null===(e=e.values)||void 0===e?void 0:e[d.name]),isOpen:f},!x&&{loadingVariant:{text:"Show options for further development of RHEL",onClick:P}}),(a=[],new Map((0,o.Z)(F.rh).filter((function(e){var t=(0,i.Z)(e,1)[0];return!!x||(0,Le.Z)(t)}))).forEach((function(e,t){a.push(u().createElement(j.$,{key:e,value:t,description:z(t)},F.rh.get(t)))})),a)))}))};_e.propTypes={label:T().node,isRequired:T().bool};const Ce=_e;var Ae=n(85893),Oe=n(84213);const Ze=function(){var e,t,n,a,i,r,o,l,s=(0,D.XQ)().getState,c=null===(t=null===(e=s())||void 0===e?void 0:e.values)||void 0===t?void 0:t["oscap-profile"],u=(0,ye.Wo)({distribution:null===(a=null===(n=s())||void 0===n?void 0:n.values)||void 0===a?void 0:a.release,profile:c},{skip:!c}),d=u.data,m=u.isFetching,p=u.isSuccess;return(0,Ae.jsxs)(Ae.Fragment,{children:[m&&(0,Ae.jsx)(E.Spinner,{size:"lg"}),p&&(0,Ae.jsxs)(E.TextContent,{children:[(0,Ae.jsx)("br",{}),(0,Ae.jsxs)(E.TextList,{component:E.TextListVariants.dl,children:[(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width",children:"Profile description:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:null===(i=d.openscap)||void 0===i?void 0:i.profile_description})]}),(0,Ae.jsxs)(E.TextList,{component:E.TextListVariants.dl,children:[(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width",children:"Operating system:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:F.rh.get(null===(o=null===(r=s())||void 0===r?void 0:r.values)||void 0===o?void 0:o.release)})]}),(0,Ae.jsxs)(E.TextList,{component:E.TextListVariants.dl,children:[(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width",children:"Reference ID:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:null===(l=d.openscap)||void 0===l?void 0:l.profile_id})]})]})]})};var Re=n(64124),Ne=function(e){var t=e.id,n=e.formFields,a=e.formRef,i=e.title,r=e.customTitle,o=e.showTitle,l=e.showTitles;return u().createElement("div",{id:t,ref:a,className:"pf-c-form"},(l&&!1!==o||o)&&(r||u().createElement(E.Title,{headingLevel:"h1",size:"xl"},i)),n)};Ne.propTypes={id:T().string,title:T().node,customTitle:T().node,formFields:T().array.isRequired,formOptions:T().shape({renderForm:T().func.isRequired}).isRequired,showTitles:T().bool,showTitle:T().bool,formRef:T().oneOfType([T().func,T().shape({current:T().instanceOf(Element)})])};const De=Ne;var Fe=n(70363),Ve=function(e){var t,n,a=e.handleNext,r=e.handlePrev,o=e.nextStep,l=(0,c.useContext)(Fe.default),s=l.currentStep,d=l.formOptions,m=(0,D.XQ)(),p=m.change,g=m.getState,v=(0,c.useState)(!(null===(t=g())||void 0===t||null===(t=t.errors)||void 0===t||!t["file-system-configuration"])),f=(0,i.Z)(v,2),h=f[0],b=f[1],y=(0,c.useState)(!1),x=(0,i.Z)(y,2),T=x[0],w=x[1],S=ye.qd.usePrefetch("getArchitectures"),k=null===(n=g())||void 0===n||null===(n=n.errors)||void 0===n?void 0:n["file-system-configuration"];return(0,c.useEffect)((function(){b(!!k),k||(w(!1),p("file-system-config-show-errors",!1))}),[k,p]),u().createElement(u().Fragment,null,u().createElement(E.Button,{id:"".concat(s.id,"-next-button"),variant:"primary",type:"button",isDisabled:h&&T,onClick:function(){h||a(o),w(!0),p("file-system-config-show-errors",!0)},onMouseEnter:function(){var e,t=null===(e=g())||void 0===e||null===(e=e.values)||void 0===e?void 0:e.release;S({distribution:t})}},"Next"),u().createElement(E.Button,{id:"".concat(s.id,"-previous-button"),variant:"secondary",type:"button",onClick:r},"Back"),u().createElement("div",{className:"pf-c-wizard__footer-cancel"},u().createElement(E.Button,{id:"".concat(s.id,"-cancel-button"),type:"button",variant:"link",onClick:d.onCancel},"Cancel")))};Ve.propTypes={handleNext:T().func,handlePrev:T().func,nextStep:T().string};const Be={StepTemplate:De,id:"wizard-systemconfiguration-filesystem",title:"File system configuration",name:"File system configuration",buttons:Ve,nextStep:"packages",fields:[{component:d.Z.PLAIN_TEXT,name:"file-system-configuration-text-component",label:u().createElement(u().Fragment,null,u().createElement(E.Text,null,"Define the partitioning of the image"))},{component:d.Z.RADIO,name:"file-system-config-radio",initialValue:"automatic",options:[{label:u().createElement(u().Fragment,null,u().createElement(E.Text,null,u().createElement(E.Label,{isCompact:!0,color:"blue"},"Recommended")," ","Use automatic partitioning")),description:"Automatically partition your image to what is best, depending on the target environment(s)",value:"automatic","data-testid":"file-system-config-radio-automatic",autoFocus:!0},{label:"Manually configure partitions",description:"Manually configure the file system of your image by adding, removing, and editing partitions",value:"manual","data-testid":"file-system-config-radio-manual",className:"pf-u-mt-sm"}],condition:{when:"oscap-profile",is:void 0}},{component:"file-system-configuration",name:"file-system-configuration",label:"File system configurations",validate:[{type:"fileSystemConfigurationValidator"},{type:Re.Z.REQUIRED}],condition:{or:[{when:"file-system-config-radio",is:"manual"},{not:[{when:"oscap-profile",is:void 0}]}]}},{component:d.Z.PLAIN_TEXT,name:"automatic-partitioning-info",label:u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Automatic partitioning"),u().createElement(E.Text,null,"Red Hat will automatically partition your image to what is best, depending on the target environment(s)."),u().createElement(E.Text,null,"The target environment sometimes dictates the partitioning scheme or parts of it, and sometimes the target environment is unknown (e.g., for the .qcow2 generic cloud image)."),u().createElement(E.Text,null,"Using automatic partitioning will apply the most current supported configuration.",u().createElement("br",null),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/creating_customized_images_by_using_insights_image_builder/customizing-file-systems-during-the-image-creation",className:"pf-u-pl-0"},"Customizing file systems during the image creation"))),condition:{when:"file-system-config-radio",is:"automatic"}}]};var qe=n(25982),Me=function(e){switch(e){case F.PV:return"9";case F.F2:return"8";case F.xG:return"9";case F.qq:return"8";default:return""}};function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=function(){var e,t,n,a,i,r,o=(0,D.XQ)().getState,l=null===(e=o().values)||void 0===e?void 0:e.arch,s=null===(t=o().values)||void 0===t?void 0:t.release,u=Me(s),d=(0,qe.UQ)({availableForArch:l,availableForVersion:u,contentType:"rpm",origin:"external"}),m=void 0===(null==d||null===(n=d.data)||void 0===n||null===(n=n.meta)||void 0===n?void 0:n.count)||(null==d||null===(a=d.data)||void 0===a||null===(a=a.meta)||void 0===a?void 0:a.count)<=100,p=(0,qe.UQ)({availableForArch:l,availableForVersion:u,contentType:"rpm",origin:"external",limit:null==d||null===(i=d.data)||void 0===i||null===(i=i.meta)||void 0===i?void 0:i.count,offset:0},{skip:m}),g=(0,c.useMemo)((function(){var e;return(null==d||null===(e=d.data)||void 0===e||null===(e=e.meta)||void 0===e?void 0:e.count)>100?Ue({},p):Ue({},d)}),[d,p]),v=g.data,f=g.isSuccess,h=null===(r=o())||void 0===r||null===(r=r.values)||void 0===r?void 0:r["payload-repositories"];if(f&&h){var b,y=new Set(v.data.map((function(e){return e.url}))),E=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}(h);try{for(E.s();!(b=E.n()).done;){var x=b.value;if(!y.has(x.baseurl))return!0}}catch(e){E.e(e)}finally{E.f()}}return!1},He=function(e){var t=e.buttonLabels,n=t.cancel,a=t.next,r=t.submit,o=t.back,l=e.handleNext,s=e.handlePrev,d=e.nextStep,m=(0,D.XQ)().getState,p=(0,c.useState)(!1),g=(0,i.Z)(p,2),v=g[0],f=g[1],h=(0,c.useContext)(Fe.default),b=h.currentStep,y=h.formOptions,x=C.Op.usePrefetch("listActivationKeys"),T=qe.GF.usePrefetch("listRepositories"),w=Xe(),S=function(){"wizard-review"===b.id?y.onSubmit({values:y.getState().values,setIsSaving:f}):l("function"==typeof d?d({values:y.getState().values}):d)},k=function(){if("wizard-imageoutput"===b.id&&x(),"wizard-systemconfiguration-packages"===b.id){var e,t,n=null===(e=m().values)||void 0===e?void 0:e.arch,a=null===(t=m().values)||void 0===t?void 0:t.release,i=Me(a);T({availableForArch:n,availableForVersion:i,contentType:"rpm",origin:"external"})}};return u().createElement(D.lP,null,(function(){return u().createElement(u().Fragment,null,u().createElement(E.Button,{id:"".concat(b.id,"-next-button"),variant:"primary",type:"button",isDisabled:!y.valid||y.getState().validating||v||w,isLoading:"wizard-review"===b.id?v:null,onClick:S,onMouseEnter:k},"wizard-review"===b.id?v?"Creating image":r:a),u().createElement(E.Button,{id:"".concat(b.id,"-previous-button"),type:"button",variant:"secondary",onClick:s,isDisabled:v},o),u().createElement("div",{className:"pf-c-wizard__footer-cancel"},u().createElement(E.Button,{id:"".concat(b.id,"-cancel-button"),type:"button",variant:"link",onClick:y.onCancel,isDisabled:v},n)))}))};He.propTypes={buttonLabels:T().shape({cancel:T().node,submit:T().node,back:T().node,next:T().node}),handleNext:T().func,handlePrev:T().func,nextStep:T().oneOfType([T().string,T().func]),isSaving:T().bool};const Qe=He,$e={StepTemplate:De,id:"wizard-systemconfiguration-packages",title:"Additional Red Hat packages",name:"packages",substepOf:"Content",nextStep:function(e){return e.values.contentSourcesEnabled?"repositories":"details"},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"packages-text-component",label:u().createElement(E.Text,null,"Images built with Image Builder include all required packages.")},{component:"package-selector",name:"selected-packages",label:"Available options"}]};var Ke=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,i,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o},Ye=function(e){!function(e){e("file-system-configuration",void 0),e("file-system-config-radio","automatic")}(e),function(e){e("selected-packages",void 0)}(e)},Je=function(e){var t,n,a,i,r,o,l=e.input,s=(0,S.default)(),u=s.change,d=s.getState,m=Ke((0,c.useState)("None"),2),p=m[0],g=m[1],v=Ke((0,c.useState)(null===(n=null===(t=d())||void 0===t?void 0:t.values)||void 0===n?void 0:n["oscap-profile"]),2),f=v[0],h=v[1],b=Ke((0,c.useState)(!1),2),y=b[0],x=b[1],T=(0,ye.YA)({distribution:null===(i=null===(a=d())||void 0===a?void 0:a.values)||void 0===i?void 0:i.release}),w=T.data,L=T.isFetching,P=T.isSuccess,z=T.isError,_=T.refetch,C=(0,ye.Wo)({distribution:null===(o=null===(r=d())||void 0===r?void 0:r.values)||void 0===o?void 0:o.release,profile:f},{skip:!f}).data;(0,c.useEffect)((function(){C&&C.openscap&&"string"==typeof C.openscap.profile_name&&g(C.openscap.profile_name)}),[C]);var A=[(0,Ae.jsx)(et,{setProfileName:g},"oscap-none-option")];return P&&A.concat(w.map((function(e){return(0,Ae.jsx)(tt,{profile_id:e,setProfileName:g},e)}))),L&&A.push((0,Ae.jsx)(j.$,{isNoResultsOption:!0,"data-testid":"policies-loading",children:(0,Ae.jsx)(E.Spinner,{size:"md"})},"None")),(0,Ae.jsxs)(E.FormGroup,{isRequired:!0,"data-testid":"profiles-form-group",label:(0,Ae.jsxs)(Ae.Fragment,{children:["OpenSCAP profile",(0,Ae.jsx)(E.Popover,{maxWidth:"30rem",position:"left",bodyContent:(0,Ae.jsx)(E.TextContent,{children:(0,Ae.jsx)(E.Text,{children:"To run a manual compliance scan in OpenSCAP, download this image."})}),children:(0,Ae.jsx)(E.Button,{variant:"plain","aria-label":"About OpenSCAP",isInline:!0,children:(0,Ae.jsx)(Oe.by,{})})})]}),children:[(0,Ae.jsx)(k.P,{ouiaId:"profileSelect",variant:I.TM.typeahead,onToggle:function(){y||_(),x(!y)},onSelect:function(e,t){h(t),x(!1),u(l.name,t),Ye(u),u("file-system-config-radio","manual")},onClear:function(){h(void 0),u(l.name,void 0),g(void 0),Ye(u)},selections:p,isOpen:y,placeholderText:"Select a profile",typeAheadAriaLabel:"Select a profile",isDisabled:!P,onFilter:function(e,t){if(w)return[(0,Ae.jsx)(et,{setProfileName:g},"oscap-none-option")].concat(w.map((function(e,n){return(0,Ae.jsx)(tt,{profile_id:e,setProfileName:g,input:t},n)})))},children:A}),z&&(0,Ae.jsx)(E.Alert,{title:"Error fetching the profiles",variant:"danger",isPlain:!0,isInline:!0,children:"Cannot get the list of profiles"})]})},et=function(e){var t=e.setProfileName;return(0,Ae.jsx)(j.$,{value:void 0,onClick:function(){t("None")},children:(0,Ae.jsx)("p",{children:"None"})})},tt=function(e){var t,n,a,i,r,o=e.profile_id,l=e.setProfileName,s=e.input,c=(0,S.default)().getState,u=(0,ye.Wo)({distribution:null===(n=null===(t=c())||void 0===t?void 0:t.values)||void 0===n?void 0:n.release,profile:o}).data;return s&&!(null===(i=null===(a=null==u?void 0:u.openscap)||void 0===a?void 0:a.profile_name)||void 0===i?void 0:i.toLowerCase().includes(s.toLowerCase()))?null:(0,Ae.jsx)(j.$,{value:o,onClick:function(){var e;(null===(e=null==u?void 0:u.openscap)||void 0===e?void 0:e.profile_name)&&l(u.openscap.profile_name)},children:(0,Ae.jsx)("p",{children:null===(r=null==u?void 0:u.openscap)||void 0===r?void 0:r.profile_name})},o)},nt=function(e){var t=e.input;return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(Je,{input:t}),(0,Ae.jsx)(Ze,{})]})},at=function(e){var t=(0,w.Z)(e).input;return(0,Ae.jsx)(nt,{input:t})},it=n(70196),rt=n(6569),ot=n(5866),lt=n(95511),st=n(9669),ct=n.n(st),ut=["package_name"];function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pt={headers:{"Content-Type":"application/json"}};function gt(){return gt=(0,a.Z)(s().mark((function e(t,n,a,i){var r,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams({distribution:t,architecture:n,search:a}),i&&r.append("limit",i),o="/packages?"+r.toString(),e.next=5,ct().get(F.DO.concat(o));case 5:return l=e.sent,e.abrupt("return",l.data);case 7:case"end":return e.stop()}}),e)}))),gt.apply(this,arguments)}function vt(){return(vt=(0,a.Z)(s().mark((function e(t,n){var a,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={urls:t,search:n},e.next=4,ct().post(F.$J.concat("/rpms/names"),a,pt);case 4:return i=e.sent,r=i.data.map((function(e){return mt({name:e.package_name},(0,v.Z)(e,ut))})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const ft={getPackages:function(e,t,n,a){return gt.apply(this,arguments)},getPackagesContentSources:function(e,t){return vt.apply(this,arguments)}};function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var xt=function(e){var t=e.pkgList,n=e.search,a=e.chosenPackages,i=e.selectedAvailablePackages,r=e.handleSelectAvailableFunc,o=t.find((function(e){return e.name===n}));return u().createElement(E.DualListSelectorListItem,{"data-testid":"exact-match-".concat(o.name),isDisabled:!!a[o.name],isSelected:i.has(o.name),onOptionSelect:function(e){return r(e,o.name)}},u().createElement(E.TextContent,{key:"".concat(o.name)},u().createElement("small",{className:"pf-u-mb-sm"},"Exact match"),u().createElement("span",{className:"pf-c-dual-list-selector__item-text"},o.name),u().createElement("small",null,o.summary),u().createElement(E.Divider,null)))},Tt=function(e){var t,n,i=e.defaultArch,r=(0,S.default)().getState,o=null===(t=r())||void 0===t||null===(t=t.values)||void 0===t?void 0:t.release,l=null===(n=r())||void 0===n||null===(n=n.values)||void 0===n?void 0:n.arch,c=(0,ye.xW)({distribution:o}),d=c.data,m=c.isSuccess,p=function(){var e=(0,a.Z)(s().mark((function e(t){var n,a,o,c,u,m,p,g,v,f,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=r())||void 0===n||null===(n=n.values)||void 0===n||!n.contentSourcesEnabled){e.next=8;break}return a=d.find((function(e){return e.arch===l})),o=a.repositories.map((function(e){return e.baseurl})),e.next=5,ft.getPackagesContentSources(o,t);case 5:return e.abrupt("return",e.sent);case 8:return p=[null===(c=r())||void 0===c||null===(c=c.values)||void 0===c?void 0:c.release,(null===(u=r())||void 0===u||null===(u=u.values)||void 0===u?void 0:u.architecture)||i,t],e.next=11,ft.getPackages.apply(ft,p);case 11:if(g=e.sent,v=g.data,f=g.meta,(null===(m=v)||void 0===m?void 0:m.length)!==f.count){e.next=18;break}return e.abrupt("return",v);case 18:if(!v){e.next=24;break}return e.next=21,ft.getPackages.apply(ft,p.concat([f.count]));case 21:return h=e.sent,v=h.data,e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return u().createElement(St,{getAllPackages:p,isSuccess:m})},wt=function(){var e=(0,S.default)().getState,t=function(){var t=(0,a.Z)(s().mark((function t(n){var a,i,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=null===(a=e())||void 0===a||null===(a=a.values)||void 0===a?void 0:a["payload-repositories"],r=null==i?void 0:i.map((function(e){return e.baseurl})),t.next=4,ft.getPackagesContentSources(r,n);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return u().createElement(St,{getAllPackages:t})},St=function(e){var t,n,r,o=e.getAllPackages,l=e.isSuccess,d=(0,c.useContext)(Fe.default).currentStep,m=(0,S.default)(),p=m.change,g=m.getState,v=(0,c.useState)(void 0),f=(0,i.Z)(v,2),h=f[0],b=f[1],y=(0,c.useState)(""),x=(0,i.Z)(y,2),T=x[0],w=x[1],k=(0,c.useState)({}),I=(0,i.Z)(k,2),j=I[0],L=I[1],P=(0,c.useState)(""),z=(0,i.Z)(P,2),_=z[0],C=z[1],A=null===(t=g())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["selected-packages"],O=(0,c.useState)(void 0),Z=(0,i.Z)(O,2),R=Z[0],N=Z[1],D=(0,c.useState)(new Set),F=(0,i.Z)(D,2),V=F[0],B=F[1],q=(0,c.useState)(new Set),M=(0,i.Z)(q,2),G=M[0],W=M[1],U=(0,c.useRef)(null),X=null===(n=g())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["oscap-profile"],H=(0,ye.Wo)({distribution:null===(r=g())||void 0===r||null===(r=r.values)||void 0===r?void 0:r.release,profile:X},{skip:!X}),Q=H.data,$=H.isSuccess;(0,c.useEffect)((function(){if(Q&&Q.packages&&$){var e,t={},n=yt(Q.packages);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a]={name:a}}}catch(e){n.e(e)}finally{n.f()}ne(t)}}),[Q,$,ne]),(0,c.useEffect)((function(){if(A){var e,t={},n=yt(A);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.name]=a}}catch(e){n.e(e)}finally{n.f()}L(t)}}),[]),(0,c.useEffect)((function(){var e;l&&(null===(e=U.current)||void 0===e||e.focus())}),[l]);var K=(0,c.useCallback)((function(e){return function(t,n){return t=t.name.toLowerCase(),n=n.name.toLowerCase(),t===e?-1:n===e?1:t.startsWith(e)&&!n.startsWith(e)?-1:n.startsWith(e)&&!t.startsWith(e)?1:t<n?-1:n<t?1:0}}),[]),Y=(0,c.useMemo)((function(){return void 0===R?[]:Object.values(R).sort(K(h))}),[R,h,K]),J=(0,c.useMemo)((function(){return Object.values(j).filter((function(e){return!!e.name.includes(T)})).sort(K(T))}),[j,T,K]),ee=function(){var e=(0,a.Z)(s().mark((function e(){var t,n,a,i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(h);case 2:if(t=e.sent){n={},a=yt(t);try{for(a.s();!(i=a.n()).done;)r=i.value,n[r.name]=r}catch(e){a.e(e)}finally{a.f()}N(n)}else N([]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(e){"Enter"===e.key&&"available"===_&&(e.stopPropagation(),ee())};(0,c.useEffect)((function(){return document.addEventListener("keydown",te,!0),function(){document.removeEventListener("keydown",te,!0)}}),[]);var ne=(0,c.useCallback)((function(e){B(new Set),W(new Set),L(e),p("selected-packages",Object.values(e))}),[p]),ae=function(e,t){var n=new Set(V);n.has(t)?n.delete(t):n.add(t),B(n)};return u().createElement(E.DualListSelector,null,u().createElement(E.DualListSelectorPane,{title:"Available packages",searchInput:u().createElement(u().Fragment,null,u().createElement(E.SearchInput,{placeholder:"Search for a package","data-testid":"search-available-pkgs-input",value:h,ref:U,onFocus:function(){return C("available")},onBlur:function(){return C("")},onChange:function(e,t){return b(t)},submitSearchButtonLabel:"Search button for available packages",onSearch:ee,resetButtonLabel:"Clear available packages search",onClear:function(){b(""),N(void 0)},isDisabled:"packages"===d.name&&!l}),Y.length>=100&&u().createElement(E.Alert,{title:"Over 100 results found. Refine your search.",variant:"warning",isPlain:!0,isInline:!0})),status:V.size>0?"".concat(V.size,"\n          of ").concat(Y.length," items"):"".concat(Y.length," items")},u().createElement(E.DualListSelectorList,{"data-testid":"available-pkgs-list"},void 0===R?u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"Search above to add additional",u().createElement("br",null),"packages to your image"):0===Y.length?u().createElement(u().Fragment,null,u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md pf-u-font-size-lg pf-u-font-weight-bold"},"No results found"),u().createElement("br",null),u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"Adjust your search and try again")):Y.length>=100?u().createElement(u().Fragment,null,Y.some((function(e){return e.name===h}))&&u().createElement(xt,{pkgList:Y,search:h,chosenPackages:j,selectedAvailablePackages:V,handleSelectAvailableFunc:ae}),u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md pf-u-font-size-lg pf-u-font-weight-bold"},"Too many results to display"),u().createElement("br",null),u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"Please make the search more specific",u().createElement("br",null),"and try again")):Y.map((function(e){return u().createElement(E.DualListSelectorListItem,{"data-testid":"available-pkgs-".concat(e.name),key:e.name,isDisabled:!!j[e.name],isSelected:V.has(e.name),onOptionSelect:function(t){return ae(0,e.name)}},u().createElement(E.TextContent,{key:"".concat(e.name)},u().createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),u().createElement("small",null,e.summary)))})))),u().createElement(E.DualListSelectorControlsWrapper,{"aria-label":"Selector controls"},u().createElement(E.DualListSelectorControl,{isDisabled:0===V.size,onClick:function(){return function(){var e,t=bt({},j),n=yt(V);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a]=bt({},R[a])}}catch(e){n.e(e)}finally{n.f()}ne(t)}()},"aria-label":"Add selected",tooltipContent:"Add selected"},u().createElement(lt.ZP,null)),u().createElement(E.DualListSelectorControl,{isDisabled:0===Y.length||Y.length>=100,onClick:function(){return e=bt(bt({},j),R),void ne(e);var e},"aria-label":"Add all",tooltipContent:"Add all"},u().createElement(rt.ZP,null)),u().createElement(E.DualListSelectorControl,{isDisabled:0===Object.values(j).length,onClick:function(){ne({})},"aria-label":"Remove all",tooltipContent:"Remove all"},u().createElement(it.ZP,null)),u().createElement(E.DualListSelectorControl,{onClick:function(){return function(){var e={};for(var t in j)G.has(t)||(e[t]=bt({},j[t]));ne(e)}()},isDisabled:0===G.size,"aria-label":"Remove selected",tooltipContent:"Remove selected"},u().createElement(ot.ZP,null))),u().createElement(E.DualListSelectorPane,{title:"Chosen packages",searchInput:u().createElement(E.SearchInput,{placeholder:"Search for a package","data-testid":"search-chosen-pkgs-input",value:T,onFocus:function(){return C("chosen")},onBlur:function(){return C("")},onChange:function(e,t){return w(t)},resetButtonLabel:"Clear chosen packages search",onClear:function(){w("")}}),status:G.size>0?"".concat(G.size,"\n          of ").concat(J.length," items"):"".concat(J.length," items"),isChosen:!0},u().createElement(E.DualListSelectorList,{"data-testid":"chosen-pkgs-list"},0===Object.values(j).length?u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"No packages added"):0===J.length?u().createElement("p",{className:"pf-u-text-align-center pf-u-mt-md"},"No packages found"):J.map((function(e){return u().createElement(E.DualListSelectorListItem,{"data-testid":"selected-pkgs-".concat(e.name),key:e.name,isSelected:G.has(e.name),onOptionSelect:function(t){return n=e.name,(a=new Set(G)).has(n)?a.delete(n):a.add(n),void W(a);var n,a}},u().createElement(E.TextContent,{key:"".concat(e.name)},u().createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),u().createElement("small",null,e.summary)))})))))};xt.propTypes={pkgList:T().arrayOf(T().object),search:T().string,chosenPackages:T().object,selectedAvailablePackages:T().object,handleSelectAvailableFunc:T().func},Tt.propTypes={defaultArch:T().string},St.propTypes={getAllPackages:T().func,isSuccess:T().bool};var kt=n(41626),It=["Popover"],jt=function(e){var t=e.Popover,n=(0,v.Z)(e,It),a=(0,c.useRef)();return u().createElement(kt.Z,(0,g.Z)({},n,{label:u().createElement("span",{ref:a,className:"ins-c-image--builder__popover"},n.label,u().createElement(t,null))}))};jt.propTypes={Popover:T().elementType.isRequired,label:T().node};const Lt=jt;var Pt=["label"],zt=function(){return u().createElement(E.Popover,{headerContent:"About Red Hat Subscription Management",position:"right",minWidth:"30rem",bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Registered systems are entitled to support services, errata, patches, and upgrades."),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/products/red-hat-subscription-management"},"Learn more about Red Hat Subscription Management"))},u().createElement(E.Button,{variant:"plain",className:"pf-c-form__group-label-help","aria-label":"About remote host configuration (rhc)",isInline:!0},u().createElement(re.ZP,null)))},_t=function(){return u().createElement(E.Popover,{headerContent:"About Red Hat Insights",position:"right",minWidth:"30rem",bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Red Hat Insights client provides actionable intelligence about your Red Hat Enterprise Linux environments, helping to identify and address operational and vulnerability risks before an issue results in downtime."),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/products/red-hat-insights"},"Learn more about Red Hat Insights"))},u().createElement(E.Button,{variant:"plain",className:"pf-c-form__group-label-help","aria-label":"About remote host configuration (rhc)",isInline:!0},u().createElement(re.ZP,null)))},Ct=function(){return u().createElement(E.Popover,{headerContent:"About remote host configuration (rhc)",position:"right",minWidth:"30rem",bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Remote host configuration allows Red Hat Enterprise Linux hosts to connect to Red Hat Insights. Remote host configuration is required to use the Red Hat Insights Remediations service."),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/articles/rhc"},"Learn more about remote host configuration"))},u().createElement(E.Button,{variant:"plain",className:"pf-c-form__group-label-help","aria-label":"About remote host configuration (rhc)",isInline:!0},u().createElement(re.ZP,null)))},At=function(e){var t,n=e.label,a=(0,v.Z)(e,Pt),r=(0,S.default)(),o=r.change,l=r.getState,s=(0,w.Z)(a).input,d=null===(t=l())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["register-system"],m=(0,c.useState)("register-now-insights"===d||"register-now"===d),p=(0,i.Z)(m,2),g=p[0],f=p[1];return u().createElement(D.lP,null,(function(){return u().createElement(E.FormGroup,{label:n},u().createElement(E.Radio,{autoFocus:!0,label:g?u().createElement(u().Fragment,null,"Monitor & manage subscriptions and access to Red Hat content",u().createElement(zt,null)):"Automatically register and enable advanced capabilities","data-testid":"registration-radio-now",name:"register-system",id:"register-system-now",isChecked:d.startsWith("register-now"),onChange:function(){o(s.name,"register-now-rhc")},description:!g&&u().createElement(E.Button,{component:"a","data-testid":"registration-additional-options",variant:"link",isDisabled:!d.startsWith("register-now"),isInline:!0,onClick:function(){return f(!g)}},"Show additional connection options"),body:g&&u().createElement(E.Checkbox,{className:"pf-u-ml-lg",label:u().createElement(u().Fragment,null,"Enable predictive analytics and management capabilities",u().createElement(_t,null)),"data-testid":"registration-checkbox-insights",isChecked:"register-now-insights"===d||"register-now-rhc"===d,onChange:function(e,t){o(s.name,t?"register-now-insights":"register-now")},id:"register-system-now-insights",name:"register-system-insights",body:u().createElement(E.Checkbox,{label:u().createElement(u().Fragment,null,"Enable remote remediations and system management with automation",u().createElement(Ct,null)),"data-testid":"registration-checkbox-rhc",isChecked:"register-now-rhc"===d,onChange:function(e,t){o(s.name,t?"register-now-rhc":"register-now-insights")},id:"register-system-now-rhc",name:"register-system-rhc"})})}),u().createElement(E.Radio,{name:"register-system",className:"pf-u-mt-md","data-testid":"registration-radio-later",id:"register-system-later",label:"Register later",isChecked:"register-later"===d,onChange:function(){f(!1),o(s.name,"register-later")}}))}))};At.propTypes={label:T().node};const Ot=At;var Zt=n(21551);const Rt=function(){var e,t,n,a,i,r,o,l,s,u,d,m,p=(0,D.XQ)().getState,g=(0,c.useContext)(Fe.default).currentStep,v=null===(t=null===(e=p())||void 0===e?void 0:e.values)||void 0===t?void 0:t["subscription-activation-key"],f=(0,C.M2)({name:v},{skip:!v}),h=f.data,b=f.isFetching,y=f.isSuccess,x=f.isError;return(0,Ae.jsxs)(Ae.Fragment,{children:[b&&(0,Ae.jsx)(E.Spinner,{size:"lg"}),y&&(0,Ae.jsx)(E.TextContent,{children:(0,Ae.jsxs)(E.TextList,{component:E.TextListVariants.dl,children:[(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,children:"Name:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:v}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,children:"Role:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:(null===(n=h.body)||void 0===n?void 0:n.role)||"Not defined"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,children:"SLA:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:(null===(a=h.body)||void 0===a?void 0:a.serviceLevel)||"Not defined"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,children:"Usage:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:(null===(i=h.body)||void 0===i?void 0:i.usage)||"Not defined"}),(0,Ae.jsxs)(E.TextListItem,{component:E.TextListItemVariants.dt,children:["Additional repositories:",(0,Ae.jsx)(E.Popover,{bodyContent:(0,Ae.jsx)(E.TextContent,{children:(0,Ae.jsx)(E.Text,{children:"The core repositories for your operating system version are always enabled and do not need to be explicitly added to the activation key."})}),children:(0,Ae.jsx)(E.Button,{variant:"plain","aria-label":"About additional repositories",className:"pf-u-pl-sm pf-u-pt-0 pf-u-pb-0",size:"sm",children:(0,Ae.jsx)(Oe.by,{})})})]}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,className:"pf-u-display-flex pf-u-align-items-flex-end",children:(null===(r=h.body)||void 0===r?void 0:r.additionalRepositories)&&(null===(l=null===(o=h.body)||void 0===o?void 0:o.additionalRepositories)||void 0===l?void 0:l.length)>0?(0,Ae.jsx)(E.Popover,{bodyContent:(0,Ae.jsxs)(E.TextContent,{children:[(0,Ae.jsx)(E.Text,{component:E.TextVariants.h3,children:"Additional repositories"}),(0,Ae.jsxs)(ce.Table,{"aria-label":"Additional repositories table",variant:"compact",children:[(0,Ae.jsx)(ce.Thead,{children:(0,Ae.jsx)(ce.Tr,{children:(0,Ae.jsx)(ce.Th,{children:"Name"})})}),(0,Ae.jsx)(ce.Tbody,{"data-testid":"additional-repositories-table",children:null===(u=null===(s=h.body)||void 0===s?void 0:s.additionalRepositories)||void 0===u?void 0:u.map((function(e,t){return(0,Ae.jsx)(ce.Tr,{children:(0,Ae.jsx)(ce.Td,{children:e.repositoryLabel})},t)}))})]})]}),children:(0,Ae.jsxs)(E.Button,{"data-testid":"repositories-popover-button",variant:"link","aria-label":"Show additional repositories",className:"pf-u-pl-0 pf-u-pt-0 pf-u-pb-0",children:[null===(m=null===(d=h.body)||void 0===d?void 0:d.additionalRepositories)||void 0===m?void 0:m.length," ","repositories"]})}):"None"})]})}),x&&(0,Ae.jsx)(E.TextContent,{children:(0,Ae.jsxs)(E.TextList,{component:E.TextListVariants.dl,children:[(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dt,children:"Name:"}),(0,Ae.jsx)(E.TextListItem,{component:E.TextListItemVariants.dd,children:v})]})}),x&&"registration"===g.name&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)("br",{}),(0,Ae.jsx)(E.Alert,{title:"Information about the activation key unavailable",variant:"danger",isPlain:!0,isInline:!0,children:"Information about the activation key cannot be loaded. Please check the key was not removed and try again later."})]})]})};var Nt=function(e){var t=e.label,n=e.valueReference;return u().createElement(D.lP,null,(function(e){var a=e.values;return(0,Zt.isEmpty)(a[n])?null:u().createElement(E.FormGroup,{label:t},u().createElement(Rt,null))}))};Nt.propTypes={label:T().node,valueReference:T().node};const Dt=Nt;var Ft=n(15265),Vt=n(23148),Bt=n(97282),qt=n(26495),Mt=(n(86961),function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,i,r=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)o.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return o});Vt.kL.register(Bt.Z),Vt.kL.register.apply(Vt.kL,function(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}([],Mt(Vt.zX),!1));var Gt=(new Date).toString(),Wt={data:{labels:["RHEL 9","RHEL 8"],datasets:[{label:"Full support",backgroundColor:"#0066CC",data:[{x:F.IS,y:"RHEL 9"},{x:F.ky,y:"RHEL 8"}]},{label:"Maintenance support",backgroundColor:"#8BC1F7",data:[{x:F.Xi,y:"RHEL 9"},{x:F.VL,y:"RHEL 8"}]}]},options:{indexAxis:"y",scales:{x:{type:"time",time:{unit:"year"},min:"2019-01-01",max:"2033-01-01"},y:{stacked:!0}},responsive:!0,maintainAspectRatio:!0,aspectRatio:5,plugins:{tooltip:{enabled:!1},legend:{position:"bottom"},annotation:{annotations:{today:{type:"line",xMin:Gt,xMax:Gt,borderColor:"black",borderWidth:2,borderDash:[8,2]}}}}}},Ut=function(){return(0,Ae.jsx)(E.Panel,{children:(0,Ae.jsx)(E.PanelMain,{maxHeight:"10rem",children:(0,Ae.jsx)(qt.$Q,{"data-testid":"release-lifecycle-chart",options:Wt.options,data:Wt.data})})})};const Xt=function(){var e=(0,D.XQ)().getState,t=(0,c.useContext)(Fe.default).currentStep,n=e().values.release,a=Mt(u().useState(!0),2),i=a[0],r=a[1];if(n===F.F2){if("image-output"===t.name)return(0,Ae.jsxs)(E.ExpandableSection,{toggleText:i?"Hide information about release lifecycle":"Show information about release lifecycle",onToggle:function(e,t){r(t)},isExpanded:i,isIndented:!0,children:[(0,Ae.jsx)(E.FormGroup,{label:"Release lifecycle",children:(0,Ae.jsx)(Ut,{})}),(0,Ae.jsx)("br",{}),(0,Ae.jsx)(E.Button,{component:"a",target:"_blank",variant:"link",icon:(0,Ae.jsx)(Ft.LA,{}),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/support/policy/updates/errata",children:"View Red Hat Enterprise Linux Life Cycle dates"})]});if("review"===t.name)return(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)(E.Text,{className:"pf-v5-u-font-size-sm",children:[F.rh.get(n)," will be supported through"," ",(0,Pe.BU)(F.ky[0]),", with optional ELS support through ",(0,Pe.BU)(F.VL[0]),". Consider building an image with ",F.rh.get(F.PV)," to extend the support period."]}),(0,Ae.jsx)(E.FormGroup,{label:"Release lifecycle",children:(0,Ae.jsx)(Ut,{})}),(0,Ae.jsx)("br",{})]})}};var Ht=n(85044),Qt=n(79332),$t=n(52317),Kt=n(65146),Yt=n(82342),Jt=n(68778),en=n(43047),tn=n(69957),nn=n(94768),an=function(e){var t=Date.now(),n=(0,Pe.YM)(e),a=Math.floor((t-n)/1e3);return a<=60?"A few seconds ago":a<=3600?"A few minutes ago":a<=86400?"A few hours ago":(0,Pe.x5)(e)};const rn=function(e){var t=e.repoStatus,n=e.repoUrl,a=e.repoIntrospections,i=e.repoFailCount,r=(0,A.M)().isBeta;return"Valid"===t?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(Jt.rE,{className:"success"})," ",t]}):"Invalid"===t||"Unavailable"===t?(0,Ae.jsx)(Ae.Fragment,{children:(0,Ae.jsx)(E.Popover,{position:"bottom",minWidth:"30rem",bodyContent:(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(E.Alert,{variant:"Invalid"===t?"danger":"warning",title:t,className:"pf-u-pb-sm",isInline:!0,isPlain:!0}),(0,Ae.jsxs)("p",{className:"pf-u-pb-md",children:["Cannot fetch ",n]}),(a||i)&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsxs)(E.DescriptionList,{columnModifier:{default:"2Col"},children:[a&&(0,Ae.jsxs)(E.DescriptionListGroup,{children:[(0,Ae.jsx)(E.DescriptionListTerm,{children:"Last introspection"}),(0,Ae.jsx)(E.DescriptionListDescription,{children:an(a)})]}),i&&(0,Ae.jsxs)(E.DescriptionListGroup,{children:[(0,Ae.jsx)(E.DescriptionListTerm,{children:"Failed attempts"}),(0,Ae.jsx)(E.DescriptionListDescription,{children:i})]})]}),(0,Ae.jsx)("br",{})]}),(0,Ae.jsx)(E.Button,{component:"a",target:"_blank",variant:"link",iconPosition:"right",isInline:!0,icon:(0,Ae.jsx)(Ft.LA,{}),href:r()?"/preview/settings/content":"/settings/content",children:"Go to Repositories"})]}),children:(0,Ae.jsxs)(E.Button,{variant:"link",className:"pf-u-p-0 pf-u-font-size-sm",children:["Invalid"===t&&(0,Ae.jsx)(en.$O,{className:"error"}),"Unavailable"===t&&(0,Ae.jsx)(tn.LP,{className:"expiring"})," ",(0,Ae.jsx)("span",{className:"failure-button",children:t})]})})}):"Pending"===t?(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(nn.pG,{className:"pending"})," ",t]}):void 0},on=function(){var e=(0,A.M)().isBeta;return Xe()?u().createElement(E.Alert,{variant:"warning",title:"Previously added custom repository unavailable",isInline:!0},"A repository that was used to build this image previously is not available. Address the error found in the last introspection and validate that the repository is still accessible.",u().createElement("br",null),u().createElement("br",null),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",iconPosition:"right",isInline:!0,icon:u().createElement(te.ZP,null),href:e()?"/preview/settings/content":"/settings/content"},"Go to Repositories")):void 0};function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return un(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?un(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function un(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var dn=function(e){var t=e.selected,n=e.count,a=e.filteredCount,r=e.perPage,o=e.handleSelectAll,l=e.handleSelectPage,s=e.handleDeselectAll,d=e.isDisabled,m=(0,c.useState)(!1),p=(0,i.Z)(m,2),g=p[0],v=p[1],f=t.length,h=f>0,b=!!(0!==n?f===n:void 0)||!!h&&null,y=[u().createElement(Ht.h,{key:"none",onClick:s},"Select none (0 items)"),u().createElement(Ht.h,{key:"page",onClick:l},"Select page (".concat(r>a?a:r," items)")),u().createElement(Ht.h,{key:"all",onClick:o},"Select all (".concat(n," items)"))];return u().createElement(Qt.L,{onSelect:function(){},toggle:u().createElement($t.Z,{id:"stacked-example-toggle",isDisabled:d,splitButtonItems:[u().createElement(Kt.o,{id:"example-checkbox-1",key:"split-checkbox","aria-label":"Select all",isChecked:b,onClick:function(){h?s():o()}})],onToggle:function(){return v(!g)}},0!==f?"".concat(f," selected"):null),isOpen:g,dropdownItems:y})},mn=function(e){var t={url:e.baseurl,rhsm:!1};return e.gpgkey&&(t.gpg_key=e.gpgkey,t.metadata_verification=e.check_repo_gpg),t},pn=function(){return u().createElement(E.Alert,{title:"Repositories unavailable",variant:"danger",isPlain:!0,isInline:!0},"Repositories cannot be reached, try again later.")},gn=function(){return u().createElement(E.EmptyState,null,u().createElement(E.EmptyStateHeader,{titleText:"Loading",icon:u().createElement(E.EmptyStateIcon,{icon:E.Spinner}),headingLevel:"h4"}))},vn=function(e){var t=e.isFetching,n=e.refetch,a=(0,A.M)().isBeta;return u().createElement(E.EmptyState,{variant:E.EmptyStateVariant.lg,"data-testid":"empty-state"},u().createElement(E.EmptyStateHeader,{titleText:"No Custom Repositories",icon:u().createElement(E.EmptyStateIcon,{icon:Yt.ZP}),headingLevel:"h4"}),u().createElement(E.EmptyStateBody,null,'Repositories can be added in the "Repositories" area of the console. Once added, refresh this page to see them.'),u().createElement(E.EmptyStateFooter,null,u().createElement(E.Button,{variant:"primary",component:"a",target:"_blank",href:a()?"/preview/settings/content":"/settings/content",className:"pf-u-mr-sm"},"Go to repositories"),u().createElement(E.Button,{variant:"secondary",isInline:!0,onClick:function(){return n()},isLoading:t},t?"Refreshing":"Refresh")))};dn.propTypes={selected:T().array,count:T().number,filteredCount:T().number,perPage:T().number,handleSelectAll:T().func,handleSelectPage:T().func,handleDeselectAll:T().func,isDisabled:T().bool},vn.propTypes={isFetching:T().bool,refetch:T().func};const fn=function(e){var t,n,a,r,l,s,d=(0,D.XQ)(),m=d.getState,p=d.change,g=(0,D.CP)(e).input,v=(0,c.useState)(""),f=(0,i.Z)(v,2),h=f[0],b=f[1],y=(0,c.useState)(10),x=(0,i.Z)(y,2),T=x[0],w=x[1],S=(0,c.useState)(1),k=(0,i.Z)(S,2),I=k[0],j=k[1],L=(0,c.useState)("toggle-group-all"),P=(0,i.Z)(L,2),z=P[0],_=P[1],C=(0,c.useState)(null!==(t=m())&&void 0!==t&&null!==(t=t.values)&&void 0!==t&&t["payload-repositories"]?m().values["payload-repositories"].map((function(e){return e.baseurl})):[]),A=(0,i.Z)(C,2),O=A[0],Z=A[1],R=null===(n=m().values)||void 0===n?void 0:n.arch,N=null===(a=m().values)||void 0===a?void 0:a.release,F=Me(N),V=(0,qe.UQ)({availableForArch:R,availableForVersion:F,contentType:"rpm",origin:"external",limit:100,offset:0},{refetchOnMountOrArgChange:!0}),B=void 0===(null==V||null===(r=V.data)||void 0===r||null===(r=r.meta)||void 0===r?void 0:r.count)||(null==V||null===(l=V.data)||void 0===l||null===(l=l.meta)||void 0===l?void 0:l.count)<=100,q=(0,qe.UQ)({availableForArch:R,availableForVersion:F,contentType:"rpm",origin:"external",limit:null==V||null===(s=V.data)||void 0===s||null===(s=s.meta)||void 0===s?void 0:s.count,offset:0},{refetchOnMountOrArgChange:!0,skip:B}),M=(0,c.useMemo)((function(){var e;return(null==V||null===(e=V.data)||void 0===e||null===(e=e.meta)||void 0===e?void 0:e.count)>100?sn({},q):sn({},V)}),[V,q]),G=M.data,W=M.isError,U=M.isFetching,X=M.isLoading,H=M.isSuccess,Q=M.refetch,$=(0,c.useMemo)((function(){return G?function(e){var t,n=e.reduce((function(e,t){return e[t.url]=t,e}),{}),a=null===(t=m())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["original-payload-repositories"],i=a?function(e,t){var n,a={},i=cn(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;a[r.baseurl]=mn(r),a[r.baseurl].name=""}}catch(e){i.e(e)}finally{i.f()}return sn(sn({},a),e)}(n,a):n;return i}(G.data):{}}),[V.data,q.data]),K=function(e){var t=e.currentTarget.id;j(1),_(t)},Y=function(e){return O.includes(e)},J=(0,c.useMemo)((function(){var e=Object.values($).filter((function(e){return e.name.toLowerCase().includes(h.toLowerCase())}));return"toggle-group-all"===z?e.map((function(e){return e.url})):"toggle-group-selected"===z?e.filter((function(e){return Y(e.url)})).map((function(e){return e.url})):void 0}),[h,$,z]),ee=function(e){Z(e),function(e){var t,n=[],a=cn(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;n.push($[i])}}catch(e){a.e(e)}finally{a.f()}var r=n.map((function(e){return function(e){var t={baseurl:e.url,rhsm:!1,check_gpg:!1};return e.gpg_key&&(t.gpgkey=e.gpg_key,t.check_gpg=!0,t.check_repo_gpg=e.metadata_verification),t}(e)})),o=n.map((function(e){return function(e){var t={id:e.uuid,name:e.name,baseurl:[e.url],check_gpg:!1};return e.gpg_key&&(t.gpgkey=[e.gpg_key],t.check_gpg=!0,t.check_repo_gpg=e.metadata_verification),t}(e)}));g.onChange(r),p("custom-repositories",o)}(e)},ne=function(){return T*(I-1)},ae=function(){return T*I};return W&&u().createElement(pn,null)||X&&u().createElement(gn,null)||H&&u().createElement(u().Fragment,null,0===Object.values($).length?u().createElement(vn,{refetch:Q,isFetching:U}):u().createElement(u().Fragment,null,u().createElement(E.Toolbar,null,u().createElement(E.ToolbarContent,null,u().createElement(E.ToolbarItem,{variant:"bulk-select"},u().createElement(dn,{selected:O,count:Object.values($).length,filteredCount:J.length,perPage:T,handleSelectAll:function(){ee(Object.keys($))},handleSelectPage:function(){var e=J.slice(ne(),ae()),t=(0,o.Z)(e.filter((function(e){return!O.includes(e)})));ee([].concat((0,o.Z)(O),(0,o.Z)(t)))},handleDeselectAll:function(){ee([])},isDisabled:U})),u().createElement(E.ToolbarItem,{variant:"search-filter"},u().createElement(E.SearchInput,{"aria-label":"Search repositories",onChange:function(e,t){j(1),b(t)},value:h,onClear:function(){b("")}})),u().createElement(E.ToolbarItem,null,u().createElement(E.Button,{variant:"primary",isInline:!0,onClick:function(){return Q()},isLoading:U},U?"Refreshing":"Refresh")),u().createElement(E.ToolbarItem,null,u().createElement(E.ToggleGroup,{"aria-label":"Filter repositories list"},u().createElement(E.ToggleGroupItem,{text:"All","aria-label":"All repositories",buttonId:"toggle-group-all",isSelected:"toggle-group-all"===z,onChange:K}),u().createElement(E.ToggleGroupItem,{text:"Selected","aria-label":"Selected repositories",buttonId:"toggle-group-selected",isSelected:"toggle-group-selected"===z,onChange:K}))),u().createElement(E.ToolbarItem,{variant:"pagination"},u().createElement(E.Pagination,{itemCount:J.length,perPage:T,page:I,onSetPage:function(e,t){j(t)},widgetId:"compact-example",onPerPageSelect:function(e,t,n){w(t),j(n)},isCompact:!0})))),u().createElement(E.Panel,null,u().createElement(E.PanelMain,null,u().createElement(on,null),u().createElement(ce.Table,{variant:"compact","data-testid":"repositories-table"},u().createElement(ce.Thead,null,u().createElement(ce.Tr,null,u().createElement(ce.Th,null),u().createElement(ce.Th,{width:45},"Name"),u().createElement(ce.Th,{width:15},"Architecture"),u().createElement(ce.Th,null,"Version"),u().createElement(ce.Th,{width:10},"Packages"),u().createElement(ce.Th,null,"Status"))),u().createElement(ce.Tbody,null,J.sort((function(e,t){return $[e].name<$[t].name?-1:$[t].name<$[e].name?1:0})).slice(ne(),ae()).map((function(e,t){var n=$[e],a=!!n.name;return u().createElement(ce.Tr,{key:n.url},u().createElement(ce.Td,{select:{isSelected:Y(n.url),rowIndex:t,onSelect:function(e,t){return function(e,t,n){!0===n?ee([].concat((0,o.Z)(O),[e])):!1===n&&ee(O.filter((function(t){return t!==e})))}(n.url,0,t)},isDisabled:U||"Valid"!==n.status}}),u().createElement(ce.Td,{dataLabel:"Name"},a?n.name:"Repository with the following url is no longer available:",u().createElement("br",null),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:n.url},n.url)),u().createElement(ce.Td,{dataLabel:"Architecture"},a?n.distribution_arch:"-"),u().createElement(ce.Td,{dataLabel:"Version"},a?n.distribution_versions:"-"),u().createElement(ce.Td,{dataLabel:"Packages"},a?n.package_count:"-"),u().createElement(ce.Td,{dataLabel:"Status"},u().createElement(rn,{repoStatus:a?n.status:"Unavailable",repoUrl:n.url,repoIntrospections:n.last_introspection_time,repoFailCount:n.failed_introspections_count})))}))))))))};var hn=n(55140),bn=n(19694),yn=function(e){var t,n=e.sourceId,a=(0,G.ag)({id:n}).data;return(0,Ae.jsx)(Ae.Fragment,{children:null===(t=null==a?void 0:a.aws)||void 0===t?void 0:t.account_id})},En=function(e){var t,n,a,i=e.repoUrl,r=(0,qe.UQ)({url:i,contentType:"rpm",origin:"external"}),o=r.data,l=r.isSuccess,s=r.isFetching,c=r.isError,d=function(){return u().createElement(E.Alert,{variant:"danger",isInline:!0,isPlain:!0,title:"Error loading repository name"})};return u().createElement(u().Fragment,null,l&&(null===(t=o.data)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.name)&&u().createElement("p",null,null===(n=o.data)||void 0===n?void 0:n[0].name),l&&!(null!==(a=o.data)&&void 0!==a&&null!==(a=a[0])&&void 0!==a&&a.name)&&d(),s&&u().createElement(E.Spinner,{size:"md"}),c&&d())},xn=function(){var e=(0,(0,D.XQ)().getState)().values["file-system-configuration"];return u().createElement(E.Panel,{isScrollable:!0},u().createElement(E.PanelMain,{maxHeight:"30ch"},u().createElement(ce.Table,{"aria-label":"File system configuration table",variant:"compact"},u().createElement(ce.Thead,null,u().createElement(ce.Tr,null,u().createElement(ce.Th,null,"Mount point"),u().createElement(ce.Th,null,"File system type"),u().createElement(ce.Th,null,"Minimum size"))),u().createElement(ce.Tbody,{"data-testid":"file-system-configuration-tbody-review"},e.map((function(e,t){return u().createElement(ce.Tr,{key:t},u().createElement(ce.Td,{className:"pf-m-width-30"},e.mountpoint),u().createElement(ce.Td,{className:"pf-m-width-30"},"xfs"),u().createElement(ce.Td,{className:"pf-m-width-30"},e.size," ",e.unit===F.at?"GiB":e.unit===F.g7?"MiB":"KiB"))}))))))},Tn=function(){var e,t=null===(e=(0,(0,D.XQ)().getState)())||void 0===e?void 0:e.values["selected-packages"];return u().createElement(E.Panel,{isScrollable:!0},u().createElement(E.PanelMain,{maxHeight:"30ch"},u().createElement(ce.Table,{"aria-label":"Packages table",variant:"compact"},u().createElement(ce.Thead,null,u().createElement(ce.Tr,null,u().createElement(ce.Th,null,"Name"))),u().createElement(ce.Tbody,{"data-testid":"packages-tbody-review"},t.map((function(e,t){return u().createElement(ce.Tr,{key:t},u().createElement(ce.Td,{className:"pf-m-width-30"},e.name))}))))))},wn=function(){var e,t=null===(e=(0,(0,D.XQ)().getState)())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["payload-repositories"];return u().createElement(E.Panel,{isScrollable:!0},u().createElement(E.PanelMain,{maxHeight:"30ch"},u().createElement(ce.Table,{"aria-label":"Custom repositories table",variant:"compact"},u().createElement(ce.Thead,null,u().createElement(ce.Tr,null,u().createElement(ce.Th,null,"Name"))),u().createElement(ce.Tbody,{"data-testid":"repositories-tbody-review"},t.map((function(e,t){return u().createElement(ce.Tr,{key:t},u().createElement(ce.Td,{className:"pf-m-width-60"},u().createElement(En,{repoUrl:e.baseurl})))}))))))};En.propTypes={repoUrl:T().string};const Sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e["target-environment"],n=e.release,a=e.enableOscap,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.skipAws,o=i.skipGoogle,l=i.skipAzure;return!r&&null!=t&&t.aws?"aws-target-env":!o&&null!=t&&t.gcp?"google-cloud-target-env":!l&&null!=t&&t.azure?"ms-azure-target-env":(0,Le.Z)(n)?"registration":a?"Compliance":"File system configuration"};var kn={googleAccount:"Google account",serviceAccount:"Service account",googleGroup:"Google group",domain:"Domain"},In=function(e){var t=e.appendTo;return u().createElement(E.Popover,{appendTo:t,hasAutoWidth:!0,maxWidth:"35rem",headerContent:"Valid account types",flipBehavior:["right","bottom","top","left"],bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"The following account types can have an image shared with them:"),u().createElement(E.TextList,{className:"pf-u-ml-0"},u().createElement(E.TextListItem,null,u().createElement("strong",null,"Google account:")," A Google account represents a developer, an administrator, or any other person who interacts with Google Cloud. For example: ",u().createElement("em",null,"`alice@gmail.com`"),"."),u().createElement(E.TextListItem,null,u().createElement("strong",null,"Service account:")," A service account is an account for an application instead of an individual end user. For example:"," ",u().createElement("em",null,"`myapp@appspot.gserviceaccount.com`"),"."),u().createElement(E.TextListItem,null,u().createElement("strong",null,"Google group:")," A Google group is a named collection of Google accounts and service accounts. For example:"," ",u().createElement("em",null,"`admins@example.com`"),"."),u().createElement(E.TextListItem,null,u().createElement("strong",null,"Google Workspace domain or Cloud Identity domain:")," ","A Google workspace or cloud identity domain represents a virtual group of all the Google accounts in an organization. These domains represent your organization's internet domain name. For example: ",u().createElement("em",null,"`mycompany.com`"),".")))},u().createElement(E.Button,{variant:"plain","aria-label":"Account info","aria-describedby":"google-account-type",className:"pf-c-form__group-label-help"},u().createElement(re.ZP,null)))};In.propTypes={appendTo:T().any};const jn={StepTemplate:De,id:"wizard-target-gcp",title:"Google Cloud Platform",customTitle:u().createElement(E.Title,{headingLevel:"h1",size:"xl"},"Target environment - Google Cloud Platform"),name:"google-cloud-target-env",substepOf:"Target environment",nextStep:function(e){var t=e.values;return Sn(t,{skipGoogle:!0,skipAws:!0})},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"google-cloud-text-component",label:u().createElement("p",null,"Select how to share your image. The image you create can be used to launch instances on GCP, regardless of which method you select.")},{component:d.Z.RADIO,label:"Select image sharing",isRequired:!0,name:"image-sharing",initialValue:"gcp-account",autoFocus:!0,options:[{label:"Share image with a Google account","data-testid":"account-sharing",autoFocus:!0,description:u().createElement("p",null,"Your image will be uploaded to GCP and shared with the account you provide below.",u().createElement("b",null,"The image expires in 14 days.")," To keep permanent access to your image, copy it to your GCP project."),value:"gcp-account"},{label:"Share image with Red Hat Insights only","data-testid":"insights-only-sharing",description:u().createElement("p",null,"Your image will be uploaded to GCP and shared with Red Hat Insights.",u().createElement("b",null," The image expires in 14 days.")," You cannot access or recreate this image in your GCP project."),value:"insights",autoFocus:!0}]},{component:"radio-popover",label:"Account type",isRequired:!0,Popover:In,name:"google-account-type",initialValue:"googleAccount",options:Object.entries(kn).map((function(e){var t=(0,i.Z)(e,2),n=t[0],a=t[1];return{label:"domain"===n?"Google Workspace domain or Cloud Identity domain":a,value:n,autoFocus:"googleAccount"===n}})),validate:[{type:Re.Z.REQUIRED}],condition:{when:"image-sharing",is:"gcp-account"}},{component:d.Z.TEXT_FIELD,name:"google-email","data-testid":"input-google-email",type:"text",label:"Principal (e.g. e-mail address)",condition:{and:[{when:"image-sharing",is:"gcp-account"},{or:[{when:"google-account-type",is:"googleAccount"},{when:"google-account-type",is:"serviceAccount"},{when:"google-account-type",is:"googleGroup"},{when:"google-account-type",is:null}]}]},isRequired:!0,validate:[{type:Re.Z.REQUIRED},{type:Re.Z.PATTERN,pattern:"^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,}$",message:"Please enter a valid email address"}]},{component:d.Z.TEXT_FIELD,name:"google-domain",type:"text",label:"Domain",condition:{and:[{when:"image-sharing",is:"gcp-account"},{when:"google-account-type",is:"domain"}]},isRequired:!0,validate:[{type:Re.Z.REQUIRED}]}]};function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Pn=function(){return u().createElement("div",{className:"pf-u-mr-sm pf-u-font-size-sm pf-u-warning-color-100"},u().createElement(bn.ZP,null)," Expires 14 days after creation")},zn=function(){var e,t,n=(0,D.XQ)().getState;return u().createElement(E.TextContent,null,u().createElement(Xt,null),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Release"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},F.rh.get(null===(e=n())||void 0===e||null===(e=e.values)||void 0===e?void 0:e.release)),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Architecture"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null===(t=n())||void 0===t||null===(t=t.values)||void 0===t?void 0:t.arch)),u().createElement("br",null))},_n=function(){var e,t,n,a,i,r,o,l,s=(0,G.w6)({provider:"aws"}),c=s.data,d=s.isSuccess,m=(0,M.j)(c),p=(0,A.M)().isBeta,g=(0,D.XQ)().getState;return u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"AWS"),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Image type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"Red Hat hosted image",u().createElement("br",null),u().createElement(Pn,null)),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Shared to account"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},!p()&&(null===(e=g())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["aws-account-id"]),p()&&"aws-target-type-source"===(null===(t=g())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["aws-target-type"])&&d&&u().createElement(yn,{sourceId:null===(n=g())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["aws-sources-select"]}),p()&&"aws-target-type-account-id"===(null===(a=g())||void 0===a||null===(a=a.values)||void 0===a?void 0:a["aws-target-type"])&&(null===(i=g())||void 0===i||null===(i=i.values)||void 0===i?void 0:i["aws-account-id"])),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"aws-target-type-source"===(null===(r=g())||void 0===r||null===(r=r.values)||void 0===r?void 0:r["aws-target-type"])?"Source":null),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},d&&"aws-target-type-source"===(null===(o=g())||void 0===o||null===(o=o.values)||void 0===o?void 0:o["aws-target-type"])?null===(l=m.find((function(e){var t;return e.id===(null===(t=g())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["aws-sources-select"])})))||void 0===l?void 0:l.name:null),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Default region"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"us-east-1")),u().createElement("br",null))},Cn=function(){var e,t,n,a,i=(0,D.XQ)().getState;return u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"GCP"),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Image type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"Red Hat hosted image",u().createElement("br",null),u().createElement(Pn,null)),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Account type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null==kn?void 0:kn[null===(e=i())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["google-account-type"]]),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Domain"===(null==kn?void 0:kn[null===(t=i())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["google-account-type"]])?"Domain":"Principal"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},(null===(n=i())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["google-email"])||(null===(a=i())||void 0===a||null===(a=a.values)||void 0===a?void 0:a["google-domain"]))),u().createElement("br",null))},An=function(){var e,t,n,a,i,r,o=(0,D.XQ)().getState,l=(0,G.w6)({provider:"azure"}),s=l.data,c=l.isSuccess,d=(0,M.j)(s);return u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Microsoft Azure"),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Image type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"Red Hat hosted image",u().createElement("br",null),u().createElement(Pn,null)),"azure-type-source"===(null===(e=o())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["azure-type"])&&c&&u().createElement(u().Fragment,null,u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Azure Source"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null===(t=d.find((function(e){var t;return e.id===(null===(t=o())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["azure-sources-select"])})))||void 0===t?void 0:t.name)),"azure-type-manual"===(null===(n=o())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["azure-type"])&&u().createElement(u().Fragment,null,u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Azure Tenant ID"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null===(a=o())||void 0===a||null===(a=a.values)||void 0===a?void 0:a["azure-tenant-id"]),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Subscription ID"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null===(i=o())||void 0===i||null===(i=i.values)||void 0===i?void 0:i["azure-subscription-id"])),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Resource group"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null===(r=o())||void 0===r||null===(r=r.values)||void 0===r?void 0:r["azure-resource-group"])),u().createElement("br",null))},On=function(){return u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Oracle Cloud Infrastructure"),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Object Storage URL"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"The URL for the built image will be ready to copy",u().createElement("br",null))),u().createElement("br",null))},Zn=function(){return u().createElement(u().Fragment,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Image type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"Built image will be available for download")),u().createElement("br",null))},Rn=function(){var e,t,n=(0,D.XQ)().getState,a="manual"===(null===(e=n())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["file-system-config-radio"]),i=null===(t=n())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["file-system-configuration"];return u().createElement(E.TextContent,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Configuration type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd,"data-testid":"partitioning-auto-manual"},a?"Manual":"Automatic",a&&u().createElement(u().Fragment,null," ",u().createElement(E.Popover,{position:"bottom",headerContent:"Partitions",hasAutoWidth:!0,minWidth:"30rem",bodyContent:u().createElement(xn,null)},u().createElement(E.Button,{"data-testid":"file-system-configuration-popover",variant:"link","aria-label":"File system configuration info","aria-describedby":"file-system-configuration-info",className:"pf-u-pt-0 pf-u-pb-0"},"View partitions")))),a&&u().createElement(u().Fragment,null,u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Image size (minimum)",u().createElement(E.Popover,{hasAutoWidth:!0,bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Image Builder may extend this size based on requirements, selected packages, and configurations."))},u().createElement(E.Button,{variant:"plain","aria-label":"File system configuration info","aria-describedby":"file-system-configuration-info",className:"pf-c-form__group-label-help"},u().createElement(re.ZP,null)))),u().createElement(Nn,{isManual:a,partitions:i}))),u().createElement("br",null))},Nn=function(e){var t=e.isManual,n=e.partitions,a="";if(t&&n){var i,r=0,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}(n);try{for(o.s();!(i=o.n()).done;){var l=i.value;r+=l.size*l.unit}}catch(e){o.e(e)}finally{o.f()}a=(r=(r/F.at).toFixed(1))<1?"Less than 1 GiB":"".concat(r," GiB")}return u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd}," ",a," ")};Nn.propTypes={isManual:T().bool,partitions:T().arrayOf(T().object)};var Dn=function(){var e,t,n,a,i=(0,D.XQ)().getState;return u().createElement(E.TextContent,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Additional Red Hat",u().createElement("br",null),"and 3rd party packages"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd,"data-testid":"chosen-packages-count"},(null===(e=i())||void 0===e||null===(e=e.values)||void 0===e||null===(e=e["selected-packages"])||void 0===e?void 0:e.length)>0?u().createElement(E.Popover,{position:"bottom",headerContent:"Additional packages",hasAutoWidth:!0,minWidth:"30rem",bodyContent:u().createElement(Tn,null)},u().createElement(E.Button,{variant:"link","aria-label":"About packages key",className:"pf-u-p-0"},null===(t=i())||void 0===t||null===(t=t.values)||void 0===t||null===(t=t["selected-packages"])||void 0===t?void 0:t.length)):0),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Custom repositories"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd,"data-testid":"custom-repositories-count"},(null===(n=i())||void 0===n||null===(n=n.values)||void 0===n||null===(n=n["payload-repositories"])||void 0===n?void 0:n.length)>0?u().createElement(E.Popover,{position:"bottom",headerContent:"Custom repositories",hasAutoWidth:!0,minWidth:"30rem",bodyContent:u().createElement(wn,null)},u().createElement(E.Button,{variant:"link","aria-label":"About custom repositories",className:"pf-u-p-0"},(null===(a=i())||void 0===a||null===(a=a.values)||void 0===a||null===(a=a["payload-repositories"])||void 0===a?void 0:a.length)||0)):0)),u().createElement("br",null))},Fn=function(){return u().createElement(E.TextContent,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Registration type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},"Register the system later")),u().createElement("br",null))},Vn=function(){var e,t,n,a,i,r,o,l=(0,D.XQ)().getState,s=null===(e=l())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["subscription-activation-key"],c=(0,C.M2)({name:s},{skip:!s}).isError;return u().createElement(u().Fragment,null,u().createElement(E.TextContent,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Registration type"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd,"data-testid":"review-registration"},u().createElement(E.TextList,{isPlain:!0},(null===(t=l())||void 0===t||null===(t=t.values)||void 0===t||null===(t=t["register-system"])||void 0===t?void 0:t.startsWith("register-now"))&&u().createElement(E.TextListItem,null,"Register with Red Hat Subscription Manager (RHSM)",u().createElement("br",null)),("register-now-insights"===(null===(n=l())||void 0===n||null===(n=n.values)||void 0===n?void 0:n["register-system"])||"register-now-rhc"===(null===(a=l())||void 0===a||null===(a=a.values)||void 0===a?void 0:a["register-system"]))&&u().createElement(E.TextListItem,null,"Connect to Red Hat Insights",u().createElement("br",null)),"register-now-rhc"===(null===(i=l())||void 0===i||null===(i=i.values)||void 0===i?void 0:i["register-system"])&&u().createElement(E.TextListItem,null,"Use remote host configuration (rhc) utility",u().createElement("br",null)))),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt},"Activation key",u().createElement(E.Popover,{bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Activation keys enable you to register a system with appropriate subscriptions, system purpose, and repositories attached.",u().createElement("br",null),u().createElement("br",null),"If using an activation key with command line registration, you must provide your organization's ID. Your organization's ID is"," ",void 0!==(null===(r=l())||void 0===r||null===(r=r.values)||void 0===r?void 0:r["subscription-organization-id"])?null===(o=l())||void 0===o||null===(o=o.values)||void 0===o?void 0:o["subscription-organization-id"]:u().createElement(E.Spinner,{size:"md"})))},u().createElement(E.Button,{variant:"plain","aria-label":"About activation key",className:"pf-u-pl-sm pf-u-pt-0 pf-u-pb-0",size:"sm"},u().createElement(re.ZP,null)))),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},u().createElement(Rt,null))),u().createElement("br",null)),c&&u().createElement(E.Alert,{title:"Information about the activation key unavailable",variant:"danger",isPlain:!0,isInline:!0},"Information about the activation key cannot be loaded. Please check the key was not removed and try again later."))},Bn=function(){var e,t,n=(0,D.XQ)().getState,a=null===(e=n())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["image-name"],i=null===(t=n())||void 0===t||null===(t=t.values)||void 0===t?void 0:t["image-description"];return u().createElement(E.TextContent,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},a&&u().createElement(u().Fragment,null,u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Image name"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},a)),i&&u().createElement(u().Fragment,null,u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Description"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},i))),u().createElement("br",null))},qn=function(){var e,t,n,a,i=(0,D.XQ)().getState,r=null===(e=i())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["oscap-profile"],o=(0,ye.Wo)({distribution:null===(t=i())||void 0===t||null===(t=t.values)||void 0===t?void 0:t.release,profile:r}).data;return u().createElement(E.TextContent,null,u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Profile name:"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null==o||null===(n=o.openscap)||void 0===n?void 0:n.profile_name)),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Profile description:"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},null==o||null===(a=o.openscap)||void 0===a?void 0:a.profile_description)),u().createElement(E.TextList,{component:E.TextListVariants.dl},u().createElement(E.TextListItem,{component:E.TextListItemVariants.dt,className:"pf-u-min-width"},"Reference ID:"),u().createElement(E.TextListItem,{component:E.TextListItemVariants.dd},r)),u().createElement("br",null))};const Mn=function(){var e,t,n,r,o,l,d,m,p,g,v,f,h,b,y,x,T=(0,hn.Z)().auth,w=(0,c.useState)(!1),k=(0,i.Z)(w,2),I=k[0],j=k[1],L=(0,c.useState)(!1),P=(0,i.Z)(L,2),z=P[0],_=P[1],C=(0,c.useState)(!1),A=(0,i.Z)(C,2),O=A[0],Z=A[1],R=(0,c.useState)(!1),N=(0,i.Z)(R,2),D=N[0],F=N[1],V=(0,c.useState)(!1),B=(0,i.Z)(V,2),q=B[0],M=B[1],G=(0,c.useState)(!1),W=(0,i.Z)(G,2),U=W[0],X=W[1],H=(0,c.useState)(!1),Q=(0,i.Z)(H,2),$=Q[0],K=Q[1],Y=(0,S.default)(),J=Y.change,ee=Y.getState;return(0,c.useEffect)((function(){var e,t=null===(e=ee())||void 0===e||null===(e=e.values)||void 0===e?void 0:e["register-system"];null!=t&&t.startsWith("register-now")&&(0,a.Z)(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==T?void 0:T.getUser();case 2:n=e.sent,a=null==n||null===(t=n.identity)||void 0===t||null===(t=t.internal)||void 0===t?void 0:t.org_id,J("subscription-organization-id",a);case 5:case"end":return e.stop()}}),e)})))()})),u().createElement(u().Fragment,null,u().createElement(on,null),(null===(e=ee())||void 0===e||null===(e=e.values)||void 0===e||null===(e=e["file-system-configuration"])||void 0===e?void 0:e.find((function(e){return e.mountpoint.includes("/usr")})))&&u().createElement(be,null),u().createElement(E.ExpandableSection,{toggleContent:"Image output",onToggle:function(e,t){return function(e){return j(e)}(t)},isExpanded:I,isIndented:!0,"data-testid":"image-output-expandable"},u().createElement(zn,null)),u().createElement(E.ExpandableSection,{toggleContent:"Target environments",onToggle:function(e,t){return function(e){return _(e)}(t)},isExpanded:z,isIndented:!0,"data-testid":"target-environments-expandable"},(null===(t=ee())||void 0===t||null===(t=t.values)||void 0===t||null===(t=t["target-environment"])||void 0===t?void 0:t.aws)&&u().createElement(_n,null),(null===(n=ee())||void 0===n||null===(n=n.values)||void 0===n||null===(n=n["target-environment"])||void 0===n?void 0:n.gcp)&&u().createElement(Cn,null),(null===(r=ee())||void 0===r||null===(r=r.values)||void 0===r||null===(r=r["target-environment"])||void 0===r?void 0:r.azure)&&u().createElement(An,null),(null===(o=ee())||void 0===o||null===(o=o.values)||void 0===o||null===(o=o["target-environment"])||void 0===o?void 0:o.oci)&&u().createElement(On,null),(null===(l=ee())||void 0===l||null===(l=l.values)||void 0===l||null===(l=l["target-environment"])||void 0===l?void 0:l.vsphere)&&u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"VMware vSphere (.vmdk)"),u().createElement(Zn,null)),(null===(d=ee())||void 0===d||null===(d=d.values)||void 0===d||null===(d=d["target-environment"])||void 0===d?void 0:d["vsphere-ova"])&&u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"VMware vSphere (.ova)"),u().createElement(Zn,null)),(null===(m=ee())||void 0===m||null===(m=m.values)||void 0===m||null===(m=m["target-environment"])||void 0===m?void 0:m["guest-image"])&&u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Virtualization - Guest image (.qcow2)"),u().createElement(Zn,null)),(null===(p=ee())||void 0===p||null===(p=p.values)||void 0===p||null===(p=p["target-environment"])||void 0===p?void 0:p["image-installer"])&&u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Bare metal - Installer (.iso)"),u().createElement(Zn,null)),(null===(g=ee())||void 0===g||null===(g=g.values)||void 0===g||null===(g=g["target-environment"])||void 0===g?void 0:g.wsl)&&u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"WSL - Windows Subsystem for Linux (.tar.gz)"),u().createElement(Zn,null))),u().createElement(E.ExpandableSection,{toggleContent:"File system configuration",onToggle:function(e,t){return function(e){return Z(e)}(t)},isExpanded:O,isIndented:!0,"data-testid":"file-system-configuration-expandable"},u().createElement(Rn,null)),u().createElement(E.ExpandableSection,{toggleContent:"Content",onToggle:function(e,t){return function(e){return F(e)}(t)},isExpanded:D,isIndented:!0,"data-testid":"content-expandable"},u().createElement(Dn,null)),(0,Le.Z)(null===(v=ee())||void 0===v||null===(v=v.values)||void 0===v?void 0:v.release)&&u().createElement(E.ExpandableSection,{toggleContent:"Registration",onToggle:function(e,t){return function(e){return M(e)}(t)},isExpanded:q,isIndented:!0,"data-testid":"registration-expandable"},"register-later"===(null===(f=ee())||void 0===f||null===(f=f.values)||void 0===f?void 0:f["register-system"])&&u().createElement(Fn,null),(null===(h=ee())||void 0===h||null===(h=h.values)||void 0===h||null===(h=h["register-system"])||void 0===h?void 0:h.startsWith("register-now"))&&u().createElement(Vn,null)),((null===(b=ee())||void 0===b||null===(b=b.values)||void 0===b?void 0:b["image-name"])||(null===(y=ee())||void 0===y||null===(y=y.values)||void 0===y?void 0:y["image-description"]))&&u().createElement(E.ExpandableSection,{toggleContent:"Image details",onToggle:function(e,t){return function(e){return X(e)}(t)},isExpanded:U,isIndented:!0,"data-testid":"image-details-expandable"},u().createElement(Bn,null)),(null===(x=ee())||void 0===x||null===(x=x.values)||void 0===x?void 0:x["oscap-profile"])&&u().createElement(E.ExpandableSection,{toggleContent:"OpenSCAP",onToggle:function(e,t){return function(e){return K(e)}(t)},isExpanded:$,isIndented:!0,"data-testid":"oscap-detail-expandable"},u().createElement(qn,null)))};var Gn=n(66688),Wn=["label","isRequired"];function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hn=function(e){var t,n=e.label,a=e.isRequired,o=(0,v.Z)(e,Wn),l=(0,S.default)(),s=l.getState,d=l.change,m=(0,w.Z)(Xn({label:n,isRequired:a},o)).input,p=(0,c.useState)({aws:!1,azure:!1,gcp:!1,oci:!1,"vsphere-ova":!1,vsphere:!1,"guest-image":!1,"image-installer":!1,wsl:!1}),g=(0,i.Z)(p,2),f=g[0],h=g[1],b=G.A0.usePrefetch("getSourceList"),y=(0,A.M)().isBeta,x=null===(t=s())||void 0===t||null===(t=t.values)||void 0===t?void 0:t.release;(0,c.useEffect)((function(){var e;null!==(e=s())&&void 0!==e&&null!==(e=e.values)&&void 0!==e&&e[m.name]&&h(s().values[m.name])}),[s,m.name]);var T=function(e,t){return h((function(n){var a=Xn(Xn({},n),{},(0,r.Z)({},e,t));return d(m.name,a),a}))},k=function(e,t,n){" "===e.key&&T(t,n)},I=function(e){var t=e.architecture,n=e.release,a=(0,ye.xW)({distribution:n}),i=a.data,r=a.isFetching,o=a.isSuccess,l=a.isError,s=[];return o&&i&&i.forEach((function(e){e.arch===t&&(s=e.image_types)})),{data:s,isFetching:r,isSuccess:o,isError:l}}({architecture:(0,Gn.U$)("arch").input.value,release:x}),j=I.data,L=I.isFetching,P=I.isSuccess,z=I.isError;return L?u().createElement(E.Bullseye,null,u().createElement(E.Spinner,{size:"lg"})):z||!P?u().createElement(E.Alert,{variant:"danger",isPlain:!0,isInline:!0,title:"Allowed targets unavailable"},"Allowed targets cannot be reached, try again later."):(["aws","gcp","azure","vsphere","vsphere-ova","guest-image","image-installer","wsl"].forEach((function(e){f[e]&&!j.includes(e)&&T(e,!1)})),u().createElement(E.FormGroup,{isRequired:a,label:n,"data-testid":"target-select"},u().createElement(E.FormGroup,{label:u().createElement(E.Text,{component:E.TextVariants.small},"Public cloud"),"data-testid":"target-public"},u().createElement("div",{className:"tiles"},j.includes("aws")&&u().createElement(E.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-aws",title:"Amazon Web Services",icon:u().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/aws.svg",alt:"Amazon Web Services logo"}),onClick:function(){return T("aws",!f.aws)},onKeyDown:function(e){return k(e,"aws",!f.aws)},onMouseEnter:function(){return b({provider:"aws"})},isSelected:f.aws,isStacked:!0,isDisplayLarge:!0}),j.includes("gcp")&&u().createElement(E.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-google",title:"Google Cloud Platform",icon:u().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg",alt:"Google Cloud Platform logo"}),onClick:function(){return T("gcp",!f.gcp)},isSelected:f.gcp,onKeyDown:function(e){return k(e,"gcp",!f.gcp)},onMouseEnter:function(){return b({provider:"gcp"})},isStacked:!0,isDisplayLarge:!0}),j.includes("azure")&&u().createElement(E.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-azure",title:"Microsoft Azure",icon:u().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg",alt:"Microsoft Azure logo"}),onClick:function(){return T("azure",!f.azure)},onKeyDown:function(e){return k(e,"azure",!f.azure)},onMouseEnter:function(){return b({provider:"azure"})},isSelected:f.azure,isStacked:!0,isDisplayLarge:!0}),j.includes("oci")&&u().createElement(E.Tile,{className:"tile pf-u-mr-sm","data-testid":"upload-oci",title:"Oracle Cloud Infrastructure",icon:u().createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/oracle-short.svg",alt:"Oracle Cloud Infrastructure logo"}),onClick:function(){return T("oci",!f.oci)},onKeyDown:function(e){return k(e,"oci",!f.oci)},isSelected:f.oci,isStacked:!0,isDisplayLarge:!0}))),j.includes("vsphere")&&u().createElement(E.FormGroup,{label:u().createElement(E.Text,{component:E.TextVariants.small},"Private cloud"),className:"pf-u-mt-sm","data-testid":"target-private"},u().createElement(E.Checkbox,{label:"VMware vSphere",isChecked:f.vsphere||f["vsphere-ova"],onChange:function(e,t){T("vsphere-ova",t),T("vsphere",!1)},"aria-label":"VMware checkbox",id:"checkbox-vmware",name:"VMware","data-testid":"checkbox-vmware"})),j.includes("vsphere")&&u().createElement(E.FormGroup,{className:"pf-u-mt-sm pf-u-mb-sm pf-u-ml-xl","data-testid":"target-private-vsphere-radio"},j.includes("vsphere-ova")&&u().createElement(E.Radio,{name:"vsphere-radio","aria-label":"VMware vSphere radio button OVA",id:"vsphere-radio-ova",label:u().createElement(u().Fragment,null,"Open virtualization format (.ova)",u().createElement(E.Popover,{maxWidth:"30rem",position:"right",bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"An OVA file is a virtual appliance used by virtualization platforms such as VMware vSphere. It is a package that contains files used to describe a virtual machine, which includes a VMDK image, OVF descriptor file and a manifest file."))},u().createElement(re.ZP,{className:"pf-u-ml-sm"}))),onChange:function(e,t){T("vsphere-ova",t),T("vsphere",!t)},isChecked:f["vsphere-ova"],isDisabled:!(f.vsphere||f["vsphere-ova"])}),u().createElement(E.Radio,{className:"pf-u-mt-sm",name:"vsphere-radio","aria-label":"VMware vSphere radio button VMDK",id:"vsphere-radio-vmdk",label:u().createElement(u().Fragment,null,"Virtual disk (.vmdk)",u().createElement(E.Popover,{maxWidth:"30rem",position:"right",bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"A VMDK file is a virtual disk that stores the contents of a virtual machine. This disk has to be imported into vSphere using govc import.vmdk, use the OVA version when using the vSphere UI."))},u().createElement(re.ZP,{className:"pf-u-ml-sm"}))),onChange:function(e,t){T("vsphere-ova",!t),T("vsphere",t)},isChecked:f.vsphere,isDisabled:!(f.vsphere||f["vsphere-ova"])})),u().createElement(E.FormGroup,{label:u().createElement(E.Text,{component:E.TextVariants.small},"Other"),"data-testid":"target-other"},j.includes("guest-image")&&u().createElement(E.Checkbox,{label:"Virtualization - Guest image (.qcow2)",isChecked:f["guest-image"],onChange:function(e,t){return T("guest-image",t)},"aria-label":"Virtualization guest image checkbox",id:"checkbox-guest-image",name:"Virtualization guest image","data-testid":"checkbox-guest-image"}),j.includes("image-installer")&&u().createElement(E.Checkbox,{label:"Bare metal - Installer (.iso)",isChecked:f["image-installer"],onChange:function(e,t){return T("image-installer",t)},"aria-label":"Bare metal installer checkbox",id:"checkbox-image-installer",name:"Bare metal installer","data-testid":"checkbox-image-installer"}),j.includes("wsl")&&y()&&u().createElement(E.Checkbox,{label:"WSL - Windows Subsystem for Linux (.tar.gz)",isChecked:f.wsl,onChange:function(e,t){return T("wsl",t)},"aria-label":"windows subsystem for linux checkbox",id:"checkbox-wsl",name:"WSL","data-testid":"checkbox-wsl"}))))};Hn.propTypes={label:T().node,isRequired:T().bool},Hn.defaultProps={label:"",isRequired:!1};const Qn=Hn;var $n=["schema","onSubmit","onClose","customComponentMapper","customValidatorMapper","defaultArch","className"];function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jn=function(e){var t=e.schema,n=e.onSubmit,a=e.onClose,i=e.customComponentMapper,r=e.customValidatorMapper,o=e.defaultArch,l=e.className,s=(0,v.Z)(e,$n);return t?u().createElement(y.Z,(0,g.Z)({initialValues:s.initialValues,schema:t,className:"image-builder".concat(l?" ".concat(l):""),subscription:{values:!0},FormTemplate:function(e){return u().createElement(h.ZP,(0,g.Z)({},e,{showFormControls:!1}))},onSubmit:function(e){return n(e)},validatorMapper:Yn({},r),componentMapper:Yn(Yn({},f.YS),{},{review:Mn,output:Qn,select:b.Z,"package-selector":{component:Tt,defaultArch:o},"package-selector-content-sources":{component:wt},"radio-popover":Lt,"azure-auth-button":X,"activation-keys":N,"activation-key-information":Dt,"file-system-configuration":ke,"image-output-release-select":Ce,"centos-acknowledgement":ae,"repositories-table":fn,"aws-sources-select":U,"azure-sources-select":ee,"azure-resource-groups":K,"gallery-layout":je,"oscap-profile-selector":at,"image-output-arch-select":q,"image-output-release-lifecycle":Xt,registration:Ot},i),onCancel:a},s)):u().createElement(E.Spinner,null)};Jn.propTypes={schema:T().object,onSubmit:T().func.isRequired,onClose:T().func.isRequired,customComponentMapper:T().shape((0,r.Z)({},T().string,T().oneOfType([T().node,T().shape({component:T().node})]))),customValidatorMapper:T().shape((0,r.Z)({},T().string,T().func)),defaultArch:T().string,className:T().string,initialValues:T().object};const ea=Jn;var ta=function(){return u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"settings/sources"},"Create and manage sources here")};const na={StepTemplate:De,id:"wizard-target-aws",title:"Amazon Web Services",customTitle:u().createElement(E.Title,{headingLevel:"h1",size:"xl"},"Target environment - Amazon Web Services"),name:"aws-target-env",substepOf:"Target environment",nextStep:function(e){var t=e.values;return Sn(t,{skipAws:!0})},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"plain-text-component",label:u().createElement("p",null,"Your image will be uploaded to AWS and shared with the account you provide below.")},{component:d.Z.PLAIN_TEXT,name:"plain-text-component",label:u().createElement("p",null,u().createElement("b",null,"The shared image will expire within 14 days.")," To permanently access the image, copy the image, which will be shared to your account by Red Hat, to your own AWS account.")},{component:d.Z.RADIO,label:"Share method:",name:"aws-target-type",initialValue:"aws-target-type-source",autoFocus:!0,options:[{label:"Use an account configured from Sources.",description:"Use a configured source to launch environments directly from the console.",value:"aws-target-type-source","data-testid":"aws-radio-source",autoFocus:!0},{label:"Manually enter an account ID.",value:"aws-target-type-account-id","data-testid":"aws-radio-account-id",className:"pf-u-mt-sm"}]},{component:"aws-sources-select",name:"aws-sources-select",className:"pf-u-max-width",label:"Source Name",isRequired:!0,validate:[{type:Re.Z.REQUIRED}],condition:{when:"aws-target-type",is:"aws-target-type-source"}},{component:d.Z.PLAIN_TEXT,name:"aws-sources-select-description",label:u().createElement(ta,null),condition:{when:"aws-target-type",is:"aws-target-type-source"}},{component:d.Z.TEXT_FIELD,name:"aws-account-id",className:"pf-u-w-25","data-testid":"aws-account-id",type:"text",label:"AWS account ID",isRequired:!0,validate:[{type:Re.Z.REQUIRED},{type:Re.Z.EXACT_LENGTH,threshold:12}],condition:{when:"aws-target-type",is:"aws-target-type-account-id"}},{name:"gallery-layout",component:"gallery-layout",minWidths:{default:"12.5rem"},maxWidths:{default:"12.5rem"},fields:[{component:d.Z.TEXT_FIELD,name:"aws-default-region",value:F.NF,"data-testid":"aws-default-region",type:"text",label:"Default Region",isReadOnly:!0,isRequired:!0,helperText:u().createElement(E.HelperText,null,u().createElement(E.HelperTextItem,{component:"div",variant:"indeterminate"},"Images are built in the default region but can be copied to other regions later."))},{component:d.Z.TEXT_FIELD,name:"aws-associated-account-id","data-testid":"aws-associated-account-id",type:"text",label:"Associated Account ID",isReadOnly:!0,isRequired:!0,helperText:u().createElement(E.HelperText,null,u().createElement(E.HelperTextItem,{component:"div",variant:"indeterminate"},"This is the account associated with the source.")),condition:{when:"aws-target-type",is:"aws-target-type-source"}}]}]};var aa=function(){return u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"settings/sources"},"Create and manage sources here")};const ia={StepTemplate:De,id:"wizard-target-msazure",title:"Microsoft Azure",customTitle:u().createElement(E.Title,{headingLevel:"h1",size:"xl"},"Target environment - Microsoft Azure"),name:"ms-azure-target-env",substepOf:"Target environment",nextStep:function(e){var t=e.values;return Sn(t,{skipAws:!0,skipGoogle:!0,skipAzure:!0})},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"azure-description",label:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Upon build, Image Builder sends the image to the selected authorized Azure account. The image will be uploaded to the resource group in the subscription you specify."),u().createElement(E.Text,null,'To authorize Image Builder to push images to Microsoft Azure, the account owner must configure Image Builder as an authorized application for a specific tenant ID and give it the role of "Contributor" for the resource group you want to upload to. This applies even when defining target by Source selection.',u().createElement("br",null),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow"},"Learn more about OAuth 2.0")))},{component:d.Z.RADIO,label:"Share method:",name:"azure-type",initialValue:"azure-type-source",autoFocus:!0,options:[{label:"Use an account configured from Sources.",description:"Use a configured source to launch environments directly from the console.",value:"azure-type-source","data-testid":"azure-radio-source",autoFocus:!0},{label:"Manually enter the account information.",value:"azure-type-manual","data-testid":"azure-radio-manual",className:"pf-u-mt-sm"}]},{component:"azure-sources-select",name:"azure-sources-select",className:"pf-u-max-width",label:"Source Name",isRequired:!0,validate:[{type:Re.Z.REQUIRED}],condition:{when:"azure-type",is:"azure-type-source"}},{component:d.Z.PLAIN_TEXT,name:"azure-sources-select-description",label:u().createElement(aa,null),condition:{when:"azure-type",is:"azure-type-source"}},{name:"gallery-layout",component:"gallery-layout",minWidths:{default:"12.5rem"},maxWidths:{default:"12.5rem"},fields:[{component:d.Z.TEXT_FIELD,name:"azure-tenant-id","data-testid":"azure-tenant-id-source",type:"text",label:"Azure Tenant GUID",isRequired:!0,isReadOnly:!0},{component:d.Z.TEXT_FIELD,name:"azure-subscription-id","data-testid":"azure-subscription-id-source",type:"text",label:"Subscription ID",isRequired:!0,isReadOnly:!0,condition:{when:"azure-type",is:"azure-type-source"}}],condition:{when:"azure-type",is:"azure-type-source"}},{component:d.Z.TEXT_FIELD,name:"azure-tenant-id",className:"pf-u-w-50","data-testid":"azure-tenant-id-manual",type:"text",label:"Azure Tenant GUID",isRequired:!0,autoFocus:!0,validate:[{type:Re.Z.REQUIRED},{type:Re.Z.PATTERN,pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,message:"Please enter a valid tenant ID"}],condition:{when:"azure-type",is:"azure-type-manual"}},{component:"azure-auth-button",name:"azure-auth-button","data-testid":"azure-auth-button",required:!0,isRequired:!0},{component:d.Z.TEXT_FIELD,name:"azure-subscription-id",className:"pf-u-w-50","data-testid":"azure-subscription-id-manual",type:"text",label:"Subscription ID",isRequired:!0,validate:[{type:Re.Z.REQUIRED},{type:Re.Z.PATTERN,pattern:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,message:"Please enter a valid subscription ID"}],condition:{when:"azure-type",is:"azure-type-manual"}},{component:"azure-resource-groups",name:"azure-resource-group",className:"pf-u-max-width","data-testid":"azure-resource-group-select",label:"Resource group",isRequired:!0,validate:[{type:Re.Z.REQUIRED}],condition:{when:"azure-type",is:"azure-type-source"}},{component:d.Z.TEXT_FIELD,name:"azure-resource-group",className:"pf-u-w-50","data-testid":"azure-resource-group-manual",type:"text",label:"Resource group",isRequired:!0,validate:[{type:Re.Z.REQUIRED},{type:Re.Z.PATTERN,pattern:/^[-\w._()]+[-\w_()]$/,message:"Resource group names only allow alphanumeric characters, periods, underscores, hyphens, and parenthesis and cannot end in a period"}],condition:{when:"azure-type",is:"azure-type-manual"}}]};var ra=n(77310);const oa={StepTemplate:De,id:"wizard-systemconfiguration-oscap",title:"OpenSCAP",name:"Compliance",customTitle:u().createElement(E.Title,{headingLevel:"h1",size:"xl"},"OpenSCAP profile"),nextStep:"File system configuration",buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"oscap-text-component",label:u().createElement(E.Text,null,"Use OpenSCAP to monitor the adherence of your registered RHEL systems to a selected regulatory compliance profile. ",u().createElement(ra.Z,null))},{component:"oscap-profile-selector",name:"oscap-profile",label:"Available profiles for the distribution"}]},la={StepTemplate:De,id:"wizard-systemconfiguration-content-sources-packages",title:"Additional custom packages",name:"packages-content-sources",substepOf:"Content",nextStep:"details",buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"packages-text-component",label:u().createElement(E.Text,null,"The available packages will return results from all repositories chosen on the previous page.")},{component:"package-selector-content-sources",name:"selected-packages-content-sources",label:"Available options"}]};var sa=function(){var e=(0,A.M)().isProd;return u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:e()?"https://console.redhat.com/insights/connector/activation-keys":"https://console.stage.redhat.com/insights/connector/activation-keys"},"Activation keys page")},ca=function(){var e=(0,c.useState)(null),t=(0,i.Z)(e,2),n=t[0],r=t[1],o=(0,hn.Z)().auth;return(0,c.useEffect)((function(){(0,a.Z)(s().mark((function e(){var t,n,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==o?void 0:o.getUser();case 2:n=e.sent,a=null==n||null===(t=n.identity)||void 0===t||null===(t=t.internal)||void 0===t?void 0:t.org_id,r(a);case 5:case"end":return e.stop()}}),e)})))()})),u().createElement(E.Popover,{hasAutoWidth:!0,maxWidth:"35rem",bodyContent:u().createElement(E.TextContent,null,u().createElement(E.Text,null,"Activation keys enable you to register a system with appropriate subscriptions, system purpose, and repositories attached."),u().createElement(E.Text,null,"If using an activation key with command line registration, you must provide your organization's ID.",n&&u().createElement("br",null),n&&"Your organization's ID is "+n))},u().createElement(E.Button,{variant:"plain","aria-label":"Activation key popover","aria-describedby":"subscription-activation-key",className:"pf-c-form__group-label-help"},u().createElement(re.ZP,null)))};const ua={StepTemplate:De,id:"wizard-registration",title:"Register",customTitle:u().createElement(E.Title,{headingLevel:"h1",size:"xl"},"Register systems using this image"),name:"registration",nextStep:function(e){return e.values.enableOscap?"Compliance":"File system configuration"},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"registration-general-description",label:"Automatically register your systems with Red Hat to enhance security and track your spending."},{name:"register-system",component:"registration",label:"Registration method",initialValue:"register-now-rhc"},{component:"activation-keys",name:"subscription-activation-key",required:!0,label:u().createElement(u().Fragment,null,"Activation key to use for this image",u().createElement(ca,null)),condition:{or:[{when:"register-system",is:"register-now-rhc"},{when:"register-system",is:"register-now-insights"},{when:"register-system",is:"register-now"}]},isRequired:!0,validate:[{type:Re.Z.REQUIRED}]},{component:d.Z.PLAIN_TEXT,name:"subscription-activation-description",label:u().createElement("span",null,"By default, activation key is generated and preset for you. Admins can create and manage keys by visiting the",u().createElement(sa,null)),condition:{or:[{when:"register-system",is:"register-now-rhc"},{when:"register-system",is:"register-now-insights"},{when:"register-system",is:"register-now"}]}},{component:d.Z.PLAIN_TEXT,name:"subscription-register-later",label:u().createElement(E.TextContent,null,u().createElement(E.Text,{component:E.TextVariants.h3},"Register Later"),u().createElement(E.Text,null,"On initial boot, systems will need to be registered manually before having access to updates or Red Hat services. Registering and connecting your systems during the image creation is recommended."),u().createElement(E.Text,null,"If you prefer to register later, review the instructions for manual registration with remote host configuration."),u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",icon:u().createElement(te.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/articles/rhc"},"Registering with remote host configuration")),condition:{or:[{when:"register-system",is:"register-later"}]}},{component:"activation-key-information",name:"subscription-activation-key-information",label:"Selected activation key",valueReference:"subscription-activation-key",condition:{or:[{when:"register-system",is:"register-now-rhc"},{when:"register-system",is:"register-now-insights"},{when:"register-system",is:"register-now"}]}}]};var da=function(){var e=(0,A.M)().isBeta;return u().createElement(E.Button,{component:"a",target:"_blank",variant:"link",iconPosition:"right",isInline:!0,icon:u().createElement(te.ZP,null),href:e()?"/preview/settings/content":"/settings/content"},"Create and manage repositories here")};const ma={StepTemplate:De,id:"wizard-repositories",title:"Custom repositories",name:"repositories",substepOf:"Content",nextStep:function(e){return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})["payload-repositories"];return(null==e?void 0:e.length)>0?"packages-content-sources":"details"}(e.values)},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"packages-text-component",label:u().createElement(E.Text,null,"Select from linked custom repositories from which to search and add packages to this image.",u().createElement("br",null),u().createElement(da,null))},{component:"repositories-table",name:"payload-repositories",label:"Custom repositories"}]},pa={StepTemplate:De,id:"wizard-review",name:"review",title:"Review",buttons:Qe,fields:[{name:"review",component:"review"}]},ga={StepTemplate:De,id:"wizard-imageoutput",title:"Image output",name:"image-output",nextStep:function(e){var t=e.values;return Sn(t)},buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"image-output-plain-text",label:u().createElement(E.Text,null,"Image builder allows you to create a custom image and push it to target environments.",u().createElement("br",null),u().createElement(ra.Z,null))},{component:"image-output-release-select",label:"Release",name:"release",initialValue:F.PV,isRequired:!0,validate:[{type:Re.Z.REQUIRED}]},{component:"image-output-release-lifecycle",label:"Release lifecycle",name:"release-lifecycle"},{component:"image-output-arch-select",label:"Architecture",name:"arch",initialValue:F.bR,isRequired:!0,validate:[{type:Re.Z.REQUIRED}]},{component:"centos-acknowledgement",name:"centos-acknowledgement",condition:{when:"release",pattern:/centos-*/,then:{set:{"register-system":null}},else:{visible:!1}}},{component:"output",name:"target-environment",label:"Select target environments",isRequired:!0,validate:[{type:Re.Z.REQUIRED},{type:"targetEnvironmentValidator"}]}]};var va=function(){var e,t=null===(e=(0,(0,D.XQ)().getState)().values)||void 0===e?void 0:e["image-description"];return u().createElement("h1",null,(null==t?void 0:t.length)||0,"/250")};const fa={StepTemplate:De,id:"wizard-details",name:"details",title:"Details",nextStep:"review",buttons:Qe,fields:[{component:d.Z.PLAIN_TEXT,name:"plain-text-component",label:u().createElement("p",null,"Optionally enter a name to identify your image later quickly. If you do not provide one, the UUID will be used as the name.")},{component:d.Z.TEXT_FIELD,name:"image-name",type:"text",label:"Image Name",placeholder:"Image Name",helperText:"The image name can be 3-63 characters long. It can contain lowercase letters, digits and hyphens, has to start with a letter and cannot end with a hyphen.",autoFocus:!0,validate:[{type:Re.Z.PATTERN,pattern:/^[a-z][-a-z0-9]{1,61}[a-z0-9]$/,message:"The image name can be 3-63 characters long. It can contain lowercase letters, digits and hyphens, has to start with a letter and cannot end with a hyphen."}]},{component:d.Z.TEXTAREA,name:"image-description",type:"text",label:u().createElement(E.Flex,{justifyContent:{default:"justifyContentSpaceBetween"}},u().createElement(E.FlexItem,null,u().createElement(E.Text,{component:"b"},"Description")),u().createElement(E.FlexItem,null,u().createElement(va,null))),placeholder:"Add Description",resizeOrientation:"vertical",validate:[{type:Re.Z.MAX_LENGTH,threshold:250}]}]};function ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const ba=function(){return function(e){if(e){var t,n={},a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ha(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}(e);try{for(a.s();!(t=a.n()).done;){var r=t.value.mountpoint;r in n?n[r]++:n[r]=1}}catch(e){a.e(e)}finally{a.f()}for(var o=[],l=0,s=Object.entries(n);l<s.length;l++){var c=(0,i.Z)(s[l],2),u=c[0];c[1]>1&&o.push(u)}var d=n["/"]>=1;return 0===o.length&&d?void 0:{duplicates:o===[]?void 0:o,root:d}}}},ya=function(){return function(e){if(e)return Object.values(e).reduce((function(e,t){return t||e}),!1)?void 0:"Please select an image"}};var Ea=n(55808),xa=n(81093);function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ka(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ka(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw r}}}}function ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ia=function(e){var t,n,a,i,r,l,s,c,u,d,m,p,g={packages:null===(t=e["selected-packages"])||void 0===t?void 0:t.map((function(e){return e.name}))};if((null===(n=e["payload-repositories"])||void 0===n?void 0:n.length)>0&&(g.payload_repositories=(0,o.Z)(e["payload-repositories"])),(null===(a=e["custom-repositories"])||void 0===a?void 0:a.length)>0&&(g.custom_repositories=(0,o.Z)(e["custom-repositories"])),"register-now-rhc"===e["register-system"]?g.subscription={"activation-key":e["subscription-activation-key"],insights:!0,rhc:!0,organization:Number(e["subscription-organization-id"]),"server-url":e["subscription-server-url"],"base-url":e["subscription-base-url"]}:"register-now-insights"===e["register-system"]?g.subscription={"activation-key":e["subscription-activation-key"],insights:!0,organization:Number(e["subscription-organization-id"]),"server-url":e["subscription-server-url"],"base-url":e["subscription-base-url"]}:"register-now"===e["register-system"]&&(g.subscription={"activation-key":e["subscription-activation-key"],insights:!1,organization:Number(e["subscription-organization-id"]),"server-url":e["subscription-server-url"],"base-url":e["subscription-base-url"]}),"manual"===e["file-system-config-radio"]){g.filesystem=[];var v,f=Sa(e["file-system-configuration"]);try{for(f.s();!(v=f.n()).done;){var h=v.value;g.filesystem.push({mountpoint:h.mountpoint,min_size:h.size*h.unit})}}catch(e){f.e(e)}finally{f.f()}}e["oscap-profile"]&&(g.openscap={profile_id:e["oscap-profile"]});var b=[];if(null!==(i=e["target-environment"])&&void 0!==i&&i.aws){var y="aws-target-type-source"===e["aws-target-type"]?{share_with_sources:[e["aws-sources-select"]]}:{share_with_accounts:[e["aws-account-id"]]},E={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"aws",upload_request:{type:"aws",options:y}}],customizations:g,client_id:"ui"};b.push(E)}if(null!==(r=e["target-environment"])&&void 0!==r&&r.gcp){var x="";if("gcp-account"===e["image-sharing"])switch(e["google-account-type"]){case"googleAccount":x="user:".concat(e["google-email"]);break;case"serviceAccount":x="serviceAccount:".concat(e["google-email"]);break;case"googleGroup":x="group:".concat(e["google-email"]);break;case"domain":x="domain:".concat(e["google-domain"])}var T={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"gcp",upload_request:{type:"gcp",options:{}}}],customizations:g,client_id:"ui"};""!==x&&(T.image_requests[0].upload_request.options.share_with_accounts=[x]),b.push(T)}if(null!==(l=e["target-environment"])&&void 0!==l&&l.azure){var w="azure-type-source"===e["azure-type"]?{source_id:e["azure-sources-select"]}:{tenant_id:e["azure-tenant-id"],subscription_id:e["azure-subscription-id"]},S={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"azure",upload_request:{type:"azure",options:wa(wa({},w),{},{resource_group:e["azure-resource-group"]})}}],customizations:g,client_id:"ui"};b.push(S)}if(null!==(s=e["target-environment"])&&void 0!==s&&s.oci){var k={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"oci",upload_request:{type:"oci.objectstorage",options:{}}}],customizations:g,client_id:"ui"};b.push(k)}if(null!==(c=e["target-environment"])&&void 0!==c&&c.vsphere){var I={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"vsphere",upload_request:{type:"aws.s3",options:{}}}],customizations:g,client_id:"ui"};b.push(I)}if(null!==(u=e["target-environment"])&&void 0!==u&&u["vsphere-ova"]){var j={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"vsphere-ova",upload_request:{type:"aws.s3",options:{}}}],customizations:g,client_id:"ui"};b.push(j)}if(null!==(d=e["target-environment"])&&void 0!==d&&d["guest-image"]){var L={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"guest-image",upload_request:{type:"aws.s3",options:{}}}],customizations:g,client_id:"ui"};b.push(L)}if(null!==(m=e["target-environment"])&&void 0!==m&&m["image-installer"]){var P={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"image-installer",upload_request:{type:"aws.s3",options:{}}}],customizations:g,client_id:"ui"};b.push(P)}if(null!==(p=e["target-environment"])&&void 0!==p&&p.wsl){var z={distribution:e.release,image_name:null==e?void 0:e["image-name"],image_description:null==e?void 0:e["image-description"],image_requests:[{architecture:e.arch,image_type:"wsl",upload_request:{type:"aws.s3",options:{}}}],customizations:g,client_id:"ui"};b.push(z)}return b},ja=function(e){var t,n;return e%F.at==0?(t=e/F.at,n=F.at):e%F.g7==0?(t=e/F.g7,n=F.g7):e%F.fI==0&&(t=e/F.fI,n=F.fI),[t,n]};const La=function(){var e=(0,ye.oC)(),t=(0,i.Z)(e,1)[0],n=(0,p.useNavigate)(),r=(0,p.useParams)().composeId,o=(0,ye.OZ)({composeId:r},{skip:!r}).data,l=r?null==o?void 0:o.request:void 0,c=(0,m.useFlag)("image-builder.enable-content-sources"),g=l?"review":void 0,v=(0,A.M)(),f=v.isBeta,h=v.isProd,b=(0,m.useFlag)("image-builder.wizard.oscap.enabled")&&f(),y=function(e,t,n){if(e){var a,r,o,l,s,c,u,d=e.image_requests[0],m=d.upload_request,p={};if(p["image-name"]=e.image_name,p["image-description"]=e.image_description,p.release=null==e?void 0:e.distribution,p.arch=d.architecture,p["target-environment"]={aws:!1,azure:!1,gcp:!1,oci:!1,"guest-image":!1},u="aws.s3"===m.type||"oci.objectstorage"===m.type?d.image_type:m.type,p["target-environment"][u]=!0,"aws"===u){var g,v,f=null==m||null===(g=m.options)||void 0===g||null===(g=g.share_with_sources)||void 0===g?void 0:g[0],h=null==m||null===(v=m.options)||void 0===v||null===(v=v.share_with_accounts)||void 0===v?void 0:v[0];p["aws-sources-select"]=f,p["aws-account-id"]=h,p["aws-target-type"]=h&&!f?"aws-target-type-account-id":"aws-target-type-source"}else if("azure"===u){var b,y,E,x,T;null!=m&&null!==(b=m.options)&&void 0!==b&&b.source_id?(p["azure-type"]="azure-type-source",p["azure-sources-select"]=null==m||null===(E=m.options)||void 0===E?void 0:E.source_id):(p["azure-type"]="azure-type-manual",p["azure-tenant-id"]=null==m||null===(x=m.options)||void 0===x?void 0:x.tenant_id,p["azure-subscription-id"]=null==m||null===(T=m.options)||void 0===T?void 0:T.subscription_id),p["azure-resource-group"]=null==m||null===(y=m.options)||void 0===y?void 0:y.resource_group}else if("gcp"===u){var w,S=(null==m||null===(w=m.options)||void 0===w?void 0:w.share_with_accounts[0]).split(":"),k=(0,i.Z)(S,2),I=k[0],j=k[1];switch(I){case"user":p["google-account-type"]="googleAccount",p["google-email"]=j;break;case"serviceAccount":p["google-account-type"]="serviceAccount",p["google-email"]=j;break;case"group":p["google-account-type"]="googleGroup",p["google-email"]=j;break;case"domain":p["google-account-type"]="domain",p["google-domain"]=j}}var L=null==e||null===(a=e.customizations)||void 0===a||null===(a=a.packages)||void 0===a?void 0:a.map((function(e){return{name:e,summary:void 0}}));p["selected-packages"]=L,p["original-payload-repositories"]=null==e||null===(r=e.customizations)||void 0===r?void 0:r.payload_repositories,p["payload-repositories"]=null==e||null===(o=e.customizations)||void 0===o?void 0:o.payload_repositories,p["custom-repositories"]=null==e||null===(l=e.customizations)||void 0===l?void 0:l.custom_repositories;var P=null==e||null===(s=e.customizations)||void 0===s?void 0:s.filesystem;if(P){p["file-system-config-radio"]="manual";var z,_=[],C=Sa(P);try{for(C.s();!(z=C.n()).done;){var A=z.value,O=ja(A.min_size),Z=(0,i.Z)(O,2),R=Z[0],N=Z[1];_.push({mountpoint:A.mountpoint.includes("/usr/")?"/usr":A.mountpoint,size:R,unit:N})}}catch(e){C.e(e)}finally{C.f()}p["file-system-configuration"]=_}var D,F=null==e||null===(c=e.customizations)||void 0===c?void 0:c.subscription;return F?(F.rhc?p["register-system"]="register-now-rhc":F.insights?p["register-system"]="register-now-insights":p["register-system"]="register-now",p["subscription-activation-key"]=F["activation-key"],p["subscription-organization-id"]=F.organization,t?(p["subscription-server-url"]="subscription.rhsm.redhat.com",p["subscription-base-url"]="https://cdn.redhat.com/"):(p["subscription-server-url"]="subscription.rhsm.stage.redhat.com",p["subscription-base-url"]="https://cdn.stage.redhat.com/")):p["register-system"]="register-later",n&&(p["oscap-profile"]=null==e||null===(D=e.customizations)||void 0===D||null===(D=D.openscap)||void 0===D?void 0:D.profile_id),p}}(l,h(),b),E=function(e,t,n){if(e){var a,i=e.image_requests[0].upload_request,r=["image-output"];return"aws"===i.type?r.push("aws-target-env"):"azure"===i.type?r.push("ms-azure-target-env"):"gcp"===i.type&&r.push("google-cloud-target-env"),(0,Le.Z)(null==e?void 0:e.distribution)&&r.push("registration"),n&&r.push("Compliance"),t?(r.push("File system configuration","packages","repositories"),(null===(a=e.customizations)||void 0===a?void 0:a.payload_repositories)&&r.push("packages-content-sources")):r.push("File system configuration","packages"),r.push("details"),r}return[]}(l,c,b);y?(y.isBeta=f(),y.contentSourcesEnabled=c,y.enableOscap=b):y={isBeta:f(),enableOscap:b,contentSourcesEnabled:c};var x=function(){return n((0,Ea.y)(""))};return u().createElement(u().Fragment,null,u().createElement(xa.$,null),u().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},u().createElement(ea,{onClose:x,onSubmit:function(){var e=(0,a.Z)(s().mark((function e(a){var i,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.values,(0,a.setIsSaving)(!0),r=Ia(i),e.next=5,Promise.allSettled(r.map((function(e){return t({composeRequest:e})})));case 5:n((0,Ea.y)(""));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),defaultArch:"x86_64",customValidatorMapper:{fileSystemConfigurationValidator:ba,targetEnvironmentValidator:ya},schema:{fields:[{component:d.Z.WIZARD,name:"image-builder-wizard",className:"imageBuilder",isDynamic:!0,inModal:!1,onKeyDown:function(e){!function(e,t){"Escape"===e.key&&t()}(e,x)},buttonLabels:{submit:"Create image"},showTitles:!0,crossroads:["target-environment","release","payload-repositories"],fields:[ga,na,jn,ia,ua,$e,la,ma,Be,fa,pa,oa],initialState:{activeStep:g||"image-output",activeStepIndex:E.length,maxStepIndex:E.length,prevSteps:E}}]},initialValues:y})))}},77310:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var a=n(32747),i=n.n(a),r=n(1704),o=n(50470);const l=function(){return i().createElement(r.Button,{component:"a",target:"_blank",variant:"link",icon:i().createElement(o.ZP,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/creating_customized_images_by_using_insights_image_builder/index"},"Documentation")}},92460:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(58061);const i=function(e){switch(e){case a.F2:case a.PV:return!0;default:return!1}}},53922:(e,t,n)=>{"use strict";n.d(t,{BU:()=>l,YM:()=>r,u3:()=>o,x5:()=>i});var a=n(29439),i=function(e){if(!e)return"";var t=Date.parse(e);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(t)},r=function(e){if(isNaN(Date.parse(e))){var t=e.split(" "),n=(0,a.Z)(t,2),i=n[0],r=n[1],o="".concat(i,"T").concat(r,"Z");return Date.parse(o)}return Date.parse(e)},o=function(e){if(e){var t=Date.now();return Math.floor((t-r(e))/36e5)}return 0},l=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long"})}},54725:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var a=n(55140),i=function(){var e=(0,a.Z)(),t=e.isBeta,n=e.isProd,i=e.getEnvironment;return t()||"qa"===i()?{isBeta:function(){return!0},isProd:n}:{isBeta:function(){return!1},isProd:n}}},46700:(e,t,n)=>{var a={"./af":42786,"./af.js":42786,"./ar":30867,"./ar-dz":14130,"./ar-dz.js":14130,"./ar-kw":96135,"./ar-kw.js":96135,"./ar-ly":56440,"./ar-ly.js":56440,"./ar-ma":47702,"./ar-ma.js":47702,"./ar-sa":16040,"./ar-sa.js":16040,"./ar-tn":37100,"./ar-tn.js":37100,"./ar.js":30867,"./az":31083,"./az.js":31083,"./be":9808,"./be.js":9808,"./bg":68338,"./bg.js":68338,"./bm":67438,"./bm.js":67438,"./bn":8905,"./bn-bd":76225,"./bn-bd.js":76225,"./bn.js":8905,"./bo":11560,"./bo.js":11560,"./br":1278,"./br.js":1278,"./bs":80622,"./bs.js":80622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":50877,"./cv.js":50877,"./cy":47373,"./cy.js":47373,"./da":24780,"./da.js":24780,"./de":59740,"./de-at":60217,"./de-at.js":60217,"./de-ch":60894,"./de-ch.js":60894,"./de.js":59740,"./dv":5300,"./dv.js":5300,"./el":50837,"./el.js":50837,"./en-au":78348,"./en-au.js":78348,"./en-ca":77925,"./en-ca.js":77925,"./en-gb":22243,"./en-gb.js":22243,"./en-ie":46436,"./en-ie.js":46436,"./en-il":47207,"./en-il.js":47207,"./en-in":44175,"./en-in.js":44175,"./en-nz":76319,"./en-nz.js":76319,"./en-sg":31662,"./en-sg.js":31662,"./eo":92915,"./eo.js":92915,"./es":55655,"./es-do":55251,"./es-do.js":55251,"./es-mx":96112,"./es-mx.js":96112,"./es-us":71146,"./es-us.js":71146,"./es.js":55655,"./et":5603,"./et.js":5603,"./eu":77763,"./eu.js":77763,"./fa":76959,"./fa.js":76959,"./fi":11897,"./fi.js":11897,"./fil":42549,"./fil.js":42549,"./fo":94694,"./fo.js":94694,"./fr":94470,"./fr-ca":63049,"./fr-ca.js":63049,"./fr-ch":52330,"./fr-ch.js":52330,"./fr.js":94470,"./fy":5044,"./fy.js":5044,"./ga":29295,"./ga.js":29295,"./gd":2101,"./gd.js":2101,"./gl":38794,"./gl.js":38794,"./gom-deva":27884,"./gom-deva.js":27884,"./gom-latn":23168,"./gom-latn.js":23168,"./gu":95349,"./gu.js":95349,"./he":24206,"./he.js":24206,"./hi":30094,"./hi.js":30094,"./hr":30316,"./hr.js":30316,"./hu":22138,"./hu.js":22138,"./hy-am":11423,"./hy-am.js":11423,"./id":29218,"./id.js":29218,"./is":90135,"./is.js":90135,"./it":90626,"./it-ch":10150,"./it-ch.js":10150,"./it.js":90626,"./ja":39183,"./ja.js":39183,"./jv":24286,"./jv.js":24286,"./ka":12105,"./ka.js":12105,"./kk":47772,"./kk.js":47772,"./km":18758,"./km.js":18758,"./kn":79282,"./kn.js":79282,"./ko":33730,"./ko.js":33730,"./ku":1408,"./ku.js":1408,"./ky":33291,"./ky.js":33291,"./lb":36841,"./lb.js":36841,"./lo":55466,"./lo.js":55466,"./lt":57010,"./lt.js":57010,"./lv":37595,"./lv.js":37595,"./me":39861,"./me.js":39861,"./mi":35493,"./mi.js":35493,"./mk":95966,"./mk.js":95966,"./ml":87341,"./ml.js":87341,"./mn":5115,"./mn.js":5115,"./mr":10370,"./mr.js":10370,"./ms":9847,"./ms-my":41237,"./ms-my.js":41237,"./ms.js":9847,"./mt":72126,"./mt.js":72126,"./my":56165,"./my.js":56165,"./nb":64924,"./nb.js":64924,"./ne":16744,"./ne.js":16744,"./nl":93901,"./nl-be":59814,"./nl-be.js":59814,"./nl.js":93901,"./nn":83877,"./nn.js":83877,"./oc-lnc":92135,"./oc-lnc.js":92135,"./pa-in":15858,"./pa-in.js":15858,"./pl":64495,"./pl.js":64495,"./pt":89520,"./pt-br":57971,"./pt-br.js":57971,"./pt.js":89520,"./ro":96459,"./ro.js":96459,"./ru":21793,"./ru.js":21793,"./sd":40950,"./sd.js":40950,"./se":10490,"./se.js":10490,"./si":90124,"./si.js":90124,"./sk":64249,"./sk.js":64249,"./sl":14985,"./sl.js":14985,"./sq":51104,"./sq.js":51104,"./sr":49131,"./sr-cyrl":79915,"./sr-cyrl.js":79915,"./sr.js":49131,"./ss":95606,"./ss.js":95606,"./sv":98760,"./sv.js":98760,"./sw":91172,"./sw.js":91172,"./ta":27333,"./ta.js":27333,"./te":23110,"./te.js":23110,"./tet":52095,"./tet.js":52095,"./tg":27321,"./tg.js":27321,"./th":9041,"./th.js":9041,"./tk":19005,"./tk.js":19005,"./tl-ph":75768,"./tl-ph.js":75768,"./tlh":89444,"./tlh.js":89444,"./tr":72397,"./tr.js":72397,"./tzl":28254,"./tzl.js":28254,"./tzm":51106,"./tzm-latn":30699,"./tzm-latn.js":30699,"./tzm.js":51106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":67691,"./uk.js":67691,"./ur":13795,"./ur.js":13795,"./uz":6791,"./uz-latn":60588,"./uz-latn.js":60588,"./uz.js":6791,"./vi":65666,"./vi.js":65666,"./x-pseudo":14378,"./x-pseudo.js":14378,"./yo":75805,"./yo.js":75805,"./zh-cn":83839,"./zh-cn.js":83839,"./zh-hk":55726,"./zh-hk.js":55726,"./zh-mo":99807,"./zh-mo.js":99807,"./zh-tw":74152,"./zh-tw.js":74152};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=46700},81093:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});var a=n(85893),i=(n(32747),n(1704)),r=n(15265),o=n(84213),l=n(82694),s=function(){return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(l.PageHeader,{children:[(0,a.jsx)(l.PageHeaderTitle,{className:"title",title:"Image Builder"}),(0,a.jsx)(i.Popover,{minWidth:"35rem",headerContent:"About image builder",bodyContent:(0,a.jsxs)(i.TextContent,{children:[(0,a.jsx)(i.Text,{children:"Image builder is a tool for creating deployment-ready customized system images: installation disks, virtual machines, cloud vendor-specific images, and others. By using image builder, you can make these images faster than manual procedures because it eliminates the specific configurations required for each output type."}),(0,a.jsx)(i.Text,{children:(0,a.jsx)(i.Button,{component:"a",target:"_blank",variant:"link",icon:(0,a.jsx)(r.LA,{}),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/creating_customized_rhel_images_using_the_image_builder_service",children:"Image builder for RPM-DNF documentation"})}),(0,a.jsx)(i.Text,{children:(0,a.jsx)(i.Button,{component:"a",target:"_blank",variant:"link",icon:(0,a.jsx)(r.LA,{}),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/documentation/en-us/edge_management/2022/html/create_rhel_for_edge_images_and_configure_automated_management/index",children:"Image builder for OSTree documentation"})})]}),children:(0,a.jsx)(i.Button,{variant:"plain","aria-label":"About image builder",className:"pf-u-pl-sm header-button",children:(0,a.jsx)(o.by,{})})}),(0,a.jsx)(l.OpenSourceBadge,{repositoriesURL:"https://www.osbuild.org/guides/image-builder-service/architecture.html"})]})})}},95090:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var a=function(e){return null==e?void 0:e.data}},82472:()=>{},97890:()=>{},17657:()=>{},22972:()=>{},43389:()=>{},70347:()=>{},10497:()=>{},1580:()=>{},94498:()=>{},54476:()=>{},28992:()=>{},30187:()=>{},40837:()=>{},78752:()=>{},71338:()=>{},44839:()=>{},74282:()=>{},25238:()=>{},1508:()=>{},91993:()=>{},99624:()=>{},36974:()=>{},27479:()=>{},93661:()=>{},56024:()=>{},67761:()=>{},43390:()=>{},22143:()=>{},314:()=>{},40209:()=>{},38299:()=>{},72816:()=>{}}]);
//# sourceMappingURL=../sourcemaps/2272.5232fea944b2af53b8f1d35b17332912.js.map