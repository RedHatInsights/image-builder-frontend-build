(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{704:function(e,t,a){(t=a(6)(!1)).push([e.i,".tiles{display:flex}.tile{flex:1 0 0px}.pf-c-tile:focus{--pf-c-tile__title--Color: var(--pf-c-tile__title--Color);--pf-c-tile__icon--Color: var(---pf-global--Color--100);--pf-c-tile--before--BorderWidth: var(--pf-global--BorderWidth--sm);--pf-c-tile--before--BorderColor: var(--pf-global--BorderColor--100)}.pf-c-tile.pf-m-selected:focus{--pf-c-tile__title--Color: var(--pf-c-tile--focus__title--Color);--pf-c-tile__icon--Color: var(--pf-c-tile--focus__icon--Color);--pf-c-tile--before--BorderWidth: var(--pf-c-tile--focus--before--BorderWidth);--pf-c-tile--before--BorderColor: var(--pf-c-tile--focus--before--BorderColor)}.provider-icon{width:1em;height:1em}\n",""]),e.exports=t},705:function(e,t,a){(t=a(6)(!1)).push([e.i,".textcontent-azure{margin-bottom:var(--pf-global--spacer--lg)}.textcontent-azure h3,.textcontent-azure h4{margin-top:var(--pf-global--spacer--sm);margin-bottom:var(--pf-global--spacer--xs)}.textcontent-azure p{margin-bottom:0}\n",""]),e.exports=t},706:function(e,t,a){(t=a(6)(!1)).push([e.i,".error{color:var(--pf-global--danger-color--100)}.textcontent-review h3{margin-top:var(--pf-global--spacer--xl)}@media screen and (min-width: 576px){.textcontent-review dl{grid-template:1fr / 25% 1fr;grid-gap:var(--pf-global--spacer--sm)}}#destination-header{font-size:18px;margin-bottom:var(--pf-global--spacer--sm)}\n",""]),e.exports=t},707:function(e,t,a){(t=a(6)(!1)).push([e.i,".footer-error{flex-basis:100%;color:var(--pf-global--palette--red-100)}\n",""]),e.exports=t},708:function(e,t,a){(t=a(6)(!1)).push([e.i,".pf-c-wizard__nav-list{padding-right:0px}\n",""]),e.exports=t},715:function(e,t,a){var o=a(704);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},n=a(7)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(704,(function(){var t=a(704);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");n(t)})),e.hot.dispose((function(){n()}))},716:function(e,t,a){var o=a(705);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},n=a(7)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(705,(function(){var t=a(705);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");n(t)})),e.hot.dispose((function(){n()}))},717:function(e,t,a){var o=a(706);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},n=a(7)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(706,(function(){var t=a(706);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");n(t)})),e.hot.dispose((function(){n()}))},718:function(e,t,a){var o=a(707);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},n=a(7)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(707,(function(){var t=a(707);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");n(t)})),e.hot.dispose((function(){n()}))},719:function(e,t,a){var o=a(708);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0},n=a(7)(o,r);o.locals&&(e.exports=o.locals),e.hot.accept(708,(function(){var t=a(708);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,o=0;for(a in e){if(!t||e[a]!==t[a])return!1;o++}for(a in t)o--;return 0===o}(o.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");n(t)})),e.hot.dispose((function(){n()}))},720:function(e,t,a){"use strict";a.r(t);var o=a(216),r=a.n(o),n=a(76),i=a.n(n),s=a(129),c=a.n(s),l=a(142),u=a.n(l),p=a(143),d=a.n(p),m=a(146),h=a.n(m),g=a(144),f=a.n(g),b=a(145),v=a.n(b),y=a(109),E=a.n(y),A=a(16),S=a.n(A),C=a(1),k=a.n(C),w=a(42),z=a(164),R=a(701),G=a(471),W=a(37),x=a(148),D=a(470),I=a(54),P=a.n(I),T=a(428),O=a(398),N=a(429),j=a(423),_=a(430),U=a(436);a(715);function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var F=function(e){f()(a,e);var t=B(a);function a(e){var o;return u()(this,a),(o=t.call(this,e)).setDistro=o.setDistro.bind(h()(o)),o.toggleUploadDestination=o.toggleUploadDestination.bind(h()(o)),o}return d()(a,[{key:"setDistro",value:function(e){this.props.setRelease({arch:"x86_64",distro:e})}},{key:"toggleUploadDestination",value:function(e){this.props.setUploadDestinations(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){P()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.uploadDestinations,P()({},e,!this.props.uploadDestinations[e])))}},{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(T.a,null,k.a.createElement(O.a,{headingLevel:"h2",size:"xl"},"Image output"),k.a.createElement(N.a,{isRequired:!0,label:"Release",fieldId:"release-select"},k.a.createElement(j.a,{value:this.props.release.distro,onChange:function(t){return e.setDistro(t)},isRequired:!0,"aria-label":"Select release input",id:"release-select","data-testid":"release-select"},[{value:"rhel-8",label:"Red Hat Enterprise Linux (RHEL) 8.3"},{value:"centos-8",label:"CentOS Stream 8"}].map((function(e){return k.a.createElement(_.a,{key:e.value,value:e.value,label:e.label})})))),k.a.createElement(N.a,{isRequired:!0,label:"Select target environment","data-testid":"target-select"},k.a.createElement("div",{className:"tiles"},k.a.createElement(U.a,{className:"tile pf-u-mr-sm","data-testid":"upload-aws",title:"Amazon Web Services",icon:k.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/aws.svg"}),onClick:function(){return e.toggleUploadDestination("aws")},isSelected:this.props.uploadDestinations.aws,isStacked:!0,isDisplayLarge:!0}),k.a.createElement(U.a,{className:"tile pf-u-mr-sm","data-testid":"upload-azure",title:"Microsoft Azure",icon:k.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg"}),onClick:function(){return e.toggleUploadDestination("azure")},isSelected:this.props.uploadDestinations.azure,isStacked:!0,isDisplayLarge:!0}),k.a.createElement(U.a,{className:"tile","data-testid":"upload-google",title:"Google Cloud Platform",icon:k.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"}),onClick:function(){return e.toggleUploadDestination("google")},isSelected:this.props.uploadDestinations.google,isStacked:!0,isDisplayLarge:!0})))))}}]),a}(C.Component);F.propTypes={setRelease:S.a.func,setUploadDestinations:S.a.func,release:S.a.object,uploadDestinations:S.a.object};var L=Object(z.connect)((function(e){return{release:e.pendingCompose.release,uploadDestinations:e.pendingCompose.uploadDestinations}}),(function(e){return{setRelease:function(t){return e(R.a.setRelease(t))},setUploadDestinations:function(t){return e(R.a.setUploadDestinations(t))}}}))(F),V=a(170);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var M=function(e){f()(a,e);var t=H(a);function a(e){return u()(this,a),t.call(this,e)}return d()(a,[{key:"render",value:function(){var e=this;return k.a.createElement(T.a,null,k.a.createElement(O.a,{headingLevel:"h2",size:"xl"},"Target Environment - Upload to AWS"),k.a.createElement("p",null,"Your image will be uploaded to a temporary account on Amazon Web Services. ",k.a.createElement("br",null),"The image will be shared with the account you provide below. ",k.a.createElement("br",null),"Within the next 14 days you will need to copy the shared image to your own account. After 14 days it will be unavailable and will have to be regenerated."),k.a.createElement(N.a,{isRequired:!0,label:"AWS account ID",fieldId:"aws-account-id",helperTextInvalid:this.props.errors["aws-account-id"]&&this.props.errors["aws-account-id"].value||"",validated:this.props.errors["aws-account-id"]?"error":"default"},k.a.createElement(V.a,{value:this.props.uploadAWS.shareWithAccounts||"",type:"text","aria-label":"AWS account ID",id:"aws-account-id","data-testid":"aws-account-id",isRequired:!0,onChange:function(t){return e.props.setUploadAWS({shareWithAccounts:[t]})}})))}}]),a}(C.Component);M.propTypes={setUploadAWS:S.a.func,uploadAWS:S.a.object,errors:S.a.object};var K=Object(z.connect)((function(e){return{uploadAWS:e.pendingCompose.uploadAWS}}),(function(e){return{setUploadAWS:function(t){return e(R.a.setUploadAWS(t))}}}))(M),Y=a(221),J=a(135);a(716);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var X=function(e){f()(a,e);var t=Q(a);function a(e){return u()(this,a),t.call(this,e)}return d()(a,[{key:"render",value:function(){var e=this;return k.a.createElement(k.a.Fragment,null,k.a.createElement(Y.a,{className:"textcontent-azure"},k.a.createElement(O.a,{headingLevel:"h2"},"Target Environment - Upload to Azure"),k.a.createElement(J.a,null,"Image Builder will send an image to an authorized Azure account."),k.a.createElement(O.a,{headingLevel:"h3"},"OAuth permissions"),k.a.createElement(J.a,null,'In order to use Image Builder to push images to Azure, Image Builder must be configured as an authorized application, and given the role of "Contributor" to at least one resource group.',k.a.createElement("br",null),"Image Builder must be authorized by an account owner.",k.a.createElement("br",null),k.a.createElement("a",{href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow"},k.a.createElement("small",null,"Learn more"))),k.a.createElement("a",{href:"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?client_id=b94bb246-b02c-4985-9c22-d44e66f657f4\n&scope=openid&response_type=code&response_mode=form_post\n&redirect_uri=https%3A%2F%2Flogin.microsoftonline.com%2Fcommon%2Foauth2%2Fnativeclient",target:"_blank",rel:"noopener noreferrer"},"Authorize Image Builder on Azure ",k.a.createElement(x.a,null))),k.a.createElement(O.a,{headingLevel:"h3"},"Destination"),k.a.createElement(J.a,null,"Your image will be uploaded to the resource group in the subscription you specify."),k.a.createElement(T.a,null,k.a.createElement(N.a,{isRequired:!0,label:"Tenant ID",fieldId:"azure-tenant-id",helperTextInvalid:this.props.errors["azure-tenant-id"]&&this.props.errors["azure-tenant-id"].value||"",validated:this.props.errors["azure-tenant-id"]?"error":"default"},k.a.createElement(V.a,{value:this.props.uploadAzure.tenantId||"",type:"text","aria-label":"Azure tenant-id",id:"azure-tenant-id","data-testid":"azure-tenant-id",isRequired:!0,onChange:function(t){return e.props.setUploadAzure(Object.assign(e.props.uploadAzure,{tenantId:t}))}})),k.a.createElement(N.a,{isRequired:!0,label:"Subscription ID",fieldId:"azure-subscription-id",helperTextInvalid:this.props.errors["azure-subscription-id"]&&this.props.errors["azure-subscription-id"].value||"",validated:this.props.errors["azure-subscription-id"]?"error":"default"},k.a.createElement(V.a,{value:this.props.uploadAzure.subscriptionId||"",type:"text","aria-label":"Azure subscription-id",id:"azure-subscription-id","data-testid":"azure-subscription-id",isRequired:!0,onChange:function(t){return e.props.setUploadAzure(Object.assign(e.props.uploadAzure,{subscriptionId:t}))}})),k.a.createElement(N.a,{isRequired:!0,label:"Resource group",fieldId:"azure-resource-group",helperTextInvalid:this.props.errors["azure-resource-group"]&&this.props.errors["azure-resource-group"].value||"",validated:this.props.errors["azure-resource-group"]?"error":"default"},k.a.createElement(V.a,{value:this.props.uploadAzure.resourceGroup||"",type:"text","aria-label":"Azure resource group",id:"azure-resource-group","data-testid":"azure-resource-group",isRequired:!0,onChange:function(t){return e.props.setUploadAzure(Object.assign(e.props.uploadAzure,{resourceGroup:t}))}}))))}}]),a}(C.Component);X.propTypes={setUploadAzure:S.a.func,uploadAzure:S.a.object,errors:S.a.object};var Z=Object(z.connect)((function(e){return{uploadAzure:e.pendingCompose.uploadAzure}}),(function(e){return{setUploadAzure:function(t){return e(R.a.setUploadAzure(t))}}}))(X),$=a(466),ee=a(410);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var ae=function(e){f()(a,e);var t=te(a);function a(e){var o;u()(this,a),(o=t.call(this,e)).setPackagesSearchName=o.setPackagesSearchName.bind(h()(o)),o.handlePackagesSearch=o.handlePackagesSearch.bind(h()(o)),o.handlePackagesFilter=o.handlePackagesFilter.bind(h()(o)),o.packageListChange=o.packageListChange.bind(h()(o)),o.mapPackagesToComponent=o.mapPackagesToComponent.bind(h()(o));var r=o.mapPackagesToComponent(o.props.selectedPackages);return o.state={packagesAvailableComponents:[],packagesSelectedComponents:r,packagesFilteredComponents:r,packagesSearchName:""},o}return d()(a,[{key:"setPackagesSearchName",value:function(e){this.setState({packagesSearchName:e})}},{key:"mapPackagesToComponent",value:function(e){return e.map((function(e){return k.a.createElement(Y.a,{key:e},k.a.createElement("span",{className:"pf-c-dual-list-selector__item-text"},e.name),k.a.createElement("small",null,e.summary))}))}},{key:"mapComponentToPackage",value:function(e){return{name:e.props.children[0].props.children,summary:e.props.children[1].props.children}}},{key:"handlePackagesSearch",value:function(){var e=this;ee.a.getPackages(this.props.release.distro,this.props.release.arch,this.state.packagesSearchName).then((function(t){var a=e.mapPackagesToComponent(t.data);e.setState({packagesAvailableComponents:a})}))}},{key:"handlePackagesFilter",value:function(e){var t=this,a=this.state.packagesSelectedComponents.filter((function(a){return t.mapComponentToPackage(a).name.includes(e)}));this.setState({packagesFilteredComponents:a})}},{key:"packageListChange",value:function(e,t){var a=this,o=t.map((function(e){return a.mapComponentToPackage(e)}));this.setState({packagesAvailableComponents:e,packagesSelectedComponents:t,packagesFilteredComponents:t}),this.props.setSelectedPackages(o)}},{key:"render",value:function(){var e=[k.a.createElement(W.a,{"aria-label":"Search button for available packages",key:"availableSearchButton","data-testid":"search-pkgs-button",onClick:this.handlePackagesSearch},"Search")];return k.a.createElement(k.a.Fragment,null,k.a.createElement(Y.a,null,k.a.createElement(O.a,{headingLevel:"h2",size:"xl"},"Additional packages"),k.a.createElement(J.a,null,"Optionally add additional packages to your ",k.a.createElement("strong",null,this.props.release.distro)," image")),k.a.createElement($.a,{className:"pf-u-mt-sm",isSearchable:!0,availableOptionsActions:e,availableOptions:this.state.packagesAvailableComponents,chosenOptions:this.state.packagesFilteredComponents,addSelected:this.packageListChange,removeSelected:this.packageListChange,addAll:this.packageListChange,removeAll:this.packageListChange,onAvailableOptionsSearchInputChanged:this.setPackagesSearchName,onChosenOptionsSearchInputChanged:this.handlePackagesFilter,filterOption:function(){return!0},id:"basicSelectorWithSearch"}))}}]),a}(C.Component);ae.propTypes={release:S.a.object,selectedPackages:S.a.array,setSelectedPackages:S.a.func};var oe=Object(z.connect)((function(e){return{release:e.pendingCompose.release,selectedPackages:e.pendingCompose.selectedPackages}}),(function(e){return{setSelectedPackages:function(t){return e(R.a.setSelectedPackages(t))}}}))(ae),re=a(226),ne=a(434),ie=a(435),se=a(433),ce=a(171);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var ue=k.a.createElement(re.a,{hasAutoWidth:!0,maxWidth:"35rem",headerContent:"Valid account types",bodyContent:k.a.createElement(Y.a,null,k.a.createElement(J.a,null,"The following account types can have an image shared with them:"),k.a.createElement(ne.a,null,k.a.createElement(ie.a,null,k.a.createElement("strong",null,"Google account:")," A Google account represents a developer, an administrator, or any other person who interacts with Google Cloud. e.g., ",k.a.createElement("em",null,"`alice@gmail.com`"),"."),k.a.createElement(ie.a,null,k.a.createElement("strong",null,"Service account:")," A service account is an account for an application instead of an individual end user. e.g., ",k.a.createElement("em",null,"`myapp@appspot.gserviceaccount.com`"),"."),k.a.createElement(ie.a,null,k.a.createElement("strong",null,"Google group:")," A Google group is a named collection of Google accounts and and service accounts. e.g., ",k.a.createElement("em",null,"`admins@example.com`"),"."),k.a.createElement(ie.a,null,k.a.createElement("strong",null,"Google workspace domain/Cloud identity domain:")," A Google workspace or cloud identity domain represents a virtual group of all the Google accounts in an organization. These domains represent your organization's internet domain name. e.g., ",k.a.createElement("em",null,"`mycompany.com`"),".")))},k.a.createElement("button",{type:"button","aria-label":"Account info","aria-describedby":"google-account-type",className:"pf-c-form__group-label-help"},k.a.createElement(ce.a,null))),pe=function(e){f()(a,e);var t=le(a);function a(e){return u()(this,a),t.call(this,e)}return d()(a,[{key:"render",value:function(){var e=this;return k.a.createElement(T.a,null,k.a.createElement(O.a,{headingLevel:"h2",size:"xl"},"Target Environment - Google Cloud Platform"),k.a.createElement("p",null,"Your image will be uploaded to an account on Google Cloud Platform. ",k.a.createElement("br",null),"The image will be shared with the email you provide below. ",k.a.createElement("br",null),"Within the next 14 days you will need to copy the shared image to your own account. After 14 days it will be unavailable and will have to be regenerated."),k.a.createElement(N.a,{isRequired:!0,label:"Type",labelIcon:ue,fieldId:"google-account-type"},k.a.createElement(se.a,{onChange:function(){return e.props.setUploadGoogle({accountType:"googleAccount",shareWithAccounts:[{user:null}]})},isChecked:"googleAccount"===this.props.uploadGoogle.accountType,label:"Google account",id:"radio-google-account",value:"googleAccount"}),k.a.createElement(se.a,{onChange:function(){return e.props.setUploadGoogle({accountType:"serviceAccount",shareWithAccounts:[{serviceAccount:null}]})},isChecked:"serviceAccount"===this.props.uploadGoogle.accountType,label:"Service account",id:"radio-service-account",value:"serviceAccount"}),k.a.createElement(se.a,{onChange:function(){return e.props.setUploadGoogle({accountType:"googleGroup",shareWithAccounts:[{group:null}]})},isChecked:"googleGroup"===this.props.uploadGoogle.accountType,label:"Google group",id:"radio-google-group",value:"googleGroup"}),k.a.createElement(se.a,{onChange:function(){return e.props.setUploadGoogle({accountType:"domain",shareWithAccounts:[{domain:null}]})},isChecked:"domain"===this.props.uploadGoogle.accountType,label:"Google Workspace Domain or Cloud Identity Domain",id:"radio-domain",value:"domain"})),"googleAccount"===this.props.uploadGoogle.accountType&&k.a.createElement(N.a,{isRequired:!0,label:"Email address",fieldId:"user"},k.a.createElement(V.a,{value:this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].user||"",type:"text","aria-label":"Google email address",id:"input-google-user","data-testid":"input-google-user",isRequired:!0,onChange:function(t){return e.props.setUploadGoogle({accountType:"googleAccount",shareWithAccounts:[{user:t}]})}})),"serviceAccount"===this.props.uploadGoogle.accountType&&k.a.createElement(N.a,{isRequired:!0,label:"Email address",fieldId:"service-account"},k.a.createElement(V.a,{value:this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].serviceAccount||"",type:"text","aria-label":"Google email address",id:"input-google-service-account","data-testid":"input-google-service-account",isRequired:!0,onChange:function(t){return e.props.setUploadGoogle({accountType:"serviceAccount",shareWithAccounts:[{serviceAccount:t}]})}})),"googleGroup"===this.props.uploadGoogle.accountType&&k.a.createElement(N.a,{isRequired:!0,label:"Email address",fieldId:"group"},k.a.createElement(V.a,{value:this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].group||"",type:"text","aria-label":"Google email address",id:"input-google-group","data-testid":"input-google-group",isRequired:!0,onChange:function(t){return e.props.setUploadGoogle({accountType:"googleGroup",shareWithAccounts:[{group:t}]})}})),"domain"===this.props.uploadGoogle.accountType&&k.a.createElement(N.a,{isRequired:!0,label:"Domain",fieldId:"domain"},k.a.createElement(V.a,{value:this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].domain||"",type:"text","aria-label":"Google domain",id:"input-google-domain","data-testid":"input-google-domain",isRequired:!0,onChange:function(t){return e.props.setUploadGoogle({accountType:"domain",shareWithAccounts:[{domain:t}]})}})))}}]),a}(C.Component);pe.propTypes={setUploadGoogle:S.a.func,uploadGoogle:S.a.object,errors:S.a.object};var de=Object(z.connect)((function(e){return{uploadGoogle:e.pendingCompose.uploadGoogle}}),(function(e){return{setUploadGoogle:function(t){return e(R.a.setUploadGoogle(t))}}}))(pe);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var he=function(e){f()(o,e);var t,a=me(o);function o(e){return u()(this,o),a.call(this,e)}return d()(o,[{key:"componentDidMount",value:(t=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:t=e.sent,this.props.setSubscription(Object.assign(this.props.subscription,{organization:t.identity.internal.org_id}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this;return k.a.createElement(T.a,null,k.a.createElement(O.a,{headingLevel:"h2",size:"xl"},"Registration"),k.a.createElement(N.a,{isRequired:!0,label:"Register the system"},k.a.createElement(se.a,{name:"subscribe-now-radio",isChecked:this.props.subscribeNow,id:"subscribe-now-radio",label:"Embed an activation key and register systems on first boot",onChange:function(){return e.props.setSubscribeNow(!0)},"data-testid":"register-now-radio-button"}),k.a.createElement(se.a,{name:"subscribe-later-radio",isChecked:!this.props.subscribeNow,label:"Register the system later",id:"subscribe-later-radio",onChange:function(){return e.props.setSubscribeNow(!1)},"data-testid":"register-later-radio-button"})),this.props.subscribeNow&&k.a.createElement(k.a.Fragment,null,k.a.createElement(N.a,{label:"Organization ID",fieldId:"subscription-organization"},k.a.createElement(V.a,{isDisabled:!0,value:this.props.subscription.organization||"",type:"text",id:"subscription-organization","aria-label":"Subscription organization ID","data-testid":"organization-id"})),k.a.createElement(N.a,{isRequired:!0,label:"Activation key",fieldId:"subscription-activation",helperTextInvalid:"A value is required",validated:this.props.isValidSubscription||null===this.props.subscription.activationKey?"default":"error"},k.a.createElement(V.a,{value:this.props.subscription.activationKey||"",type:"password","data-testid":"subscription-activation",id:"subscription-activation","aria-label":"Subscription activation key",onChange:function(t){return e.props.setSubscription(Object.assign(e.props.subscription,{activationKey:t}))},validated:this.props.isValidSubscription||null===this.props.subscription.activationKey?"default":"error",isRequired:!0}))))}}]),o}(C.Component);he.propTypes={setSubscription:S.a.func,setSubscribeNow:S.a.func,subscription:S.a.object,subscribeNow:S.a.bool,isValidSubscription:S.a.bool};var ge=Object(z.connect)((function(e){return{subscription:e.pendingCompose.subscription,subscribeNow:e.pendingCompose.subscribeNow}}),(function(e){return{setSubscription:function(t){return e(R.a.setSubscription(t))},setSubscribeNow:function(t){return e(R.a.setSubscribeNow(t))}}}))(he),fe=a(268),be=a(98);a(717);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var ye=function(e){f()(a,e);var t=ve(a);function a(e){return u()(this,a),t.call(this,e)}return d()(a,[{key:"render",value:function(){var e=k.a.createElement(k.a.Fragment,null,k.a.createElement(J.a,{id:"destination-header"},"Amazon Web Services"),k.a.createElement(ne.a,{component:ne.b.dl,"data-testid":"review-image-upload-aws"},k.a.createElement(ie.a,{component:ie.b.dt},"Account ID"),this.props.uploadAWSErrors["aws-account-id"]?k.a.createElement(ie.a,{component:ie.b.dd},k.a.createElement(be.a,{className:"error"})," ",this.props.uploadAWSErrors["aws-account-id"].value):k.a.createElement(ie.a,{component:ie.b.dd},this.props.uploadAWS.shareWithAccounts[0]))),t=k.a.createElement(k.a.Fragment,null,k.a.createElement(J.a,{id:"destination-header"},"Google Cloud Platform"),k.a.createElement(ne.a,{component:ne.b.dl,"data-testid":"review-image-upload-google"},"googleAccount"===this.props.uploadGoogle.accountType&&k.a.createElement(k.a.Fragment,null,k.a.createElement(ie.a,{component:ie.b.dt},"Google account"),k.a.createElement(ie.a,{component:ie.b.dd},this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].user||"")),"serviceAccount"===this.props.uploadGoogle.accountType&&k.a.createElement(k.a.Fragment,null,k.a.createElement(ie.a,{component:ie.b.dt},"Service account"),k.a.createElement(ie.a,{component:ie.b.dd},this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].serviceAccount||"")),"googleGroup"===this.props.uploadGoogle.accountType&&k.a.createElement(k.a.Fragment,null,k.a.createElement(ie.a,{component:ie.b.dt},"Google group"),k.a.createElement(ie.a,{component:ie.b.dd},this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].group||"")),"domain"===this.props.uploadGoogle.accountType&&k.a.createElement(k.a.Fragment,null,k.a.createElement(ie.a,{component:ie.b.dt},"Domain"),k.a.createElement(ie.a,{component:ie.b.dd},this.props.uploadGoogle.shareWithAccounts[0]&&this.props.uploadGoogle.shareWithAccounts[0].domain||"")))),a=k.a.createElement(ie.a,{component:ie.b.dd},"Register the system later");return this.props.subscribeNow&&(a=k.a.createElement(k.a.Fragment,null,k.a.createElement(ie.a,{component:ie.b.dd},"Register the system on first boot"),k.a.createElement(ie.a,{component:ie.b.dt},"Activation key"),this.props.isValidSubscription&&this.props.subscription.activationKey?k.a.createElement(ie.a,{component:ie.b.dd,type:"password"},"*".repeat(this.props.subscription.activationKey.length)):k.a.createElement(ie.a,{component:ie.b.dd},k.a.createElement(be.a,{className:"error"})," ","A value is required"))),k.a.createElement(k.a.Fragment,null,(Object.keys(this.props.uploadAWSErrors).length>0||!this.props.isValidSubscription)&&k.a.createElement(fe.a,{variant:"danger",className:"pf-u-mb-xl",isInline:!0,title:"Required information is missing"}),k.a.createElement(O.a,{headingLevel:"h2",size:"xl"},"Review"),k.a.createElement(Y.a,null,k.a.createElement(J.a,{component:J.b.small},"Review the information and click the Create button to create the image using the following criteria."),k.a.createElement(J.a,{component:J.b.h3},"Image output"),k.a.createElement(ne.a,{component:ne.b.dl,"data-testid":"review-image-output"},k.a.createElement(ie.a,{component:ie.b.dt},"Release"),k.a.createElement(ie.a,{component:ie.b.dd},{"rhel-8":"Red Hat Enterprise Linux (RHEL) 8.3","centos-8":"CentOS Stream 8"}[this.props.release])),k.a.createElement(J.a,{component:J.b.h3},"Target environment"),this.props.uploadDestinations.aws&&e,this.props.uploadDestinations.google&&t,k.a.createElement(J.a,{component:J.b.h3},"Registration"),k.a.createElement(ne.a,{component:ne.b.dl,"data-testid":"review-image-registration"},k.a.createElement(ie.a,{component:ie.b.dt},"Subscription"),a)))}}]),a}(C.Component);ye.propTypes={release:S.a.string,uploadAWS:S.a.object,uploadGoogle:S.a.object,uploadDestinations:S.a.object,uploadAzure:S.a.object,subscription:S.a.object,subscribeNow:S.a.bool,uploadAWSErrors:S.a.object,isValidSubscription:S.a.bool};var Ee=Object(z.connect)((function(e){return{uploadDestinations:e.pendingCompose.uploadDestinations,uploadAWS:e.pendingCompose.uploadAWS,uploadAzure:e.pendingCompose.uploadAzure,uploadGoogle:e.pendingCompose.uploadGoogle,subscribeNow:e.pendingCompose.subscribeNow,subscription:e.pendingCompose.subscription}}),null)(ye),Ae=a(437),Se=a(248),Ce=(a(718),function(e){return k.a.createElement(k.a.Fragment,null,k.a.createElement(Ae.a,null,k.a.createElement(Se.b,null,(function(t){var a=t.activeStep,o=t.onNext,r=t.onBack,n=t.onClose,i="Next";"Review"===a.name&&(i=e.isSaveInProgress?"Creating...":"Create");var s=e.isSaveInProgress;return"Image output"!==a.name&&"Review"!==a.name||e.isValidUploadDestination||(s=!0),"Registration"!==a.name&&"Review"!==a.name||e.isValidSubscription||(s=!0),k.a.createElement(k.a.Fragment,null,k.a.createElement(W.a,{"aria-label":"Review"===a.name?"Create":"Next",variant:W.c.primary,onClick:o,isDisabled:s},i),k.a.createElement(W.a,{"aria-label":"Back",variant:W.c.secondary,onClick:r,isDisabled:e.isSaveInProgress||"Image output"===a.name},"Back"),k.a.createElement(W.a,{"aria-label":"Cancel",variant:W.c.link,onClick:n,isDisabled:e.isSaveInProgress},"Cancel"))})),e.error&&k.a.createElement(Y.a,{className:"footer-error"},k.a.createElement(J.a,null,k.a.createElement(be.a,null)," ",k.a.createElement("strong",null,e.error)))))});Ce.propTypes={isValidUploadDestination:S.a.bool,isSaveInProgress:S.a.bool,isValidSubscription:S.a.bool,error:S.a.string};var ke=Ce;a(719);function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=E()(e);if(t){var r=E()(this).constructor;a=Reflect.construct(o,arguments,r)}else a=o.apply(this,arguments);return v()(this,a)}}var ze=function(e){f()(o,e);var t,a=we(o);function o(e){var t;return u()(this,o),(t=a.call(this,e)).onStep=t.onStep.bind(h()(t)),t.onSave=t.onSave.bind(h()(t)),t.onClose=t.onClose.bind(h()(t)),t.validate=t.validate.bind(h()(t)),t.validateUploadAmazon=t.validateUploadAmazon.bind(h()(t)),t.state={uploadAWSErrors:{},uploadAzureErrors:{},uploadGoogleErrors:{},isSaveInProgress:!1,isValidSubscription:!0},t}return d()(o,[{key:"componentDidMount",value:(t=c()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:t=e.sent,this.setState({subscription:{organization:Number(t.identity.internal.org_id)}});case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"onStep",value:function(e){"Review"===e.name&&this.validate()}},{key:"validate",value:function(){var e=this;Object.keys(this.props.uploadDestinations).forEach((function(t){switch(t){case"aws":e.validateUploadAmazon();break;case"azure":e.validateUploadAzure()}})),this.props.subscribeNow?this.setState({isValidSubscription:!!this.props.subscription.activationKey}):this.setState({isValidSubscription:!0})}},{key:"validateUploadAmazon",value:function(){var e={},t=this.props.uploadAWS.shareWithAccounts;(0===t.length||12!==t[0].length||isNaN(t[0]))&&(e["aws-account-id"]={label:"AWS account ID",value:"A 12-digit number is required"}),this.setState({uploadAWSErrors:e})}},{key:"validateUploadAzure",value:function(){var e={},t=this.props.uploadAzure.tenantId;null!==t&&""!==t||(e["azure-resource-group"]={label:"Azure tenant ID",value:"A tenant ID is required"});var a=this.props.uploadAzure.subscriptionId;null!==a&&""!==a||(e["azure-subscription-id"]={label:"Azure subscription ID",value:"A subscription ID is required"});var o=this.props.uploadAzure.resourceGroup;null!==o&&""!==o||(e["azure-resource-group"]={label:"Azure resource group",value:"A resource group is required"})}},{key:"onSave",value:function(){var e=this;this.setState({isSaveInProgress:!0});var t={packages:this.props.selectedPackages.map((function(e){return e.name}))};this.props.subscribeNow&&(t.subscription={"activation-key":this.props.subscription.activationKey,insights:this.props.subscription.insights,organization:this.props.subscription.organization,"server-url":"subscription.rhsm.redhat.com","base-url":"https://cdn.redhat.com/"});var a=[];if(this.props.uploadDestinations.aws){var o={distribution:this.props.release.distro,image_requests:[{architecture:this.props.release.arch,image_type:"ami",upload_request:{type:"aws",options:{share_with_accounts:this.props.uploadAWS.shareWithAccounts}}}],customizations:t};a.push(o)}if(this.props.uploadDestinations.google){var r="";switch(this.props.uploadGoogle.accountType){case"googleAccount":r="user:"+this.props.uploadGoogle.shareWithAccounts[0].user;break;case"serviceAccount":r="serviceAccount:"+this.props.uploadGoogle.shareWithAccounts[0].serviceAccount;break;case"googleGroup":r="group:"+this.props.uploadGoogle.shareWithAccounts[0].group;break;case"domain":r="domain:"+this.props.uploadGoogle.shareWithAccounts[0].domain}var n={distribution:this.props.release.distro,image_requests:[{architecture:this.props.release.arch,image_type:"vhd",upload_request:{type:"gcp",options:{share_with_accounts:[r]}}}],customizations:t};a.push(n)}if(this.props.uploadDestinations.azure){var i={distribution:this.props.release.distro,image_requests:[{architecture:this.props.release.arch,image_type:"vhd",upload_request:{type:"azure",options:{tenant_id:this.props.uploadAzure.tenantId,subscription_id:this.props.uploadAzure.subscriptionId,resource_group:this.props.uploadAzure.resourceGroup}}}],customizations:t};a.push(i)}var s=a.map((function(t){return e.props.composeStart(t)}));Promise.all(s).then((function(){e.props.composesError||(e.props.addNotification({variant:"success",title:"Your image is being created"}),e.props.history.push("/landing")),e.setState({isSaveInProgress:!1})}))}},{key:"onClose",value:function(){this.props.history.push("/landing")}},{key:"render",value:function(){var e=this.props.uploadDestinations.aws||this.props.uploadDestinations.azure||this.props.uploadDestinations.google,t={name:"Image output",component:k.a.createElement(L,null)},a={name:"Amazon Web Services",component:k.a.createElement(K,{errors:this.state.uploadAWSErrors})},o={name:"Microsoft Azure",component:k.a.createElement(Z,{errors:this.state.uploadAzureErrors})},n={name:"Google Cloud Platform",component:k.a.createElement(de,{errors:this.state.uploadGoogleErrors})},i=[];this.props.uploadDestinations.aws&&i.push(a),this.props.uploadDestinations.azure&&i.push(o),this.props.uploadDestinations.google&&i.push(n);var s={name:"Target environment",steps:i},c=[t].concat(r()(s.steps.length>0?[s]:[]),[{name:"Registration",component:k.a.createElement(ge,{isValidSubscription:this.state.isValidSubscription})},{name:"Packages",component:k.a.createElement(oe,null)},{name:"Review",component:k.a.createElement(Ee,{uploadAWSErrors:this.state.uploadAWSErrors,isValidSubscription:this.state.isValidSubscription}),nextButtonText:"Create"}]);return k.a.createElement(k.a.Fragment,null,k.a.createElement(G.a,{title:"Create image",description:k.a.createElement(k.a.Fragment,null,"Create a RHEL image and push it to cloud providers."," ",k.a.createElement(W.a,{component:"a",target:"_blank",variant:"link",icon:k.a.createElement(x.a,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8-beta/"},"Documentation")),onNext:this.onStep,onGoToStep:this.onStep,steps:c,onClose:this.onClose,onSave:this.onSave,footer:k.a.createElement(ke,{isValidUploadDestination:e,isSaveInProgress:this.state.isSaveInProgress,isValidSubscription:this.state.isValidSubscription,error:this.props.composesError}),isOpen:!0}))}}]),o}(C.Component);ze.propTypes={composesError:S.a.string,composeUpdated:S.a.func,composeStart:S.a.func,addNotification:S.a.func,history:S.a.object,release:S.a.object,uploadDestinations:S.a.object,uploadAWS:S.a.object,uploadAzure:S.a.object,uploadGoogle:S.a.object,subscription:S.a.object,subscribeNow:S.a.bool,selectedPackages:S.a.array};t.default=Object(z.connect)((function(e){return{composesError:e.composes.error,release:e.pendingCompose.release,uploadDestinations:e.pendingCompose.uploadDestinations,uploadAWS:e.pendingCompose.uploadAWS,uploadAzure:e.pendingCompose.uploadAzure,uploadGoogle:e.pendingCompose.uploadGoogle,selectedPackages:e.pendingCompose.selectedPackages,subscription:e.pendingCompose.subscription,subscribeNow:e.pendingCompose.subscribeNow}}),(function(e){return{composeUpdated:function(t){return e(R.a.composeUpdated(t))},composeStart:function(t){return e(R.a.composeStart(t))},addNotification:function(t){return e(Object(D.a)(t))}}}))(Object(w.o)(ze))}}]);
//# sourceMappingURL=6.2e68426028d725dabfcd.js.map