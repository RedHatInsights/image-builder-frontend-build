(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{625:function(e,t,a){(t=a(6)(!1)).push([e.i,".tiles{display:flex}.tile{flex:1 0 0px}.pf-c-tile:focus{--pf-c-tile__title--Color: var(--pf-c-tile__title--Color);--pf-c-tile__icon--Color: var(---pf-global--Color--100);--pf-c-tile--before--BorderWidth: var(--pf-global--BorderWidth--sm);--pf-c-tile--before--BorderColor: var(--pf-global--BorderColor--100)}.pf-c-tile.pf-m-selected:focus{--pf-c-tile__title--Color: var(--pf-c-tile--focus__title--Color);--pf-c-tile__icon--Color: var(--pf-c-tile--focus__icon--Color);--pf-c-tile--before--BorderWidth: var(--pf-c-tile--focus--before--BorderWidth);--pf-c-tile--before--BorderColor: var(--pf-c-tile--focus--before--BorderColor)}.provider-icon{width:1em;height:1em}\n",""]),e.exports=t},626:function(e,t,a){(t=a(6)(!1)).push([e.i,".error{color:var(--pf-global--danger-color--100)}.pf-c-content h3{margin-top:var(--pf-global--spacer--xl);margin-bottom:var(--pf-global--spacer--md)}@media screen and (min-width: 576px){.pf-c-content dl{grid-template:1fr / 25% 1fr;grid-gap:var(--pf-global--spacer--sm)}}\n",""]),e.exports=t},627:function(e,t,a){(t=a(6)(!1)).push([e.i,".pf-c-wizard__nav-list{padding-right:0px}\n",""]),e.exports=t},641:function(e,t,a){var r=a(625);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0},i=a(7)(r,o);r.locals&&(e.exports=r.locals),e.hot.accept(625,(function(){var t=a(625);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},642:function(e,t,a){var r=a(626);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0},i=a(7)(r,o);r.locals&&(e.exports=r.locals),e.hot.accept(626,(function(){var t=a(626);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},643:function(e,t,a){var r=a(627);"string"==typeof r&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0},i=a(7)(r,o);r.locals&&(e.exports=r.locals),e.hot.accept(627,(function(){var t=a(627);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var a,r=0;for(a in e){if(!t||e[a]!==t[a])return!1;r++}for(a in t)r--;return 0===r}(r.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");i(t)})),e.hot.dispose((function(){i()}))},644:function(e,t,a){"use strict";a.r(t);var r=a(636),o=a.n(r),i=a(640),n=a.n(i),s=a(99),l=a.n(s),c=a(158),u=a.n(c),p=a(190),d=a.n(p),b=a(191),m=a.n(b),f=a(449),h=a.n(f),g=a(192),v=a.n(g),E=a(141),S=a.n(E),y=a(193),w=a.n(y),A=a(22),k=a.n(A),C=a(1),D=a.n(C),R=a(127),O=a(175),W=a(631),z=a(418),N=a(379),_=a(352),j=a(380),x=a(375),U=a(381),I=a(386),q=(a(641),function(e){return D.a.createElement(D.a.Fragment,null,D.a.createElement(N.a,null,D.a.createElement(_.a,{headingLevel:"h2",size:"xl"},"Image output"),D.a.createElement(j.a,{isRequired:!0,label:"Release",fieldId:"release-select"},D.a.createElement(x.a,{value:e.value,onChange:function(t){return e.setRelease(t)},isRequired:!0,"aria-label":"Select release input",id:"release-select","data-testid":"release-select"},[{value:"rhel-8",label:"Red Hat Enterprise Linux (RHEL) 8.3"},{value:"centos-8",label:"CentOS Stream 8"}].map((function(e){return D.a.createElement(U.a,{key:e.value,value:e.value,label:e.label})})))),D.a.createElement(j.a,{isRequired:!0,label:"Select target environment","data-testid":"target-select"},D.a.createElement("div",{className:"tiles"},D.a.createElement(I.a,{className:"tile pf-u-mr-sm","data-testid":"upload-aws",title:"Amazon Web Services",icon:D.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/aws.svg"}),onClick:function(){return e.toggleUploadDestination("aws")},isSelected:e.uploadDestinations.aws,isStacked:!0,isDisplayLarge:!0}),D.a.createElement(I.a,{className:"tile pf-u-mr-sm","data-testid":"upload-azure",title:"Microsoft Azure",icon:D.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/microsoft-azure-short.svg"}),onClick:function(){return e.toggleUploadDestination("azure")},isSelected:e.uploadDestinations.azure,isStacked:!0,isDisplayLarge:!0,isDisabled:!0}),D.a.createElement(I.a,{className:"tile","data-testid":"upload-google",title:"Google Cloud Platform",icon:D.a.createElement("img",{className:"provider-icon",src:"/apps/frontend-assets/partners-icons/google-cloud-short.svg"}),onClick:function(){return e.toggleUploadDestination("google")},isSelected:e.uploadDestinations.google,isStacked:!0,isDisplayLarge:!0,isDisabled:!0})))))});q.propTypes={toggleUploadAWS:k.a.func,uploadDestinations:k.a.object,setRelease:k.a.func,value:k.a.string,toggleUploadDestination:k.a.func};var T=q,P=a(147),L=function(e){return D.a.createElement(N.a,null,D.a.createElement(_.a,{headingLevel:"h2",size:"xl"},"Upload to AWS"),D.a.createElement("p",null,"Your image will be uploaded to a temporary account on Amazon Web Services. The image will be shared with the account ID you provide below. ",D.a.createElement("br",null),"Within the next 14 days you will need to copy the shared image to your own account. After 14 days it will be unavailable and will have to be regenerated."),D.a.createElement(j.a,{isRequired:!0,label:"AWS account ID",fieldId:"aws-account-id",helperTextInvalid:e.errors["aws-account-id"]&&e.errors["aws-account-id"].value||"",validated:e.errors["aws-account-id"]?"error":"default"},D.a.createElement(P.a,{value:e.uploadAWS.options.share_with_accounts||"",type:"text","aria-label":"AWS account ID",id:"aws-account-id","data-testid":"aws-account-id",isRequired:!0,onChange:function(t){return e.setUploadOptions("aws",Object.assign(e.uploadAWS.options,{share_with_accounts:[t]}))}})))};L.propTypes={setUploadOptions:k.a.func,uploadAWS:k.a.object,errors:k.a.object};var B=L,F=a(384),G=function(e){return D.a.createElement(N.a,null,D.a.createElement(_.a,{headingLevel:"h2",size:"xl"},"Registration"),D.a.createElement(j.a,{isRequired:!0,label:"Register the system"},D.a.createElement(F.a,{name:"subscribe-now-radio",isChecked:e.subscribeNow,id:"subscribe-now-radio",label:"Embed an activation key and register systems on first boot",onChange:function(){return e.setSubscribeNow(!0)},"data-testid":"register-now-radio-button"}),D.a.createElement(F.a,{name:"subscribe-later-radio",isChecked:!e.subscribeNow,label:"Register the system later",id:"subscribe-later-radio",onChange:function(){return e.setSubscribeNow(!1)},"data-testid":"register-later-radio-button"})),e.subscribeNow&&D.a.createElement(D.a.Fragment,null,D.a.createElement(j.a,{label:"Organization ID",fieldId:"subscription-organization"},D.a.createElement(P.a,{isDisabled:!0,value:e.subscription.organization||"",type:"text",id:"subscription-organization","aria-label":"Subscription organization ID","data-testid":"organization-id"})),D.a.createElement(j.a,{isRequired:!0,label:"Activation key",fieldId:"subscription-activation",helperTextInvalid:e.errors["subscription-activation"]&&e.errors["subscription-activation"].value||"",validated:e.errors["subscription-activation"]?"error":"default"},D.a.createElement(P.a,{value:e.subscription["activation-key"]||"",type:"password","data-testid":"subscription-activation",isRequired:!0,id:"subscription-activation","aria-label":"Subscription activation key",onChange:function(t){return e.setSubscription(Object.assign(e.subscription,{"activation-key":t}))}}))))};G.propTypes={setSubscription:k.a.func,setSubscribeNow:k.a.func,subscription:k.a.object,subscribeNow:k.a.bool,errors:k.a.object};var H=G,M=a(628),J=a.n(M),Y=a(416),K=a(385),Q=a(116),V=(a(642),function(e){return D.a.createElement(D.a.Fragment,null,(Object.keys(e.uploadAWSErrors).length>0||Object.keys(e.subscriptionErrors).length>0)&&D.a.createElement(Y.a,{variant:"danger",className:"pf-u-mb-xl",isInline:!0,title:"Required information is missing"}),D.a.createElement(_.a,{headingLevel:"h2",size:"xl"},"Create image"),D.a.createElement(K.a,null,D.a.createElement("small",null,"Review the information and click Create image to create the image using the following criteria."),D.a.createElement("h3",null,"Image output"),D.a.createElement("dl",{"data-testid":"review-image-output"},D.a.createElement("dt",null,"Release"),D.a.createElement("dd",null,{"rhel-8":"Red Hat Enterprise Linux (RHEL) 8.3","centos-8":"CentOS Stream 8"}[e.release]),D.a.createElement("dt",null,"Target environment"),D.a.createElement("dd",null,e.uploadAWS&&D.a.createElement(D.a.Fragment,null,"Amazon Web Services"))),Object.entries(e.uploadAWSErrors).length>0&&D.a.createElement("h3",null,"Upload to AWS"),D.a.createElement("dl",null,Object.entries(e.uploadAWSErrors).map((function(e){var t=J()(e,2),a=t[0],r=t[1];return D.a.createElement(D.a.Fragment,{key:a},D.a.createElement("dt",null,r.label),D.a.createElement("dd",null,D.a.createElement(Q.a,{className:"error"})," ",r.value))}))),D.a.createElement("h3",null,"Registration"),D.a.createElement("dl",null,D.a.createElement("dt",null,"Subscription"),!e.subscribeNow&&D.a.createElement("dd",null,"Register the system later"),e.subscribeNow&&D.a.createElement("dd",null,"Register the system on first boot"),Object.entries(e.subscriptionErrors).map((function(e){var t=J()(e,2),a=t[0],r=t[1];return D.a.createElement(D.a.Fragment,{key:a},D.a.createElement("dt",null,r.label),D.a.createElement("dd",null,D.a.createElement(Q.a,{className:"error"})," ",r.value))})))))});V.propTypes={release:k.a.string,uploadAWS:k.a.object,subscription:k.a.object,subscribeNow:k.a.bool,uploadAWSErrors:k.a.object,subscriptionErrors:k.a.object};var X=V,Z=a(365);a(643);function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function te(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ae=function(e){w()(i,e);var t,a,r=(t=i,function(){var e,a=S()(t);if(te()){var r=S()(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return v()(this,e)});function i(e){var t;return d()(this,i),(t=r.call(this,e)).setRelease=t.setRelease.bind(h()(t)),t.setUploadOptions=t.setUploadOptions.bind(h()(t)),t.setSubscription=t.setSubscription.bind(h()(t)),t.setSubscribeNow=t.setSubscribeNow.bind(h()(t)),t.toggleUploadDestination=t.toggleUploadDestination.bind(h()(t)),t.onStep=t.onStep.bind(h()(t)),t.onSave=t.onSave.bind(h()(t)),t.onClose=t.onClose.bind(h()(t)),t.validate=t.validate.bind(h()(t)),t.validateUploadAmazon=t.validateUploadAmazon.bind(h()(t)),t.validateSubscription=t.validateSubscription.bind(h()(t)),t.state={arch:"x86_64",imageType:"qcow2",release:"rhel-8",uploadAWS:{type:"aws",options:{share_with_accounts:[]}},uploadAzure:{type:"azure",options:{temp:""}},uploadGoogle:{type:"google",options:{temp:""}},uploadDestinations:{aws:!1,azure:!1,google:!1},subscription:{organization:null,"activation-key":null,"server-url":"subscription.rhsm.redhat.com","base-url":"https://cdn.redhat.com/",insights:!0},subscribeNow:!0,uploadAWSErrors:{},uploadAzureErrors:{},uploadGoogleErrors:{},subscriptionErrors:{}},t}return m()(i,[{key:"componentDidMount",value:(a=u()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,insights.chrome.auth.getUser();case 2:t=e.sent,this.setState({subscription:{organization:Number(t.identity.internal.org_id)}});case 4:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"onStep",value:function(e){"Review"===e.name&&this.validate()}},{key:"validate",value:function(){var e=this;Object.keys(this.state.uploadDestinations).forEach((function(t){switch(t){case"aws":e.validateUploadAmazon();break;case"azure":case"google":break;default:e.setState({uploadAWSErrors:{},uploadAzureErrors:{},uploadGoogleErrors:{}})}})),this.state.subscribeNow?this.validateSubscription():this.setState({subscriptionErrors:{}})}},{key:"validateUploadAmazon",value:function(){var e={},t=this.state.uploadAWS.options.share_with_accounts;(0===t.length||12!==t[0].length||isNaN(t[0]))&&(e["aws-account-id"]={label:"AWS account ID",value:"A 12-digit number is required"}),this.setState({uploadAWSErrors:e})}},{key:"validateSubscription",value:function(){var e={};this.state.subscription["activation-key"]||(e["subscription-activation"]={label:"Activation key",value:"A value is required"}),this.setState({subscriptionErrors:e})}},{key:"setRelease",value:function(e){this.setState({release:e})}},{key:"toggleUploadDestination",value:function(e){this.setState((function(t){return ee({},t,{uploadDestinations:ee({},t.uploadDestinations,n()({},e,!t.uploadDestinations[e]))})}))}},{key:"setUploadOptions",value:function(e,t){switch(e){case"aws":this.setState({uploadAWS:{type:e,options:t}});break;case"azure":this.setState({uploadAzure:{type:e,options:t}});break;case"google":this.setState({uploadGoogle:{type:e,options:t}})}}},{key:"setSubscribeNow",value:function(e){this.setState({subscribeNow:e})}},{key:"setSubscription",value:function(e){this.setState({subscription:e},this.validate)}},{key:"onSave",value:function(){var e=this,t=[];Object.keys(this.state.uploadDestinations).forEach((function(a){switch(a){case"aws":var r={distribution:e.state.release,image_requests:[{architecture:e.state.arch,image_type:"ami",upload_requests:[e.state.uploadAWS]}],customizations:{subscription:e.state.subscription}};t.push(r)}}));var a=[];t.forEach((function(t){var r=Z.a.composeImage(t).then((function(a){var r={};r[a.id]={image_status:{status:"pending"},distribution:t.distribution,architecture:t.image_requests[0].architecture,image_type:t.image_requests[0].image_type},e.props.updateCompose(r)}));a.push(r)})),Promise.all(a).then((function(){return e.props.history.push("/landing")}))}},{key:"onClose",value:function(){this.props.history.push("/landing")}},{key:"render",value:function(){var e={name:"Image output",component:D.a.createElement(T,{value:this.state.release,setRelease:this.setRelease,toggleUploadDestination:this.toggleUploadDestination,uploadDestinations:this.state.uploadDestinations})},t={name:"Amazon Web Services",component:D.a.createElement(B,{uploadAWS:this.state.uploadAWS,setUploadOptions:this.setUploadOptions,errors:this.state.uploadAWSErrors})},a=[];this.state.uploadDestinations.aws&&a.push(t),this.state.uploadDestinations.azure&&a.push({name:"Microsoft Azure"}),this.state.uploadDestinations.google&&a.push({name:"Google Cloud Platform"});var r={name:"Target environment",steps:a},i=[e].concat(o()(r.steps.length>0?[r]:[]),[{name:"Registration",component:D.a.createElement(H,{subscription:this.state.subscription,subscribeNow:this.state.subscribeNow,setSubscription:this.setSubscription,setSubscribeNow:this.setSubscribeNow,errors:this.state.subscriptionErrors})},{name:"Review",component:D.a.createElement(X,{release:this.state.release,uploadAWS:this.state.uploadAWS,subscription:this.state.subscription,subscribeNow:this.state.subscribeNow,uploadAWSErrors:this.state.uploadAWSErrors,subscriptionErrors:this.state.subscriptionErrors}),nextButtonText:"Create"}]);return D.a.createElement(D.a.Fragment,null,D.a.createElement(z.a,{title:"Create image",onNext:this.onStep,onGoToStep:this.onStep,steps:i,onClose:this.onClose,onSave:this.onSave,isOpen:!0}))}}]),i}(C.Component);ae.propTypes={updateCompose:k.a.func,history:k.a.object};t.default=Object(O.connect)(null,(function(e){return{updateCompose:function(t){return e(W.a.updateCompose(t))}}}))(Object(R.o)(ae))}}]);
//# sourceMappingURL=7.fb4b69ebafb04788e9fc.js.map