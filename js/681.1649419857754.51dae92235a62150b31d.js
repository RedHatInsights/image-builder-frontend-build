"use strict";(self.webpackChunkimage_builder=self.webpackChunkimage_builder||[]).push([[681],{18681:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(15671),r=n(43144),i=n(60136),o=n(82963),s=n(61120),c=n(75418),l=n.n(c),u=n(94469),m=n(75857),p=n(40400);const g=(0,p.IU)({name:"GithubIcon",height:512,width:496,svgPath:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z",yOffset:0,xOffset:0});var d=n(84213),f=n(29439),h=n(45697),v=n.n(h),E=n(28216),y=n(14194),b=n(67304),C=n(7081),_=n(18247),I=n(77310),w=n(68778),T=n(43047);const x=(0,p.IU)({name:"PendingIcon",height:1024,width:1024,svgPath:"M512.1,895.9 C300.3,895.9 128.1,723.8 128.1,511.9 C128.1,300.2 300.3,127.9 512.1,127.9 C723.8,127.9 896,300.2 896.1,511.9 C896.1,723.7 723.8,895.9 512.1,895.9 M512.1,0 C229.7,0 0,229.7 0,512 C0,794.3 229.7,1024 512.1,1024 C794.3,1024 1024,794.3 1024,512 C1024,229.7 794.3,0 512.1,0 M704,288 L704,272 C704,263.2 696.8,256 688,256 L336,256 C327.2,256 320,263.2 320,272 L320,288 C320,447 480,449 480,512 C480,575 320,575 320,736 L320,752 C320,760.8 327.2,768 336,768 L688,768 C696.8,768 704,760.8 704,752 L704,736 C704,576 544,577 544,512 C544,447 704,448 704,288 M603.9,704 L420.3,704 C417.3,704 418.2,695 419.4,686.8 C426.8,634.5 480.1,617.4 495.2,612.3 C512.3,606.6 512.3,606.6 528.9,612.3 C544,617.6 597.6,635.4 604.8,687 C605.9,695.2 606.9,704 603.9,704",yOffset:0,xOffset:0});var S=n(94768),k=function(e){var t={success:[{icon:l().createElement(w.rE,{className:"success"}),text:"Ready"}],failure:[{icon:l().createElement(T.$O,{className:"error"}),text:"Image build failed"}],pending:[{icon:l().createElement(x,null),text:"Image build is pending"}],running:[{icon:l().createElement(S.pG,{className:"pending"}),text:"Image build in progress"}],building:[{icon:l().createElement(S.pG,{className:"pending"}),text:"Image build in progress"}],uploading:[{icon:l().createElement(S.pG,{className:"pending"}),text:"Image upload in progress"}],registering:[{icon:l().createElement(S.pG,{className:"pending"}),text:"Cloud registration in progress"}]};return l().createElement(l().Fragment,null,t[e.status]&&t[e.status].map((function(e,t){return l().createElement(m.Flex,{key:t,className:"pf-u-align-items-baseline pf-m-nowrap"},l().createElement("div",{className:"pf-u-mr-sm"},e.icon),l().createElement("small",null,e.text))})))};k.propTypes={status:v().string};const P=k;var O=n(4942),Z=n(58061),z=function(e){var t,n=(t={},(0,O.Z)(t,Z.F2,"RHEL 8"),(0,O.Z)(t,"centos-8","CentOS Stream 8"),(0,O.Z)(t,"centos-9","CentOS Stream 9"),t),a=n[e.release]?n[e.release]:e.release;return l().createElement(m.Label,{color:"blue"},a)};z.propTypes={release:v().string};const D=z;var L=function(e){var t,n={aws:"Amazon Web Services",azure:"Microsoft Azure",gcp:"Google Cloud Platform",vsphere:"VMWare","guest-image":"Virtualization - Guest image","image-installer":"Bare metal - Installer"};return t="aws.s3"===e.uploadType?n[e.imageType]:n[e.uploadType],l().createElement(l().Fragment,null,t)};L.propTypes={uploadType:v().string,imageType:v().string};const M=L;var B=n(15265);const N=(0,p.IU)({name:"DownloadIcon",height:512,width:512,svgPath:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z",yOffset:0,xOffset:0});var q=function(e){var t=e.imageStatus?e.imageStatus.upload_status:void 0;if(t){if("aws"===t.type){var n="https://console.aws.amazon.com/ec2/v2/home?region="+t.options.region+"#LaunchInstanceWizard:ami="+t.options.ami;return l().createElement(m.Button,{component:"a",target:"_blank",variant:"link",icon:l().createElement(B.LA,null),iconPosition:"right",isInline:!0,href:n},"Launch instance")}if("azure"===t.type){var a="https://portal.azure.com/#@"+e.uploadOptions.tenant_id+"/resource/subscriptions/"+e.uploadOptions.subscription_id+"/resourceGroups/"+e.uploadOptions.resource_group+"/providers/Microsoft.Compute/images/"+t.options.image_name;return l().createElement(m.Button,{component:"a",target:"_blank",variant:"link",icon:l().createElement(B.LA,null),iconPosition:"right",isInline:!0,href:a},"View uploaded image")}if("gcp"===t.type)return l().createElement(m.Popover,{"aria-label":"Popover with google cloud platform image details",maxWidth:"30rem",headerContent:"GCP image details",bodyContent:l().createElement(m.TextContent,null,l().createElement(m.Text,{component:m.TextVariants.p},"To use an Image Builder created Google Cloud Platform (GCP) image in your project, specify the project ID and image name in your templates and configurations."),l().createElement(m.Text,null,l().createElement("strong",null,"Project ID"),l().createElement("br",null),t.options.project_id),l().createElement(m.Text,null,l().createElement("strong",null,"Image Name"),l().createElement("br",null),t.options.image_name),l().createElement(m.Text,null,l().createElement("strong",null,"Shared with"),l().createElement("br",null),e.uploadOptions.share_with_accounts[0].split(":")[1]))},l().createElement(m.Button,{component:"a",target:"_blank",variant:"link",isInline:!0},"Image details"));if("aws.s3"===t.type)return l().createElement(m.Button,{component:"a",target:"_blank",variant:"link",icon:l().createElement(N,null),iconPosition:"right",isInline:!0,href:t.options.url},"Download ",{vsphere:".vmdk","guest-image":".qcow2","image-installer":".iso"}[e.imageType])}return null};q.propTypes={imageStatus:v().object,imageType:v().string,uploadOptions:v().object};const A=q;var G=function(){var e=(0,c.useState)(1),t=(0,f.Z)(e,2),n=t[0],a=t[1],r=(0,c.useState)(10),i=(0,f.Z)(r,2),o=i[0],s=i[1],u=(0,E.v9)((function(e){return e.composes})),p=(0,E.I0)(),g=(0,y.useNavigate)();(0,c.useEffect)((function(){p((0,_.dD)(o,0));var e=setInterval((function(){Object.entries(u.byId).map((function(e){var t=(0,f.Z)(e,2),n=t[0],a=t[1];"success"!==a.image_status.status&&"failure"!==a.image_status.status&&p((0,_.s1)(n))}))}),8e3);return function(){return clearInterval(e)}}),[]);var d=function(e){if(!e)return"";var t=e.slice(0,10),n=Date.parse(t);return new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(n)},h=(n-1)*o,v=h+o,w=u.allIds.slice(h,v).map((function(e){var t=u.byId[e];return{compose:t,cells:[t.request.image_name||e,d(t.created_at),{title:l().createElement(D,{release:t.request.distribution})},{title:l().createElement(M,{uploadType:t.request.image_requests[0].upload_request.type,imageType:t.request.image_requests[0].image_type})},{title:l().createElement(P,{status:t.image_status?t.image_status.status:""})},{title:l().createElement(A,{imageStatus:t.image_status,imageType:t.request.image_requests[0].image_type,uploadOptions:t.request.image_requests[0].upload_request.options})}]}})),T=[{title:"Recreate image",onClick:function(e,t,n){return g("/imagewizard",{state:{composeRequest:n.compose.request,initialStep:"review"}})}}];return l().createElement(l().Fragment,null,0===u.allIds.length&&l().createElement(m.EmptyState,{variant:m.EmptyStateVariant.large,"data-testid":"empty-state"},l().createElement(m.EmptyStateIcon,{icon:C.wl}),l().createElement(m.Title,{headingLevel:"h4",size:"lg"},"Create an image"),l().createElement(m.EmptyStateBody,null,"Create OS images for deployment in Amazon Web Services, Microsoft Azure and Google Cloud Platform. Images can include a custom package set and an activation key to automate the registration process."),l().createElement(y.Link,{to:"/imagewizard",className:"pf-c-button pf-m-primary","data-testid":"create-image-action"},"Create image"),l().createElement(m.EmptyStateSecondaryActions,null,l().createElement(I.Z,null)))||l().createElement(l().Fragment,null,l().createElement(m.Toolbar,null,l().createElement(m.ToolbarContent,null,l().createElement(m.ToolbarItem,null,l().createElement(y.Link,{to:"/imagewizard",className:"pf-c-button pf-m-primary","data-testid":"create-image-action"},"Create image")),l().createElement(m.ToolbarItem,{variant:"pagination",align:{default:"alignRight"}},l().createElement(m.Pagination,{itemCount:u.count,perPage:o,page:n,onSetPage:function(e,t){if(u.count>u.allIds.length){var n=(t-1)*o;p((0,_.dD)(o,n))}a(t)},onPerPageSelect:function(e,t){u.count>u.allIds.length&&t>u.allIds.length&&p((0,_.dD)(t,0)),s(t),a(1)},widgetId:"compose-pagination","data-testid":"images-pagination",isCompact:!0})))),l().createElement(b.Table,{"aria-label":"Images",rows:w,cells:["Image name","Created","Release","Target","Status","Instance",""],actions:T,"data-testid":"images-table"},l().createElement(b.TableHeader,null),l().createElement(b.TableBody,null))))};G.propTypes={composes:v().object,composesGet:v().func,composeGetStatus:v().func};const R=G;const U=function(e){(0,i.Z)(p,e);var t,n,c=(t=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,a=(0,s.Z)(t);if(n){var r=(0,s.Z)(this).constructor;e=Reflect.construct(a,arguments,r)}else e=a.apply(this,arguments);return(0,o.Z)(this,e)});function p(e){return(0,a.Z)(this,p),c.call(this,e)}return(0,r.Z)(p,[{key:"render",value:function(){return l().createElement(l().Fragment,null,l().createElement(u.PageHeader,null,l().createElement(u.PageHeaderTitle,{className:"title",title:"Image Builder"}),l().createElement(m.Popover,{headerContent:"About Image Builder",bodyContent:l().createElement(m.TextContent,null,l().createElement(m.Text,null,"Image Builder is a service that allows you to create RHEL images and push them to cloud environments."),l().createElement(I.Z,null),l().createElement("br",null),l().createElement(m.Button,{component:"a",target:"_blank",variant:"link",icon:l().createElement(g,null),iconPosition:"right",isInline:!0,href:"https://github.com/RedHatInsights/image-builder-frontend/tree/10f774a8c523411e40fa4af43a5a21ea28d6d54d"},"Contribute on GitHub"))},l().createElement(m.Button,{variant:"plain","aria-label":"About image builder",className:"pf-u-pl-sm"},l().createElement(d.by,null)))),l().createElement("section",{className:"pf-l-page__main-section pf-c-page__main-section"},l().createElement(R,null)))}}]),p}(c.Component)},77310:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(75418),r=n.n(a),i=n(75857),o=n(15265);const s=function(){return r().createElement(i.Button,{component:"a",target:"_blank",variant:"link",icon:r().createElement(o.LA,null),iconPosition:"right",isInline:!0,href:"https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/uploading_a_customized_rhel_system_image_to_cloud_environments/index"},"Documentation")}},87248:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(15861),r=n(87757),i=n.n(r),o=n(9669),s=n.n(o),c=n(58061),l={headers:{"Content-Type":"application/json"}};function u(){return(u=(0,a.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,s().post(c.DO.concat("/compose"),t,l);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(){return(m=(0,a.Z)(i().mark((function e(t,n){var a,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new URLSearchParams({limit:t,offset:n}),r="/composes?"+a.toString(),e.next=4,s().get(c.DO.concat(r));case 4:return o=e.sent,e.abrupt("return",o.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=(0,a.Z)(i().mark((function e(t){var n,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/composes/"+t,e.next=3,s().get(c.DO.concat(n));case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=(0,a.Z)(i().mark((function e(t,n,a,r){var o,l,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new URLSearchParams({distribution:t,architecture:n,search:a}),r&&o.append("limit",r),l="/packages?"+o.toString(),e.next=5,s().get(c.DO.concat(l));case 5:return u=e.sent,e.abrupt("return",u.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=(0,a.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,s().get(c.DO.concat("/version"));case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=(0,a.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,s().get(c.UD.concat("/activation_keys"));case 3:return t=e.sent,e.abrupt("return",t.data.body);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const h={composeImage:function(e){return u.apply(this,arguments)},getComposes:function(e,t){return m.apply(this,arguments)},getComposeStatus:function(e){return p.apply(this,arguments)},getPackages:function(e,t,n,a){return g.apply(this,arguments)},getVersion:function(){return d.apply(this,arguments)},getActivationKeys:function(){return f.apply(this,arguments)}}},58061:(e,t,n)=>{n.d(t,{DO:()=>a,F2:()=>i,UD:()=>r,at:()=>c,fI:()=>o,g7:()=>s});var a="/api/image-builder/v1",r="/api/rhsm/v2",i="rhel-85",o=Math.pow(1024,1),s=Math.pow(1024,2),c=Math.pow(1024,3)},18247:(e,t,n)=>{n.d(t,{dD:()=>m,s1:()=>u,tE:()=>c});var a=n(15861),r=n(87757),i=n.n(r),o=n(87248),s=n(26698),c=function(e,t){return{type:s.Z.COMPOSE_ADDED,payload:{compose:e,insert:t}}},l=function(e,t){return{type:s.Z.COMPOSE_UPDATED_STATUS,payload:{id:e,status:t}}},u=function(e){return function(){var t=(0,a.Z)(i().mark((function t(n){var a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.getComposeStatus(e);case 2:a=t.sent,n(l(e,a.image_status));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e,t){return function(){var n=(0,a.Z)(i().mark((function n(a){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.getComposes(e,t);case 2:(r=n.sent).data.map((function(e){a(c(e,!1)),a(u(e.id))})),a((i=r.meta.count,{type:s.Z.COMPOSES_UPDATED_COUNT,payload:{count:i}}));case 5:case"end":return n.stop()}var i}),n)})));return function(e){return n.apply(this,arguments)}}()}}}]);
//# sourceMappingURL=../sourcemaps/681.7f8260b45a2108892e000afb4a592aab.js.map